ARM GAS  /tmp/cc8jUnOu.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"stm32f1xx_ll_usb.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.USB_CoreInit,"ax",%progbits
  16              		.align	1
  17              		.global	USB_CoreInit
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	USB_CoreInit:
  24              	.LFB64:
  25              		.file 1 "Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c"
   1:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
   2:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ******************************************************************************
   3:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @file    stm32f1xx_ll_usb.c
   4:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @author  MCD Application Team
   5:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @version V1.0.4
   6:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @date    29-April-2016
   7:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief   USB Low Layer HAL module driver.
   8:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
   9:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This file provides firmware functions to manage the following 
  10:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          functionalities of the USB Peripheral Controller:
  11:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + Initialization/de-initialization functions
  12:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + I/O operation functions
  13:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + Peripheral Control functions 
  14:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + Peripheral State functions
  15:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  16:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   @verbatim
  17:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ==============================================================================
  18:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     ##### How to use this driver #####
  19:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ==============================================================================
  20:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     [..]
  21:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (#) Fill parameters of Init structure in USB_OTG_CfgTypeDef structure.
  22:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
  23:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (#) Call USB_CoreInit() API to initialize the USB Core peripheral.
  24:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  25:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (#) The upper HAL HCD/PCD driver will call the right routines for its internal processes.
  26:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  27:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   @endverbatim
  28:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ******************************************************************************
  29:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @attention
  30:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  31:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
  32:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  33:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * Redistribution and use in source and binary forms, with or without modification,
ARM GAS  /tmp/cc8jUnOu.s 			page 2


  34:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * are permitted provided that the following conditions are met:
  35:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   1. Redistributions of source code must retain the above copyright notice,
  36:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      this list of conditions and the following disclaimer.
  37:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
  38:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      this list of conditions and the following disclaimer in the documentation
  39:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      and/or other materials provided with the distribution.
  40:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
  41:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      may be used to endorse or promote products derived from this software
  42:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      without specific prior written permission.
  43:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  44:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  45:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  46:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  47:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  48:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  49:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  50:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  51:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  52:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  53:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  54:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  55:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ******************************************************************************
  56:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */ 
  57:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  58:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Includes ------------------------------------------------------------------*/
  59:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #include "stm32f1xx_hal.h"
  60:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  61:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @addtogroup STM32F1xx_HAL_Driver
  62:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  63:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  64:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  65:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL USB Low Layer
  66:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief Low layer module for USB_FS and USB_OTG_FS drivers
  67:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  68:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  69:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  70:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (HAL_PCD_MODULE_ENABLED) || defined (HAL_HCD_MODULE_ENABLED)
  71:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  72:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined(STM32F102x6) || defined(STM32F102xB) || \
  73:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     defined(STM32F103x6) || defined(STM32F103xB) || \
  74:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     defined(STM32F103xE) || defined(STM32F103xG) || \
  75:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     defined(STM32F105xC) || defined(STM32F107xC)
  76:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
  77:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private types -------------------------------------------------------------*/
  78:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private variables ---------------------------------------------------------*/
  79:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private constants ---------------------------------------------------------*/
  80:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private macros ------------------------------------------------------------*/
  81:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private functions ---------------------------------------------------------*/
  82:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (USB_OTG_FS)
  83:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL_Private_Functions USB Low Layer Private Functions
  84:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  85:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  86:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** static HAL_StatusTypeDef USB_CoreReset(USB_OTG_GlobalTypeDef *USBx);
  87:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
  88:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @}
  89:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  90:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #endif /* USB_OTG_FS */
ARM GAS  /tmp/cc8jUnOu.s 			page 3


  91:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  92:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Exported functions --------------------------------------------------------*/
  93:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL_Exported_Functions USB Low Layer Exported Functions
  94:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  95:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  96:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  97:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL_Exported_Functions_Group1 Peripheral Control functions
  98:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  *  @brief   management functions
  99:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  *
 100:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** @verbatim
 101:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  ===============================================================================
 102:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                       ##### Peripheral Control functions #####
 103:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  ===============================================================================  
 104:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     [..]
 105:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     This subsection provides a set of functions allowing to control the PCD data 
 106:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     transfers.
 107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
 108:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** @endverbatim
 109:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
 110:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 112:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /*==============================================================================
 113:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB OTG FS peripheral available on STM32F105xx and STM32F107xx devices 
 114:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** ==============================================================================*/
 115:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (USB_OTG_FS)
 116:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 118:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initializes the USB Core
 119:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx: USB Instance
 120:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg : pointer to a USB_OTG_CfgTypeDef structure that contains
 121:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 122:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 123:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 124:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_CoreInit(USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 125:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 126:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Select FS Embedded PHY */
 127:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GUSBCFG |= USB_OTG_GUSBCFG_PHYSEL;
 128:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 129:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Reset after a PHY select and set Host mode */
 130:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_CoreReset(USBx);
 131:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 132:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Deactivate the power down*/
 133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG = USB_OTG_GCCFG_PWRDWN;
 134:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 135:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 136:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 138:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 139:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EnableGlobalInt
 140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Enables the controller's Global Int in the AHB Config reg
 141:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 142:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 143:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 144:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EnableGlobalInt(USB_OTG_GlobalTypeDef *USBx)
 145:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 146:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GAHBCFG |= USB_OTG_GAHBCFG_GINT;
 147:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
ARM GAS  /tmp/cc8jUnOu.s 			page 4


 148:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 149:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 150:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 151:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DisableGlobalInt
 152:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Disable the controller's Global Int in the AHB Config reg
 153:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 154:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 155:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
 156:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DisableGlobalInt(USB_OTG_GlobalTypeDef *USBx)
 157:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 158:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GAHBCFG &= ~USB_OTG_GAHBCFG_GINT;
 159:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 160:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 161:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 162:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 163:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetCurrentMode : Set functional mode
 164:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 165:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  mode :  current core mode
 166:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 167:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_DEVICE_MODE: Peripheral mode mode
 168:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_HOST_MODE: Host mode
 169:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_DRD_MODE: Dual Role Device mode  
 170:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 171:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 172:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_SetCurrentMode(USB_OTG_GlobalTypeDef *USBx , USB_ModeTypeDef mode)
 173:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 174:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GUSBCFG &= ~(USB_OTG_GUSBCFG_FHMOD | USB_OTG_GUSBCFG_FDMOD); 
 175:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 176:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if ( mode == USB_HOST_MODE)
 177:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 178:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_FHMOD;
 179:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 180:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else if ( mode == USB_DEVICE_MODE)
 181:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 182:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_FDMOD; 
 183:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 184:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(50);
 185:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 186:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 187:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 188:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 189:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 190:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevInit : Initializes the USB_OTG controller registers 
 191:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         for device mode
 192:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 193:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_OTG_CfgTypeDef structure that contains
 194:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 195:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 196:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 197:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DevInit (USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 198:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 199:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 200:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 201:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < 15 ; index++)
 202:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 203:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->DIEPTXF[index] = 0;
 204:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
ARM GAS  /tmp/cc8jUnOu.s 			page 5


 205:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 206:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Activate VBUS Sensing B */
 207:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG |= USB_OTG_GCCFG_VBUSBSEN;
 208:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 209:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Restart the Phy Clock */
 210:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_PCGCCTL = 0;
 211:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 212:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Device mode configuration */
 213:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG |= DCFG_FRAME_INTERVAL_80;
 214:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 215:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set Full speed phy */
 216:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_SetDevSpeed (USBx , USB_OTG_SPEED_FULL);
 217:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 218:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Flush the FIFOs */
 219:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx , 0x10); /* all Tx FIFOs */
 220:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
 221:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 222:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear all pending Device Interrupts */
 223:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK = 0;
 224:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DOEPMSK = 0;
 225:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINT = 0xFFFFFFFF;
 226:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINTMSK = 0;
 227:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 228:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < cfg.dev_endpoints; index++)
 229:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 230:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx_INEP(index)->DIEPCTL & USB_OTG_DIEPCTL_EPENA) == USB_OTG_DIEPCTL_EPENA)
 231:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 232:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(index)->DIEPCTL = (USB_OTG_DIEPCTL_EPDIS | USB_OTG_DIEPCTL_SNAK);
 233:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 234:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 235:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 236:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(index)->DIEPCTL = 0;
 237:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 238:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(index)->DIEPTSIZ = 0;
 240:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(index)->DIEPINT  = 0xFF;
 241:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 242:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 243:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < cfg.dev_endpoints; index++)
 244:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 245:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx_OUTEP(index)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == USB_OTG_DOEPCTL_EPENA)
 246:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 247:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(index)->DOEPCTL = (USB_OTG_DOEPCTL_EPDIS | USB_OTG_DOEPCTL_SNAK);
 248:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 249:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 250:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 251:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(index)->DOEPCTL = 0;
 252:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 253:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 254:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(index)->DOEPTSIZ = 0;
 255:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(index)->DOEPINT  = 0xFF;
 256:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 257:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 258:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK &= ~(USB_OTG_DIEPMSK_TXFURM);
 259:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 260:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Disable all interrupts. */
 261:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK = 0;
ARM GAS  /tmp/cc8jUnOu.s 			page 6


 262:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 263:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear any pending interrupts */
 264:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS = 0xBFFFFFFF;
 265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 266:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable the common interrupts */
 267:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_RXFLVLM;
 268:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 269:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable interrupts matching to the Device mode ONLY */
 270:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= (USB_OTG_GINTMSK_USBSUSPM | USB_OTG_GINTMSK_USBRST |\
 271:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_ENUMDNEM | USB_OTG_GINTMSK_IEPINT |\
 272:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_OEPINT   | USB_OTG_GINTMSK_IISOIXFRM|\
 273:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_PXFRM_IISOOXFRM | USB_OTG_GINTMSK_WUIM);
 274:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 275:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if(cfg.Sof_enable)
 276:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 277:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GINTMSK |= USB_OTG_GINTMSK_SOFM;
 278:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 279:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 280:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (cfg.vbus_sensing_enable == ENABLE)
 281:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 282:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GINTMSK |= (USB_OTG_GINTMSK_SRQIM | USB_OTG_GINTMSK_OTGINT); 
 283:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 284:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 285:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 286:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 287:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 288:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 289:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_OTG_FlushTxFifo : Flush a Tx FIFO
 290:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 291:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  num : FIFO number
 292:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
 293:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             15 means Flush all Tx FIFOs
 294:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 295:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 296:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushTxFifo (USB_OTG_GlobalTypeDef *USBx, uint32_t num )
 297:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 298:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
 299:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 300:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GRSTCTL = ( USB_OTG_GRSTCTL_TXFFLSH |(uint32_t)( num << 6)); 
 301:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 302:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   do
 303:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 304:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (++count > 200000)
 305:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 306:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       return HAL_TIMEOUT;
 307:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 308:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 309:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_TXFFLSH) == USB_OTG_GRSTCTL_TXFFLSH);
 310:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 311:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 312:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 313:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 314:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 315:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_FlushRxFifo : Flush Rx FIFO
 316:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 317:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 318:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
ARM GAS  /tmp/cc8jUnOu.s 			page 7


 319:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushRxFifo(USB_OTG_GlobalTypeDef *USBx)
 320:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 321:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
 322:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 323:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GRSTCTL = USB_OTG_GRSTCTL_RXFFLSH;
 324:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 325:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   do
 326:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 327:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (++count > 200000)
 328:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 329:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       return HAL_TIMEOUT;
 330:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 331:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 332:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_RXFFLSH) == USB_OTG_GRSTCTL_RXFFLSH);
 333:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 334:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 335:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 336:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 337:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 338:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetDevSpeed :Initializes the DevSpd field of DCFG register 
 339:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         depending the PHY type and the enumeration speed of the device.
 340:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 341:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  speed : device speed
 342:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 343:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
 344:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
 345:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval  Hal status
 346:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 347:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_SetDevSpeed(USB_OTG_GlobalTypeDef *USBx , uint8_t speed)
 348:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 349:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG |= speed;
 350:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 351:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 352:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 353:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 354:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_GetDevSpeed :Return the  Dev Speed 
 355:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 356:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval speed : device speed
 357:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 358:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
 359:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
 360:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 361:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint8_t USB_GetDevSpeed(USB_OTG_GlobalTypeDef *USBx)
 362:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 363:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t speed = 0;
 364:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 365:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_FS_PHY_30MHZ_OR_60MHZ)||
 366:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_FS_PHY_48MHZ))
 367:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 368:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     speed = USB_OTG_SPEED_FULL;
 369:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 370:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else if((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_LS_PHY_6MHZ)
 371:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 372:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     speed = USB_OTG_SPEED_LOW;
 373:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 374:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 375:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return speed;
ARM GAS  /tmp/cc8jUnOu.s 			page 8


 376:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 377:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 378:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 379:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Activate and configure an endpoint
 380:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 381:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 382:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 383:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 384:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 385:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 386:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in)
 387:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 388:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Assign a Tx FIFO */
 389:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     ep->tx_fifo_num = ep->num;
 390:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 391:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set initial data PID. */
 392:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->type == EP_TYPE_BULK )
 393:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 394:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     ep->data_pid_start = 0;
 395:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 396:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 397:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 398:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 399:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    USBx_DEVICE->DAINTMSK |= USB_OTG_DAINTMSK_IEPM & ((1 << (ep->num)));
 400:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    
 401:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_INEP(ep->num)->DIEPCTL) & USB_OTG_DIEPCTL_USBAEP) == 0)
 402:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 403:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPCTL |= ((ep->maxpacket & USB_OTG_DIEPCTL_MPSIZ ) | (ep->type << 18 ) 
 404:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         ((ep->num) << 22 ) | (USB_OTG_DIEPCTL_SD0PID_SEVNFRM) | (USB_OTG_DIEPCTL_USBAEP)); 
 405:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 406:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 407:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 408:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 409:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      USBx_DEVICE->DAINTMSK |= USB_OTG_DAINTMSK_OEPM & ((1 << (ep->num)) << 16);
 410:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      
 411:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_OUTEP(ep->num)->DOEPCTL) & USB_OTG_DOEPCTL_USBAEP) == 0)
 412:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 413:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPCTL |= ((ep->maxpacket & USB_OTG_DOEPCTL_MPSIZ ) | (ep->type << 18 )
 414:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****        (USB_OTG_DIEPCTL_SD0PID_SEVNFRM)| (USB_OTG_DOEPCTL_USBAEP));
 415:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 416:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 417:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 418:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 419:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 420:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 421:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 422:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  De-activate and de-initialize an endpoint
 423:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 424:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 425:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 426:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 427:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 428:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 429:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Read DEPCTLn register */
 430:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 431:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 432:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK &= ~(USB_OTG_DAINTMSK_IEPM & ((1 << (ep->num))));
ARM GAS  /tmp/cc8jUnOu.s 			page 9


 433:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_IEPM & ((1 << (ep->num))));
 434:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL &= ~ USB_OTG_DIEPCTL_USBAEP;
 435:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 436:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 437:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 438:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((1 << (ep->num)) << 16));
 439:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((1 << (ep->num)) << 16));
 440:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL &= ~USB_OTG_DOEPCTL_USBAEP;
 441:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 442:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 443:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 444:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 445:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 446:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPStartXfer : setup and starts a transfer over an EP
 447:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 448:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 449:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 450:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 451:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPStartXfer(USB_OTG_GlobalTypeDef *USBx , USB_OTG_EPTypeDef *ep)
 452:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 453:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pktcnt = 0;
 454:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 455:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* IN endpoint */
 456:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 457:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 458:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Zero Length Packet? */
 459:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len == 0)
 460:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 461:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT); 
 462:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1 << 19)) ;
 463:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ); 
 464:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 465:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 466:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 467:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Program the transfer size and packet count
 468:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * as follows: xfersize = N * maxpacket +
 469:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * short_packet pktcnt = N + (short_packet
 470:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * exist ? 1 : 0)
 471:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       */
 472:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 473:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT); 
 474:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (((ep->xfer_len + ep->maxpacket -1
 475:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_XFRSIZ & ep->xfer_len); 
 476:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 477:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (ep->type == EP_TYPE_ISOC)
 478:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 479:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_MULCNT); 
 480:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_MULCNT & (1 << 29)); 
 481:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 482:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 483:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 484:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type != EP_TYPE_ISOC)
 485:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 486:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Enable the Tx FIFO Empty Interrupt for this EP */
 487:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (ep->xfer_len > 0)
 488:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 489:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_DEVICE->DIEPEMPMSK |= 1 << ep->num;
ARM GAS  /tmp/cc8jUnOu.s 			page 10


 490:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 491:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 492:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 493:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 494:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 495:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if ((USBx_DEVICE->DSTS & ( 1 << 8 )) == 0)
 496:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 497:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_SODDFRM;
 498:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 499:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       else
 500:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 501:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_SD0PID_SEVNFRM;
 502:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 503:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     } 
 504:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 505:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable, IN data in FIFO */
 506:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL |= (USB_OTG_DIEPCTL_CNAK | USB_OTG_DIEPCTL_EPENA);
 507:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 508:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 509:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 510:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USB_WritePacket(USBx, ep->xfer_buff, ep->num, ep->xfer_len);
 511:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 512:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 513:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else /* OUT endpoint */
 514:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 515:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Program the transfer size and packet count as follows:
 516:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * pktcnt = N
 517:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * xfersize = N * maxpacket
 518:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     */
 519:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_XFRSIZ); 
 520:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_PKTCNT); 
 521:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 522:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len == 0)
 523:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 524:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & ep->maxpacket);
 525:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1 << 19));
 526:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 527:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 528:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 529:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       pktcnt = (ep->xfer_len + ep->maxpacket -1)/ ep->maxpacket;
 530:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (pktcnt << 19));
 531:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & (ep->maxpacket * pktcnt));
 532:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 533:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 534:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 535:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 536:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if ((USBx_DEVICE->DSTS & ( 1 << 8 )) == 0)
 537:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 538:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_SODDFRM;
 539:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 540:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       else
 541:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 542:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_SD0PID_SEVNFRM;
 543:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 544:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 545:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable */
 546:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL |= (USB_OTG_DOEPCTL_CNAK | USB_OTG_DOEPCTL_EPENA);
ARM GAS  /tmp/cc8jUnOu.s 			page 11


 547:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 548:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 549:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 550:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 551:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 552:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 553:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EP0StartXfer : setup and starts a transfer over the EP  0
 554:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 555:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 556:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 557:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 558:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0StartXfer(USB_OTG_GlobalTypeDef *USBx , USB_OTG_EPTypeDef *ep)
 559:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 560:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* IN endpoint */
 561:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 562:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 563:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Zero Length Packet? */
 564:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len == 0)
 565:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 566:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 567:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1 << 19));
 568:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 569:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 570:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 571:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 572:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Program the transfer size and packet count
 573:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * as follows: xfersize = N * maxpacket +
 574:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * short_packet pktcnt = N + (short_packet
 575:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * exist ? 1 : 0)
 576:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       */
 577:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 578:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 579:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 580:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if(ep->xfer_len > ep->maxpacket)
 581:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 582:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         ep->xfer_len = ep->maxpacket;
 583:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 584:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1 << 19));
 585:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_XFRSIZ & ep->xfer_len);
 586:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 587:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 588:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Enable the Tx FIFO Empty Interrupt for this EP */
 589:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > 0)
 590:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 591:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_DEVICE->DIEPEMPMSK |= 1 << (ep->num);
 592:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 593:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 594:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable, IN data in FIFO */
 595:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL |= (USB_OTG_DIEPCTL_CNAK | USB_OTG_DIEPCTL_EPENA);   
 596:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 597:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else /* OUT endpoint */
 598:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 599:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Program the transfer size and packet count as follows:
 600:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * pktcnt = N
 601:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * xfersize = N * maxpacket
 602:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     */
 603:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_XFRSIZ);
ARM GAS  /tmp/cc8jUnOu.s 			page 12


 604:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_PKTCNT);
 605:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 606:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > 0)
 607:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 608:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len = ep->maxpacket;
 609:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 610:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 611:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1 << 19));
 612:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & (ep->maxpacket));
 613:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 614:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable */
 615:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL |= (USB_OTG_DOEPCTL_CNAK | USB_OTG_DOEPCTL_EPENA);
 616:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 617:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 618:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 619:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 620:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 621:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 622:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_WritePacket : Writes a packet into the Tx FIFO associated 
 623:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
 624:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 625:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  src :  pointer to source buffer
 626:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ch_ep_num : endpoint or host channel number
 627:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to write
 628:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 629:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 630:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_WritePacket(USB_OTG_GlobalTypeDef *USBx, uint8_t *src, uint8_t ch_ep_num, uin
 631:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 632:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count32b = 0 , index = 0;
 633:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 634:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   count32b =  (len + 3) / 4;
 635:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < count32b; index++, src += 4)
 636:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 637:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DFIFO(ch_ep_num) = *((__packed uint32_t *)src);
 638:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 639:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 640:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 641:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 642:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 643:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadPacket : read a packet from the Tx FIFO associated 
 644:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
 645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 646:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  dest : destination pointer
 647:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to read
 648:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval pointer to destination buffer
 649:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 650:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void *USB_ReadPacket(USB_OTG_GlobalTypeDef *USBx, uint8_t *dest, uint16_t len)
 651:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 652:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 653:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count32b = (len + 3) / 4;
 654:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 655:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for ( index = 0; index < count32b; index++, dest += 4 )
 656:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 657:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     *(__packed uint32_t *)dest = USBx_DFIFO(0);
 658:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 659:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 660:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((void *)dest);
ARM GAS  /tmp/cc8jUnOu.s 			page 13


 661:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 662:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 663:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 664:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPSetStall : set a stall condition over an EP
 665:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 666:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure   
 667:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 668:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 669:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPSetStall(USB_OTG_GlobalTypeDef *USBx , USB_OTG_EPTypeDef *ep)
 670:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 671:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 672:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 673:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_INEP(ep->num)->DIEPCTL) & USB_OTG_DIEPCTL_EPENA) == 0)
 674:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 675:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPCTL &= ~(USB_OTG_DIEPCTL_EPDIS);
 676:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     } 
 677:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_STALL;
 678:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 679:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 680:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 681:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_OUTEP(ep->num)->DOEPCTL) & USB_OTG_DOEPCTL_EPENA) == 0)
 682:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 683:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPCTL &= ~(USB_OTG_DOEPCTL_EPDIS);
 684:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     } 
 685:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_STALL;
 686:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 687:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 688:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 689:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 690:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 691:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPClearStall : Clear a stall condition over an EP
 692:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 693:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 694:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 695:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 696:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPClearStall(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 697:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 698:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 699:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 700:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL &= ~USB_OTG_DIEPCTL_STALL;
 701:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_INTR || ep->type == EP_TYPE_BULK)
 702:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 703:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****        USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_SD0PID_SEVNFRM; /* DATA0 */
 704:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 705:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 706:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 707:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 708:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL &= ~USB_OTG_DOEPCTL_STALL;
 709:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_INTR || ep->type == EP_TYPE_BULK)
 710:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 711:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_SD0PID_SEVNFRM; /* DATA0 */
 712:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 713:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 714:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 715:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 716:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 717:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
ARM GAS  /tmp/cc8jUnOu.s 			page 14


 718:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_StopDevice : Stop the usb device mode
 719:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 720:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 721:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 722:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_StopDevice(USB_OTG_GlobalTypeDef *USBx)
 723:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 724:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 725:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 726:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear Pending interrupt */
 727:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < 15 ; index++)
 728:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 729:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(index)->DIEPINT  = 0xFF;
 730:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(index)->DOEPINT  = 0xFF;
 731:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 732:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINT = 0xFFFFFFFF;
 733:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 734:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear interrupt masks */
 735:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK  = 0;
 736:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DOEPMSK  = 0;
 737:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINTMSK = 0;
 738:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 739:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Flush the FIFO */
 740:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
 741:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx ,  0x10 );
 742:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 743:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 744:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 745:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 747:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetDevAddress : Stop the usb device mode
 748:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 749:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  address : new device address to be assigned
 750:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
 751:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 752:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 753:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_SetDevAddress (USB_OTG_GlobalTypeDef *USBx, uint8_t address)
 754:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 755:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG &= ~ (USB_OTG_DCFG_DAD);
 756:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG |= (address << 4) & USB_OTG_DCFG_DAD;
 757:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 758:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 759:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 760:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 761:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 762:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevConnect : Connect the USB device by enabling the pull-up/pull-down
 763:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 764:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 765:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 766:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevConnect (USB_OTG_GlobalTypeDef *USBx)
 767:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 768:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCTL &= ~USB_OTG_DCTL_SDIS ;
 769:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(3);
 770:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 771:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 772:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 773:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 774:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
ARM GAS  /tmp/cc8jUnOu.s 			page 15


 775:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevDisconnect : Disconnect the USB device by disabling the pull-up/pull-down
 776:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 777:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 778:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 779:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevDisconnect (USB_OTG_GlobalTypeDef *USBx)
 780:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 781:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCTL |= USB_OTG_DCTL_SDIS;
 782:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(3);
 783:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 784:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 785:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 788:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadInterrupts: return the global USB interrupt status
 789:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 790:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 791:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 792:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t  USB_ReadInterrupts (USB_OTG_GlobalTypeDef *USBx)
 793:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 794:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 795:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 796:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx->GINTSTS;
 797:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx->GINTMSK;
 798:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 799:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 800:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 801:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 802:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllOutEpInterrupt: return the USB device OUT endpoints interrupt status
 803:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 804:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 805:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 806:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllOutEpInterrupt (USB_OTG_GlobalTypeDef *USBx)
 807:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 808:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 809:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg  = USBx_DEVICE->DAINT;
 810:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DAINTMSK;
 811:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((tmpreg & 0xffff0000) >> 16);
 812:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 813:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 814:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllInEpInterrupt: return the USB device IN endpoints interrupt status
 816:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 817:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 818:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 819:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllInEpInterrupt (USB_OTG_GlobalTypeDef *USBx)
 820:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 821:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 822:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg  = USBx_DEVICE->DAINT;
 823:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DAINTMSK;
 824:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((tmpreg & 0xFFFF));
 825:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 826:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 827:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 828:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device OUT EP Interrupt register
 829:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 830:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
 831:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
ARM GAS  /tmp/cc8jUnOu.s 			page 16


 832:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device OUT EP Interrupt register
 833:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 834:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevOutEPInterrupt (USB_OTG_GlobalTypeDef *USBx , uint8_t epnum)
 835:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 836:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 837:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg  = USBx_OUTEP(epnum)->DOEPINT;
 838:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DOEPMSK;
 839:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 840:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 841:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 842:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 843:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device IN EP Interrupt register
 844:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 845:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
 846:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
 847:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device IN EP Interrupt register
 848:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 849:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevInEPInterrupt (USB_OTG_GlobalTypeDef *USBx , uint8_t epnum)
 850:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 851:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0, msk = 0, emp = 0;
 852:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 853:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   msk = USBx_DEVICE->DIEPMSK;
 854:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   emp = USBx_DEVICE->DIEPEMPMSK;
 855:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   msk |= ((emp >> epnum) & 0x1) << 7;
 856:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx_INEP(epnum)->DIEPINT & msk;
 857:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 858:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 859:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 860:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 861:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ClearInterrupts: clear a USB interrupt
 862:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 863:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  interrupt : interrupt flag
 864:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
 865:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 866:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void  USB_ClearInterrupts (USB_OTG_GlobalTypeDef *USBx, uint32_t interrupt)
 867:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 868:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS |= interrupt;
 869:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 870:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 871:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 872:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns USB core mode
 873:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 874:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval return core mode : Host or Device
 875:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 876:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           0 : Host 
 877:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           1 : Device
 878:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 879:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_GetMode(USB_OTG_GlobalTypeDef *USBx)
 880:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 881:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((USBx->GINTSTS ) & 0x1);
 882:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 883:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 884:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 885:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Activate EP0 for Setup transactions
 886:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 887:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 888:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
ARM GAS  /tmp/cc8jUnOu.s 			page 17


 889:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_ActivateSetup (USB_OTG_GlobalTypeDef *USBx)
 890:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 891:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set the MPS of the IN EP based on the enumeration speed */
 892:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_INEP(0)->DIEPCTL &= ~USB_OTG_DIEPCTL_MPSIZ;
 893:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 894:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_LS_PHY_6MHZ)
 895:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 896:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(0)->DIEPCTL |= 3;
 897:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 898:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCTL |= USB_OTG_DCTL_CGINAK;
 899:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 900:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 901:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 902:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 903:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 904:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Prepare the EP0 to start the first control setup
 905:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 906:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  psetup : pointer to setup packet
 907:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 908:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 909:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0_OutStart(USB_OTG_GlobalTypeDef *USBx, uint8_t *psetup)
 910:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 911:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ = 0;
 912:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1 << 19));
 913:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ |= (3 * 8);
 914:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ |=  USB_OTG_DOEPTSIZ_STUPCNT;
 915:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 916:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 917:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 918:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 919:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 920:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_HostInit : Initializes the USB OTG controller registers 
 921:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         for Host mode 
 922:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 923:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_OTG_CfgTypeDef structure that contains
 924:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 925:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 926:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 927:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HostInit (USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 928:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 929:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 930:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 931:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Restart the Phy Clock */
 932:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_PCGCCTL = 0;
 933:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 934:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* no VBUS sensing*/
 935:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG &=~ (USB_OTG_GCCFG_VBUSASEN);
 936:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG &=~ (USB_OTG_GCCFG_VBUSBSEN);
 937:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 938:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Disable the FS/LS support mode only */
 939:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((cfg.speed == USB_OTG_SPEED_FULL)&&
 940:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      (USBx != USB_OTG_FS))
 941:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 942:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HCFG |= USB_OTG_HCFG_FSLSS; 
 943:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 944:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 945:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
ARM GAS  /tmp/cc8jUnOu.s 			page 18


 946:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HCFG &= ~(USB_OTG_HCFG_FSLSS);  
 947:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 948:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 949:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Make sure the FIFOs are flushed. */
 950:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx, 0x10 ); /* all Tx FIFOs */
 951:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
 952:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 953:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear all pending HC Interrupts */
 954:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < cfg.Host_channels; index++)
 955:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 956:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCINT = 0xFFFFFFFF;
 957:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCINTMSK = 0;
 958:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 959:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 960:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable VBUS driving */
 961:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_DriveVbus(USBx, 1);
 962:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 963:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(200);
 964:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 965:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Disable all interrupts. */
 966:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK = 0;
 967:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 968:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear any pending interrupts */
 969:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS = 0xFFFFFFFF;
 970:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 971:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if(USBx == USB_OTG_FS)
 972:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 973:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* set Rx FIFO size */
 974:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GRXFSIZ  = (uint32_t )0x80; 
 975:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->DIEPTXF0_HNPTXFSIZ = (uint32_t )(((0x60 << 16)& USB_OTG_NPTXFD) | 0x80);
 976:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->HPTXFSIZ = (uint32_t )(((0x40 << 16)& USB_OTG_HPTXFSIZ_PTXFD) | 0xE0);
 977:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 978:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 979:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable the common interrupts */
 980:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_RXFLVLM;
 981:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 982:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable interrupts matching to the Host mode ONLY */
 983:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= (USB_OTG_GINTMSK_PRTIM            | USB_OTG_GINTMSK_HCIM |\
 984:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_SOFM             |USB_OTG_GINTSTS_DISCINT|\
 985:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_PXFRM_IISOOXFRM  | USB_OTG_GINTMSK_WUIM);
 986:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 987:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 988:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 989:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 990:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 991:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_InitFSLSPClkSel : Initializes the FSLSPClkSel field of the 
 992:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         HCFG register on the PHY type and set the right frame interval
 993:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 994:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  freq : clock frequency
 995:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 996:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           HCFG_48_MHZ : Full Speed 48 MHz Clock 
 997:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           HCFG_6_MHZ : Low Speed 6 MHz Clock 
 998:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 999:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1000:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_InitFSLSPClkSel(USB_OTG_GlobalTypeDef *USBx , uint8_t freq)
1001:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1002:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HCFG &= ~(USB_OTG_HCFG_FSLSPCS);
ARM GAS  /tmp/cc8jUnOu.s 			page 19


1003:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HCFG |= (freq & USB_OTG_HCFG_FSLSPCS);
1004:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1005:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (freq ==  HCFG_48_MHZ)
1006:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1007:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HFIR = (uint32_t)48000;
1008:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1009:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else if (freq ==  HCFG_6_MHZ)
1010:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1011:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HFIR = (uint32_t)6000;
1012:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1013:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1014:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1015:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1016:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1017:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** * @brief  USB_OTG_ResetPort : Reset Host Port
1018:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1019:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1020:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @note : (1)The application must wait at least 10 ms
1021:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   before clearing the reset bit.
1022:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1023:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ResetPort(USB_OTG_GlobalTypeDef *USBx)
1024:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1025:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   __IO uint32_t hprt0 = 0;
1026:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1027:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1028:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1029:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 &= ~(USB_OTG_HPRT_PENA    | USB_OTG_HPRT_PCDET |\
1030:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB_OTG_HPRT_PENCHNG | USB_OTG_HPRT_POCCHNG );
1031:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1032:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HPRT0 = (USB_OTG_HPRT_PRST | hprt0);  
1033:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay (10);                                /* See Note #1 */
1034:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HPRT0 = ((~USB_OTG_HPRT_PRST) & hprt0); 
1035:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1036:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1037:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1038:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1039:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DriveVbus : activate or de-activate vbus
1040:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  state : VBUS state
1041:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1042:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           0 : VBUS Active 
1043:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           1 : VBUS Inactive
1044:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1045:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
1046:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DriveVbus (USB_OTG_GlobalTypeDef *USBx, uint8_t state)
1047:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1048:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   __IO uint32_t hprt0 = 0;
1049:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1050:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1051:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 &= ~(USB_OTG_HPRT_PENA    | USB_OTG_HPRT_PCDET |\
1052:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****           USB_OTG_HPRT_PENCHNG | USB_OTG_HPRT_POCCHNG );
1053:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1054:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((hprt0 & USB_OTG_HPRT_PPWR) == 0 ) && (state == 1 ))
1055:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1056:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HPRT0 = (USB_OTG_HPRT_PPWR | hprt0);
1057:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1058:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((hprt0 & USB_OTG_HPRT_PPWR) == USB_OTG_HPRT_PPWR) && (state == 0 ))
1059:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
ARM GAS  /tmp/cc8jUnOu.s 			page 20


1060:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HPRT0 = ((~USB_OTG_HPRT_PPWR) & hprt0);
1061:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1062:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1063:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1064:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1065:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1066:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Return Host Core speed
1067:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1068:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval speed : Host speed
1069:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1070:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
1071:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
1072:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1073:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_GetHostSpeed (USB_OTG_GlobalTypeDef *USBx)
1074:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1075:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   __IO uint32_t hprt0 = 0;
1076:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1077:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1078:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((hprt0 & USB_OTG_HPRT_PSPD) >> 17);
1079:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1080:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1081:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1082:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Return Host Current Frame number
1083:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1084:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval current frame number
1085:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
1086:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_GetCurrentFrame (USB_OTG_GlobalTypeDef *USBx)
1087:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1088:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (USBx_HOST->HFNUM & USB_OTG_HFNUM_FRNUM);
1089:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1090:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1091:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1092:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initialize a host channel
1093:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1094:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ch_num : Channel number
1095:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1096:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : Endpoint number
1097:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 1 to 15
1098:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  dev_address : Current device address
1099:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
1100:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  speed : Current device speed
1101:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1102:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
1103:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
1104:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep_type : Endpoint Type
1105:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1106:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_CTRL: Control type
1107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_ISOC: Isochronous type
1108:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_BULK: Bulk type
1109:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_INTR: Interrupt type
1110:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  mps : Max Packet Size
1111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to32K
1112:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1113:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1114:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_Init(USB_OTG_GlobalTypeDef *USBx,  
1115:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t ch_num,
1116:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t epnum,
ARM GAS  /tmp/cc8jUnOu.s 			page 21


1117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t dev_address,
1118:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t speed,
1119:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t ep_type,
1120:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint16_t mps)
1121:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1122:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear old interrupt conditions for this host channel. */
1123:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCINT = 0xFFFFFFFF;
1124:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1125:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable channel interrupts required for this transfer. */
1126:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   switch (ep_type) 
1127:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1128:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_CTRL:
1129:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_BULK:
1130:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |\
1131:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_STALLM |\
1132:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_TXERRM |\
1133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_DTERRM |\
1134:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_AHBERR |\
1135:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_NAKM ;
1136:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (epnum & 0x80) 
1138:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1139:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(ch_num)->HCINTMSK |= USB_OTG_HCINTMSK_BBERRM;
1140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1141:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1142:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1143:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_INTR:
1144:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |\
1145:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_STALLM |\
1146:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_TXERRM |\
1147:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_DTERRM |\
1148:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_NAKM   |\
1149:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_AHBERR |\
1150:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_FRMORM ;
1151:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1152:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (epnum & 0x80) 
1153:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1154:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(ch_num)->HCINTMSK |= USB_OTG_HCINTMSK_BBERRM;
1155:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1156:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1157:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1158:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1159:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_ISOC:
1160:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |\
1161:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_ACKM   |\
1162:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_AHBERR |\
1163:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_FRMORM ;
1164:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1165:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (epnum & 0x80) 
1166:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1167:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(ch_num)->HCINTMSK |= (USB_OTG_HCINTMSK_TXERRM | USB_OTG_HCINTMSK_BBERRM);
1168:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1169:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1170:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1171:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1172:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable the top level host channel interrupt. */
1173:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HAINTMSK |= (1 << ch_num);
ARM GAS  /tmp/cc8jUnOu.s 			page 22


1174:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1175:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Make sure host channel interrupts are enabled. */
1176:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_HCIM;
1177:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1178:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Program the HCCHAR register */
1179:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR = (((dev_address << 22) & USB_OTG_HCCHAR_DAD)  |\
1180:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              (((epnum & 0x7F)<< 11) & USB_OTG_HCCHAR_EPNUM)|\
1181:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              ((((epnum & 0x80) == 0x80)<< 15) & USB_OTG_HCCHAR_EPDIR)|\
1182:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              (((speed == HPRT0_PRTSPD_LOW_SPEED)<< 17) & USB_OTG_HCCHAR_LSDEV)|\
1183:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              ((ep_type << 18) & USB_OTG_HCCHAR_EPTYP)|\
1184:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              (mps & USB_OTG_HCCHAR_MPSIZ));
1185:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1186:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep_type == EP_TYPE_INTR)
1187:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1188:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCCHAR |= USB_OTG_HCCHAR_ODDFRM ;
1189:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1190:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1191:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1192:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1193:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1194:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1195:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Start a transfer over a host channel
1196:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1197:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  hc : pointer to host channel structure
1198:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1199:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1200:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined   (__CC_ARM) /*!< ARM Compiler */
1201:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #pragma O0
1202:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #elif defined (__GNUC__) /*!< GNU Compiler */
1203:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #pragma GCC optimize ("O0")
1204:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #endif /* __CC_ARM */
1205:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_StartXfer(USB_OTG_GlobalTypeDef *USBx, USB_OTG_HCTypeDef *hc)
1206:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1207:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t  is_oddframe = 0;
1208:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t len_words = 0;
1209:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t num_packets = 0;
1210:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t max_hc_pkt_count = 256;
1211:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
1212:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1213:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Compute the expected number of packets associated to the transfer */
1214:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (hc->xfer_len > 0)
1215:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1216:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     num_packets = (hc->xfer_len + hc->max_packet - 1) / hc->max_packet;
1217:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1218:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (num_packets > max_hc_pkt_count)
1219:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1220:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       num_packets = max_hc_pkt_count;
1221:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       hc->xfer_len = num_packets * hc->max_packet;
1222:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1223:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1224:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1225:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1226:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     num_packets = 1;
1227:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1228:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (hc->ep_is_in)
1229:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1230:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     hc->xfer_len = num_packets * hc->max_packet;
ARM GAS  /tmp/cc8jUnOu.s 			page 23


1231:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1232:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1233:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Initialize the HCTSIZn register */
1234:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCTSIZ = (((hc->xfer_len) & USB_OTG_HCTSIZ_XFRSIZ)) |\
1235:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     ((num_packets << 19) & USB_OTG_HCTSIZ_PKTCNT) |\
1236:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (((hc->data_pid) << 29) & USB_OTG_HCTSIZ_DPID);
1237:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1238:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   is_oddframe = (USBx_HOST->HFNUM & 0x01) ? 0 : 1;
1239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCCHAR &= ~USB_OTG_HCCHAR_ODDFRM;
1240:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCCHAR |= (is_oddframe << 29);
1241:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1242:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set host channel enable */
1243:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx_HC(hc->ch_num)->HCCHAR;
1244:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= ~USB_OTG_HCCHAR_CHDIS;
1245:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg |= USB_OTG_HCCHAR_CHENA;
1246:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCCHAR = tmpreg;
1247:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1248:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((hc->ep_is_in == 0) && (hc->xfer_len > 0))
1249:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1250:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     switch(hc->ep_type) 
1251:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1252:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Non periodic transfer */
1253:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_CTRL:
1254:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_BULK:
1255:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len_words = (hc->xfer_len + 3) / 4;
1256:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1257:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* check if there is enough space in FIFO space */
1258:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if(len_words > (USBx->HNPTXSTS & 0xFFFF))
1259:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1260:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* need to process data in nptxfempty interrupt */
1261:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx->GINTMSK |= USB_OTG_GINTMSK_NPTXFEM;
1262:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1263:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
1264:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Periodic transfer */
1266:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_INTR:
1267:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_ISOC:
1268:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len_words = (hc->xfer_len + 3) / 4;
1269:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* check if there is enough space in FIFO space */
1270:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if(len_words > (USBx_HOST->HPTXSTS & 0xFFFF)) /* split the transfer */
1271:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1272:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* need to process data in ptxfempty interrupt */
1273:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx->GINTMSK |= USB_OTG_GINTMSK_PTXFEM;          
1274:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1275:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
1276:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1277:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     default:
1278:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
1279:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1280:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1281:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Write packet into the Tx FIFO. */
1282:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB_WritePacket(USBx, hc->xfer_buff, hc->ch_num, hc->xfer_len);
1283:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1284:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1285:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1286:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1287:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
ARM GAS  /tmp/cc8jUnOu.s 			page 24


1288:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1289:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief Read all host channel interrupts status
1290:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1291:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1292:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1293:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_HC_ReadInterrupt (USB_OTG_GlobalTypeDef *USBx)
1294:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1295:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((USBx_HOST->HAINT) & 0xFFFF);
1296:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1297:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1298:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1299:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Halt a host channel
1300:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1301:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  hc_num : Host Channel number
1302:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1303:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1304:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1305:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_Halt(USB_OTG_GlobalTypeDef *USBx , uint8_t hc_num)
1306:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1307:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
1308:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1309:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Check for space in the request queue to issue the halt. */
1310:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((USBx_HC(hc_num)->HCCHAR) & (HCCHAR_CTRL << 18)) || ((USBx_HC(hc_num)->HCCHAR) & (HCCHAR_BUL
1311:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1312:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHDIS;
1313:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1314:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx->HNPTXSTS & 0xFFFF) == 0)
1315:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1316:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_CHENA;
1317:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1318:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_EPDIR;
1319:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       do
1320:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1321:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         if (++count > 1000)
1322:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         {
1323:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****           break;
1324:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         }
1325:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       } 
1326:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       while ((USBx_HC(hc_num)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1327:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1328:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1329:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1330:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1331:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1332:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1333:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1334:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1335:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHDIS;
1336:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1337:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx_HOST->HPTXSTS & 0xFFFF) == 0)
1338:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1339:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_CHENA;
1340:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1341:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_EPDIR;
1342:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       do
1343:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1344:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         if (++count > 1000)
ARM GAS  /tmp/cc8jUnOu.s 			page 25


1345:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         {
1346:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****           break;
1347:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         }
1348:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       } 
1349:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       while ((USBx_HC(hc_num)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1350:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1351:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1352:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1353:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****        USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA; 
1354:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1355:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1356:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1357:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1358:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1359:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1360:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1361:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initiate Do Ping protocol
1362:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1363:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  hc_num : Host Channel number
1364:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1365:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1366:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1367:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DoPing(USB_OTG_GlobalTypeDef *USBx , uint8_t ch_num)
1368:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1369:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t  num_packets = 1;
1370:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
1371:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1372:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCTSIZ = ((num_packets << 19) & USB_OTG_HCTSIZ_PKTCNT) |\
1373:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCTSIZ_DOPING;
1374:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1375:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set host channel enable */
1376:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx_HC(ch_num)->HCCHAR;
1377:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= ~USB_OTG_HCCHAR_CHDIS;
1378:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg |= USB_OTG_HCCHAR_CHENA;
1379:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR = tmpreg;
1380:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1381:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;  
1382:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1383:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1384:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1385:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Stop Host Core
1386:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1387:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1388:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1389:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_StopHost(USB_OTG_GlobalTypeDef *USBx)
1390:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1391:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t index;
1392:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
1393:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t value = 0;
1394:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1395:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_DisableGlobalInt(USBx);
1396:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1397:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Flush FIFO */
1398:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx, 0x10);
1399:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
1400:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1401:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Flush out any leftover queued requests. */
ARM GAS  /tmp/cc8jUnOu.s 			page 26


1402:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index <= 15; index++)
1403:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1404:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value = USBx_HC(index)->HCCHAR;
1405:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value |=  USB_OTG_HCCHAR_CHDIS;
1406:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_CHENA;
1407:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_EPDIR;
1408:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCCHAR = value;
1409:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1410:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1411:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Halt all channels to put them into a known state. */
1412:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index <= 15; index++)
1413:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1414:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value = USBx_HC(index)->HCCHAR ;
1415:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value |= USB_OTG_HCCHAR_CHDIS;
1416:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value |= USB_OTG_HCCHAR_CHENA;
1417:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_EPDIR;
1418:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCCHAR = value;
1419:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1420:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     do
1421:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1422:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (++count > 1000)
1423:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1424:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         break;
1425:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1426:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1427:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     while ((USBx_HC(index)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1428:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1429:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1430:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear any pending Host interrupts */
1431:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HAINT = 0xFFFFFFFF;
1432:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS = 0xFFFFFFFF;
1433:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_EnableGlobalInt(USBx);
1434:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1435:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1436:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1437:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1438:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1439:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ActivateRemoteWakeup : active remote wakeup signalling
1440:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1441:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1442:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1443:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateRemoteWakeup(USB_OTG_GlobalTypeDef *USBx)
1444:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1445:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((USBx_DEVICE->DSTS & USB_OTG_DSTS_SUSPSTS) == USB_OTG_DSTS_SUSPSTS)
1446:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1447:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* active Remote wakeup signalling */
1448:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DCTL |= USB_OTG_DCTL_RWUSIG;
1449:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1450:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1451:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1452:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1453:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1454:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DeActivateRemoteWakeup : de-active remote wakeup signalling
1455:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1456:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1457:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1458:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeActivateRemoteWakeup(USB_OTG_GlobalTypeDef *USBx)
ARM GAS  /tmp/cc8jUnOu.s 			page 27


1459:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1460:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* active Remote wakeup signalling */
1461:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    USBx_DEVICE->DCTL &= ~(USB_OTG_DCTL_RWUSIG);
1462:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1463:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1464:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1465:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #endif /* USB_OTG_FS */
1466:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1467:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /*==============================================================================
1468:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB Device FS peripheral available on STM32F102xx and STM32F103xx devices 
1469:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** ==============================================================================*/
1470:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (USB)
1471:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1472:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initializes the USB Core
1473:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx: USB Instance
1474:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg : pointer to a USB_CfgTypeDef structure that contains
1475:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1476:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1477:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1478:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_CoreInit(USB_TypeDef *USBx, USB_CfgTypeDef cfg)
1479:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
  26              		.loc 1 1479 0
  27              		.cfi_startproc
  28              		@ args = 36, pretend = 16, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
  32 0000 84B0     		sub	sp, sp, #16
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 16
  35              		.loc 1 1479 0
  36 0002 01A8     		add	r0, sp, #4
  37              	.LVL1:
  38 0004 80E80E00 		stm	r0, {r1, r2, r3}
1480:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1481:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1482:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1483:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1484:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1485:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
  39              		.loc 1 1485 0
  40 0008 04B0     		add	sp, sp, #16
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 0
  43 000a 0020     		movs	r0, #0
  44 000c 7047     		bx	lr
  45              		.cfi_endproc
  46              	.LFE64:
  48              		.section	.text.USB_EnableGlobalInt,"ax",%progbits
  49              		.align	1
  50              		.global	USB_EnableGlobalInt
  51              		.syntax unified
  52              		.thumb
  53              		.thumb_func
  54              		.fpu softvfp
  56              	USB_EnableGlobalInt:
  57              	.LFB65:
ARM GAS  /tmp/cc8jUnOu.s 			page 28


1486:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1487:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1488:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EnableGlobalInt
1489:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Enables the controller's Global Int in the AHB Config reg
1490:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1491:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1492:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1493:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EnableGlobalInt(USB_TypeDef *USBx)
1494:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
  58              		.loc 1 1494 0
  59              		.cfi_startproc
  60              		@ args = 0, pretend = 0, frame = 0
  61              		@ frame_needed = 0, uses_anonymous_args = 0
  62              		@ link register save eliminated.
  63              	.LVL2:
1495:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t winterruptmask = 0;
1496:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1497:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set winterruptmask variable */
1498:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   winterruptmask = USB_CNTR_CTRM  | USB_CNTR_WKUPM | USB_CNTR_SUSPM | USB_CNTR_ERRM \
1499:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     | USB_CNTR_ESOFM | USB_CNTR_RESETM;
1500:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1501:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set interrupt mask */
1502:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR |= winterruptmask;
  64              		.loc 1 1502 0
  65 0000 B0F84030 		ldrh	r3, [r0, #64]
  66 0004 9BB2     		uxth	r3, r3
  67 0006 43F43D43 		orr	r3, r3, #48384
  68 000a A0F84030 		strh	r3, [r0, #64]	@ movhi
1503:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1504:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1505:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
  69              		.loc 1 1505 0
  70 000e 0020     		movs	r0, #0
  71              	.LVL3:
  72 0010 7047     		bx	lr
  73              		.cfi_endproc
  74              	.LFE65:
  76              		.section	.text.USB_DisableGlobalInt,"ax",%progbits
  77              		.align	1
  78              		.global	USB_DisableGlobalInt
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  82              		.fpu softvfp
  84              	USB_DisableGlobalInt:
  85              	.LFB66:
1506:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1507:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1508:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DisableGlobalInt
1509:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Disable the controller's Global Int in the AHB Config reg
1510:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1511:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1512:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
1513:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DisableGlobalInt(USB_TypeDef *USBx)
1514:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
  86              		.loc 1 1514 0
  87              		.cfi_startproc
ARM GAS  /tmp/cc8jUnOu.s 			page 29


  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		@ link register save eliminated.
  91              	.LVL4:
1515:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t winterruptmask = 0;
1516:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1517:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set winterruptmask variable */
1518:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   winterruptmask = USB_CNTR_CTRM  | USB_CNTR_WKUPM | USB_CNTR_SUSPM | USB_CNTR_ERRM \
1519:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     | USB_CNTR_ESOFM | USB_CNTR_RESETM;
1520:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1521:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear interrupt mask */
1522:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR &= ~winterruptmask;
  92              		.loc 1 1522 0
  93 0000 B0F84030 		ldrh	r3, [r0, #64]
  94 0004 23F47453 		bic	r3, r3, #15616
  95 0008 5B04     		lsls	r3, r3, #17
  96 000a 5B0C     		lsrs	r3, r3, #17
  97 000c A0F84030 		strh	r3, [r0, #64]	@ movhi
1523:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1524:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1525:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
  98              		.loc 1 1525 0
  99 0010 0020     		movs	r0, #0
 100              	.LVL5:
 101 0012 7047     		bx	lr
 102              		.cfi_endproc
 103              	.LFE66:
 105              		.section	.text.USB_SetCurrentMode,"ax",%progbits
 106              		.align	1
 107              		.global	USB_SetCurrentMode
 108              		.syntax unified
 109              		.thumb
 110              		.thumb_func
 111              		.fpu softvfp
 113              	USB_SetCurrentMode:
 114              	.LFB67:
1526:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1527:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1528:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetCurrentMode : Set functional mode
1529:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1530:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  mode :  current core mode
1531:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1532:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_DEVICE_MODE: Peripheral mode mode
1533:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1534:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1535:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_SetCurrentMode(USB_TypeDef *USBx , USB_ModeTypeDef mode)
1536:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 115              		.loc 1 1536 0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 0
 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119              		@ link register save eliminated.
 120              	.LVL6:
1537:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1538:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1539:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1540:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
ARM GAS  /tmp/cc8jUnOu.s 			page 30


1541:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1542:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 121              		.loc 1 1542 0
 122 0000 0020     		movs	r0, #0
 123              	.LVL7:
 124 0002 7047     		bx	lr
 125              		.cfi_endproc
 126              	.LFE67:
 128              		.section	.text.USB_DevInit,"ax",%progbits
 129              		.align	1
 130              		.global	USB_DevInit
 131              		.syntax unified
 132              		.thumb
 133              		.thumb_func
 134              		.fpu softvfp
 136              	USB_DevInit:
 137              	.LFB68:
1543:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1544:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1545:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevInit : Initializes the USB controller registers 
1546:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         for device mode
1547:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1548:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_CfgTypeDef structure that contains
1549:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1550:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1551:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1552:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DevInit (USB_TypeDef *USBx, USB_CfgTypeDef cfg)
1553:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {    
 138              		.loc 1 1553 0
 139              		.cfi_startproc
 140              		@ args = 36, pretend = 16, frame = 0
 141              		@ frame_needed = 0, uses_anonymous_args = 0
 142              	.LVL8:
 143 0000 84B0     		sub	sp, sp, #16
 144              	.LCFI2:
 145              		.cfi_def_cfa_offset 16
 146 0002 10B5     		push	{r4, lr}
 147              	.LCFI3:
 148              		.cfi_def_cfa_offset 24
 149              		.cfi_offset 4, -24
 150              		.cfi_offset 14, -20
 151              		.loc 1 1553 0
 152 0004 03AC     		add	r4, sp, #12
 153 0006 84E80E00 		stm	r4, {r1, r2, r3}
1554:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Init Device */
1555:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*CNTR_FRES = 1*/
1556:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = USB_CNTR_FRES;
1557:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1558:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*CNTR_FRES = 0*/
1559:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = 0;
1560:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
1561:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Clear pending interrupts*/
1562:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->ISTR = 0;
1563:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1564:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Set Btable Address*/
1565:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->BTABLE = BTABLE_ADDRESS;
1566:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
ARM GAS  /tmp/cc8jUnOu.s 			page 31


1567:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1568:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 154              		.loc 1 1568 0
 155 000a BDE81040 		pop	{r4, lr}
 156              	.LCFI4:
 157              		.cfi_restore 14
 158              		.cfi_restore 4
 159              		.cfi_def_cfa_offset 16
1556:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 160              		.loc 1 1556 0
 161 000e 0123     		movs	r3, #1
 162 0010 A0F84030 		strh	r3, [r0, #64]	@ movhi
1559:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
 163              		.loc 1 1559 0
 164 0014 0023     		movs	r3, #0
 165              		.loc 1 1568 0
 166 0016 04B0     		add	sp, sp, #16
 167              	.LCFI5:
 168              		.cfi_def_cfa_offset 0
1559:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
 169              		.loc 1 1559 0
 170 0018 A0F84030 		strh	r3, [r0, #64]	@ movhi
1562:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 171              		.loc 1 1562 0
 172 001c A0F84430 		strh	r3, [r0, #68]	@ movhi
1565:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 173              		.loc 1 1565 0
 174 0020 A0F85030 		strh	r3, [r0, #80]	@ movhi
 175              		.loc 1 1568 0
 176 0024 1846     		mov	r0, r3
 177              	.LVL9:
 178 0026 7047     		bx	lr
 179              		.cfi_endproc
 180              	.LFE68:
 182              		.section	.text.USB_FlushTxFifo,"ax",%progbits
 183              		.align	1
 184              		.global	USB_FlushTxFifo
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 188              		.fpu softvfp
 190              	USB_FlushTxFifo:
 191              	.LFB69:
1569:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1570:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1571:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_FlushTxFifo : Flush a Tx FIFO
1572:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1573:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  num : FIFO number
1574:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1575:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             15 means Flush all Tx FIFOs
1576:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1577:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1578:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushTxFifo (USB_TypeDef *USBx, uint32_t num )
1579:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 192              		.loc 1 1579 0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cc8jUnOu.s 			page 32


 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		@ link register save eliminated.
 197              	.LVL10:
1580:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1581:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1582:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1583:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1584:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1585:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 198              		.loc 1 1585 0
 199 0000 0020     		movs	r0, #0
 200              	.LVL11:
 201 0002 7047     		bx	lr
 202              		.cfi_endproc
 203              	.LFE69:
 205              		.section	.text.USB_FlushRxFifo,"ax",%progbits
 206              		.align	1
 207              		.global	USB_FlushRxFifo
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 211              		.fpu softvfp
 213              	USB_FlushRxFifo:
 214              	.LFB98:
 215              		.cfi_startproc
 216              		@ args = 0, pretend = 0, frame = 0
 217              		@ frame_needed = 0, uses_anonymous_args = 0
 218              		@ link register save eliminated.
 219 0000 0020     		movs	r0, #0
 220 0002 7047     		bx	lr
 221              		.cfi_endproc
 222              	.LFE98:
 224              		.section	.text.USB_ActivateEndpoint,"ax",%progbits
 225              		.align	1
 226              		.global	USB_ActivateEndpoint
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
 230              		.fpu softvfp
 232              	USB_ActivateEndpoint:
 233              	.LFB71:
1586:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1587:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1588:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_FlushRxFifo : Flush Rx FIFO
1589:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1590:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1591:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1592:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushRxFifo(USB_TypeDef *USBx)
1593:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1594:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1595:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1596:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1597:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1598:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1599:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1600:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1601:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
ARM GAS  /tmp/cc8jUnOu.s 			page 33


1602:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Activate and configure an endpoint
1603:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1604:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1605:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1606:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1607:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateEndpoint(USB_TypeDef *USBx, USB_EPTypeDef *ep)
1608:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 234              		.loc 1 1608 0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238              	.LVL12:
 239              		.loc 1 1608 0
 240 0000 70B5     		push	{r4, r5, r6, lr}
 241              	.LCFI6:
 242              		.cfi_def_cfa_offset 16
 243              		.cfi_offset 4, -16
 244              		.cfi_offset 5, -12
 245              		.cfi_offset 6, -8
 246              		.cfi_offset 14, -4
1609:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* initialize Endpoint */
1610:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   switch (ep->type)
 247              		.loc 1 1610 0
 248 0002 CB78     		ldrb	r3, [r1, #3]	@ zero_extendqisi2
 249 0004 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 250 0006 032B     		cmp	r3, #3
 251 0008 0FD8     		bhi	.L9
 252 000a DFE803F0 		tbb	[pc, r3]
 253              	.L11:
 254 000e 02       		.byte	(.L10-.L11)/2
 255 000f 64       		.byte	(.L12-.L11)/2
 256 0010 50       		.byte	(.L13-.L11)/2
 257 0011 59       		.byte	(.L14-.L11)/2
 258              		.p2align 1
 259              	.L10:
1611:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1612:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_CTRL:
1613:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_CONTROL);
 260              		.loc 1 1613 0
 261 0012 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 262 0016 23F4EC43 		bic	r3, r3, #30208
 263 001a 23F07003 		bic	r3, r3, #112
 264 001e 1B04     		lsls	r3, r3, #16
 265 0020 1B0C     		lsrs	r3, r3, #16
 266 0022 43F40073 		orr	r3, r3, #512
 267              	.L50:
1614:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1615:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_BULK:
1616:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_BULK);
1617:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1618:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_INTR:
1619:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_INTERRUPT);
1620:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1621:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_ISOC:
1622:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_ISOCHRONOUS);
 268              		.loc 1 1622 0
 269 0026 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
ARM GAS  /tmp/cc8jUnOu.s 			page 34


 270              	.L9:
1623:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1624:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   default:
1625:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
1626:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   } 
1627:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1628:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   PCD_SET_EP_ADDRESS(USBx, ep->num, ep->num);
 271              		.loc 1 1628 0
 272 002a 40F60F73 		movw	r3, #3855
 273 002e 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 274 0030 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 275 0034 44F40045 		orr	r5, r4, #32768
 276 0038 45F08005 		orr	r5, r5, #128
 277 003c 1A40     		ands	r2, r2, r3
 278 003e 2A43     		orrs	r2, r2, r5
 279 0040 20F82420 		strh	r2, [r0, r4, lsl #2]	@ movhi
1629:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1630:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->doublebuffer == 0) 
 280              		.loc 1 1630 0
 281 0044 8A7A     		ldrb	r2, [r1, #10]	@ zero_extendqisi2
 282 0046 0D78     		ldrb	r5, [r1]	@ zero_extendqisi2
 283 0048 002A     		cmp	r2, #0
 284 004a 40F09880 		bne	.L15
1631:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1632:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in)
 285              		.loc 1 1632 0
 286 004e 4C78     		ldrb	r4, [r1, #1]	@ zero_extendqisi2
 287 0050 8A88     		ldrh	r2, [r1, #4]
 288 0052 002C     		cmp	r4, #0
 289 0054 4AD0     		beq	.L16
1633:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1634:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Transmit buffer address */
1635:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_ADDRESS(USBx, ep->num, ep->pmaadress);
 290              		.loc 1 1635 0
 291 0056 B0F85040 		ldrh	r4, [r0, #80]
 292 005a 5208     		lsrs	r2, r2, #1
 293 005c A4B2     		uxth	r4, r4
 294 005e 04EBC504 		add	r4, r4, r5, lsl #3
 295 0062 00EB4404 		add	r4, r0, r4, lsl #1
 296 0066 5200     		lsls	r2, r2, #1
 297 0068 C4F80024 		str	r2, [r4, #1024]
1636:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 298              		.loc 1 1636 0
 299 006c 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 300 006e 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 301 0072 5206     		lsls	r2, r2, #25
 302 0074 08D5     		bpl	.L17
 303              		.loc 1 1636 0 is_stmt 0 discriminator 1
 304 0076 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 305 007a 1340     		ands	r3, r3, r2
 306 007c 43F40043 		orr	r3, r3, #32768
 307 0080 43F0C003 		orr	r3, r3, #192
 308 0084 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 309              	.L17:
 310              	.LBB2:
1637:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure NAK status for the Endpoint*/
1638:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_NAK); 
ARM GAS  /tmp/cc8jUnOu.s 			page 35


 311              		.loc 1 1638 0 is_stmt 1
 312 0088 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 313 008a 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 314 008e 23F4E043 		bic	r3, r3, #28672
 315 0092 23F04003 		bic	r3, r3, #64
 316 0096 1B04     		lsls	r3, r3, #16
 317 0098 1B0C     		lsrs	r3, r3, #16
 318              	.LVL13:
 319 009a 83F02003 		eor	r3, r3, #32
 320              	.LVL14:
 321              	.L52:
 322              	.LBE2:
 323              	.LBB3:
1639:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1640:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1641:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1642:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Receive buffer address */
1643:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_ADDRESS(USBx, ep->num, ep->pmaadress);
1644:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Receive buffer counter*/
1645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_CNT(USBx, ep->num, ep->maxpacket);
1646:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
1647:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure VALID status for the Endpoint*/
1648:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 324              		.loc 1 1648 0
 325 009e 43F40043 		orr	r3, r3, #32768
 326 00a2 43F08003 		orr	r3, r3, #128
 327 00a6 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 328              	.LVL15:
 329              	.L18:
 330              	.LBE3:
1649:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1650:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1651:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Double Buffer*/
1652:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1653:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1654:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Set the endpoint as double buffered*/
1655:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_DBUF(USBx, ep->num);
1656:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Set buffer address for double buffered mode*/
1657:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_DBUF_ADDR(USBx, ep->num,ep->pmaaddr0, ep->pmaaddr1);
1658:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1659:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in==0)
1660:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1661:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1662:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
1663:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
1664:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1665:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Reset value of the data toggle bits for the endpoint out*/
1666:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_TX_DTOG(USBx, ep->num);
1667:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1668:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
1669:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
1670:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1671:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1672:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1673:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1674:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
1675:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
ARM GAS  /tmp/cc8jUnOu.s 			page 36


1676:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
1677:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1678:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
1679:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
1680:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1681:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1682:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1683:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1684:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 331              		.loc 1 1684 0
 332 00aa 0020     		movs	r0, #0
 333              	.LVL16:
 334 00ac 70BD     		pop	{r4, r5, r6, pc}
 335              	.LVL17:
 336              	.L13:
1616:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 337              		.loc 1 1616 0
 338 00ae 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 339 00b2 23F4EC43 		bic	r3, r3, #30208
 340 00b6 23F07003 		bic	r3, r3, #112
 341 00ba 1B04     		lsls	r3, r3, #16
 342 00bc 1B0C     		lsrs	r3, r3, #16
 343 00be B2E7     		b	.L50
 344              	.L14:
1619:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 345              		.loc 1 1619 0
 346 00c0 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 347 00c4 23F4EC43 		bic	r3, r3, #30208
 348 00c8 23F07003 		bic	r3, r3, #112
 349 00cc 1B04     		lsls	r3, r3, #16
 350 00ce 1B0C     		lsrs	r3, r3, #16
 351 00d0 43F4C063 		orr	r3, r3, #1536
 352 00d4 A7E7     		b	.L50
 353              	.L12:
1622:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 354              		.loc 1 1622 0
 355 00d6 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 356 00da 23F4EC43 		bic	r3, r3, #30208
 357 00de 23F07003 		bic	r3, r3, #112
 358 00e2 1B04     		lsls	r3, r3, #16
 359 00e4 1B0C     		lsrs	r3, r3, #16
 360 00e6 43F48063 		orr	r3, r3, #1024
 361 00ea 9CE7     		b	.L50
 362              	.L16:
1643:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Receive buffer counter*/
 363              		.loc 1 1643 0
 364 00ec B0F85030 		ldrh	r3, [r0, #80]
 365 00f0 5208     		lsrs	r2, r2, #1
 366 00f2 9BB2     		uxth	r3, r3
 367 00f4 03EBC503 		add	r3, r3, r5, lsl #3
 368 00f8 0433     		adds	r3, r3, #4
 369 00fa 5200     		lsls	r2, r2, #1
 370 00fc 00F58064 		add	r4, r0, #1024
 371 0100 44F81320 		str	r2, [r4, r3, lsl #1]
 372              	.LBB4:
1645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 373              		.loc 1 1645 0
ARM GAS  /tmp/cc8jUnOu.s 			page 37


 374 0104 B0F85020 		ldrh	r2, [r0, #80]
 375 0108 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 376              	.LBB5:
 377 010a 0D69     		ldr	r5, [r1, #16]
 378              	.LBE5:
 379 010c 92B2     		uxth	r2, r2
 380 010e 02EBC302 		add	r2, r2, r3, lsl #3
 381              	.LBB6:
 382 0112 3E2D     		cmp	r5, #62
 383              	.LBE6:
 384 0114 02F10602 		add	r2, r2, #6
 385              	.LVL18:
 386              	.LBB7:
 387 0118 29D9     		bls	.L19
1645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 388              		.loc 1 1645 0 is_stmt 0 discriminator 1
 389 011a C5F34F16 		ubfx	r6, r5, #5, #16
 390              	.LVL19:
 391 011e EB06     		lsls	r3, r5, #27
 392 0120 04BF     		itt	eq
 393 0122 06F1FF33 		addeq	r3, r6, #-1
 394 0126 9EB2     		uxtheq	r6, r3
 395              	.LVL20:
 396 0128 6E4B     		ldr	r3, .L54
 397 012a 43EA8623 		orr	r3, r3, r6, lsl #10
 398              	.LVL21:
 399              	.L51:
1645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 400              		.loc 1 1645 0 discriminator 8
 401 012e 9BB2     		uxth	r3, r3
 402 0130 44F81230 		str	r3, [r4, r2, lsl #1]
 403              	.LBE7:
 404              	.LBE4:
1646:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure VALID status for the Endpoint*/
 405              		.loc 1 1646 0 is_stmt 1 discriminator 8
 406 0134 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 407              	.LVL22:
 408 0136 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 409 013a 5E04     		lsls	r6, r3, #17
 410 013c 0BD5     		bpl	.L23
1646:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure VALID status for the Endpoint*/
 411              		.loc 1 1646 0 is_stmt 0 discriminator 1
 412 013e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 413 0142 23F0F003 		bic	r3, r3, #240
 414 0146 1B05     		lsls	r3, r3, #20
 415 0148 1B0D     		lsrs	r3, r3, #20
 416 014a 43F44043 		orr	r3, r3, #49152
 417 014e 43F08003 		orr	r3, r3, #128
 418 0152 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 419              	.L23:
 420              	.LBB9:
1648:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 421              		.loc 1 1648 0 is_stmt 1
 422 0156 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 423 0158 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 424 015c 23F48043 		bic	r3, r3, #16384
 425 0160 23F07003 		bic	r3, r3, #112
ARM GAS  /tmp/cc8jUnOu.s 			page 38


 426 0164 1B04     		lsls	r3, r3, #16
 427 0166 1B0C     		lsrs	r3, r3, #16
 428              	.LVL23:
 429 0168 83F44053 		eor	r3, r3, #12288
 430              	.LVL24:
 431 016c 97E7     		b	.L52
 432              	.LVL25:
 433              	.L19:
 434              	.LBE9:
 435              	.LBB10:
 436              	.LBB8:
1645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 437              		.loc 1 1645 0 discriminator 2
 438 016e C5F34F03 		ubfx	r3, r5, #1, #16
 439              	.LVL26:
 440 0172 ED07     		lsls	r5, r5, #31
 441 0174 44BF     		itt	mi
 442 0176 0133     		addmi	r3, r3, #1
 443              	.LVL27:
 444 0178 9BB2     		uxthmi	r3, r3
 445              	.LVL28:
 446 017a 9B02     		lsls	r3, r3, #10
 447              	.LVL29:
 448 017c D7E7     		b	.L51
 449              	.LVL30:
 450              	.L15:
 451              	.LBE8:
 452              	.LBE10:
1655:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Set buffer address for double buffered mode*/
 453              		.loc 1 1655 0
 454 017e 30F82520 		ldrh	r2, [r0, r5, lsl #2]
 455 0182 22F4F872 		bic	r2, r2, #496
 456 0186 1205     		lsls	r2, r2, #20
 457 0188 120D     		lsrs	r2, r2, #20
 458 018a 42F40142 		orr	r2, r2, #33024
 459 018e 42F08002 		orr	r2, r2, #128
 460 0192 20F82520 		strh	r2, [r0, r5, lsl #2]	@ movhi
1657:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 461              		.loc 1 1657 0
 462 0196 B0F85020 		ldrh	r2, [r0, #80]
 463 019a 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 464 019c 92B2     		uxth	r2, r2
 465 019e 02EBC402 		add	r2, r2, r4, lsl #3
 466 01a2 CC88     		ldrh	r4, [r1, #6]
 467 01a4 00F58065 		add	r5, r0, #1024
 468 01a8 6408     		lsrs	r4, r4, #1
 469 01aa 6400     		lsls	r4, r4, #1
 470 01ac 45F81240 		str	r4, [r5, r2, lsl #1]
 471 01b0 B0F85020 		ldrh	r2, [r0, #80]
 472 01b4 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 473 01b6 92B2     		uxth	r2, r2
 474 01b8 02EBC402 		add	r2, r2, r4, lsl #3
 475 01bc 0C89     		ldrh	r4, [r1, #8]
 476 01be 0432     		adds	r2, r2, #4
 477 01c0 6408     		lsrs	r4, r4, #1
 478 01c2 6400     		lsls	r4, r4, #1
 479 01c4 45F81240 		str	r4, [r5, r2, lsl #1]
ARM GAS  /tmp/cc8jUnOu.s 			page 39


1659:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 480              		.loc 1 1659 0
 481 01c8 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
 482 01ca 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 483 01cc 002A     		cmp	r2, #0
 484 01ce 47D1     		bne	.L24
1662:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 485              		.loc 1 1662 0
 486 01d0 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 487 01d4 5504     		lsls	r5, r2, #17
 488 01d6 08D5     		bpl	.L25
1662:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 489              		.loc 1 1662 0 is_stmt 0 discriminator 1
 490 01d8 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 491 01dc 1340     		ands	r3, r3, r2
 492 01de 43F44043 		orr	r3, r3, #49152
 493 01e2 43F08003 		orr	r3, r3, #128
 494 01e6 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 495              	.L25:
1663:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 496              		.loc 1 1663 0 is_stmt 1
 497 01ea 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 498 01ec 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 499 01f0 5C06     		lsls	r4, r3, #25
 500 01f2 0BD5     		bpl	.L26
1663:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 501              		.loc 1 1663 0 is_stmt 0 discriminator 1
 502 01f4 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 503 01f8 23F0F003 		bic	r3, r3, #240
 504 01fc 1B05     		lsls	r3, r3, #20
 505 01fe 1B0D     		lsrs	r3, r3, #20
 506 0200 43F40043 		orr	r3, r3, #32768
 507 0204 43F0C003 		orr	r3, r3, #192
 508 0208 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 509              	.L26:
1666:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 510              		.loc 1 1666 0 is_stmt 1
 511 020c 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 512 020e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 513 0212 23F0F003 		bic	r3, r3, #240
 514 0216 1B05     		lsls	r3, r3, #20
 515 0218 1B0D     		lsrs	r3, r3, #20
 516 021a 43F40043 		orr	r3, r3, #32768
 517 021e 43F0C003 		orr	r3, r3, #192
 518 0222 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 519              	.LBB11:
1668:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 520              		.loc 1 1668 0
 521 0226 48F28002 		movw	r2, #32896
 522 022a 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 523 022c 30F82430 		ldrh	r3, [r0, r4, lsl #2]
 524 0230 23F48043 		bic	r3, r3, #16384
 525 0234 23F07003 		bic	r3, r3, #112
 526 0238 1B04     		lsls	r3, r3, #16
 527 023a 1B0C     		lsrs	r3, r3, #16
 528              	.LVL31:
 529 023c 83F44053 		eor	r3, r3, #12288
ARM GAS  /tmp/cc8jUnOu.s 			page 40


 530              	.LVL32:
 531 0240 1343     		orrs	r3, r3, r2
 532              	.LVL33:
 533 0242 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 534              	.LBE11:
 535              	.LBB12:
1669:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 536              		.loc 1 1669 0
 537 0246 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 538              	.LVL34:
 539 0248 30F82130 		ldrh	r3, [r0, r1, lsl #2]
 540              	.LVL35:
 541 024c 23F4E043 		bic	r3, r3, #28672
 542              	.LVL36:
 543 0250 23F04003 		bic	r3, r3, #64
 544              	.L53:
 545              	.LBE12:
 546              	.LBB13:
1679:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 547              		.loc 1 1679 0
 548 0254 1B04     		lsls	r3, r3, #16
 549 0256 1B0C     		lsrs	r3, r3, #16
 550 0258 1343     		orrs	r3, r3, r2
 551 025a 20F82130 		strh	r3, [r0, r1, lsl #2]	@ movhi
 552 025e 24E7     		b	.L18
 553              	.LVL37:
 554              	.L24:
 555              	.LBE13:
1674:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 556              		.loc 1 1674 0
 557 0260 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 558 0264 5204     		lsls	r2, r2, #17
 559 0266 08D5     		bpl	.L27
1674:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 560              		.loc 1 1674 0 is_stmt 0 discriminator 1
 561 0268 30F82420 		ldrh	r2, [r0, r4, lsl #2]
 562 026c 1340     		ands	r3, r3, r2
 563 026e 43F44043 		orr	r3, r3, #49152
 564 0272 43F08003 		orr	r3, r3, #128
 565 0276 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 566              	.L27:
1675:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 567              		.loc 1 1675 0 is_stmt 1
 568 027a 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 569 027c 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 570 0280 5B06     		lsls	r3, r3, #25
 571 0282 0BD5     		bpl	.L28
1675:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 572              		.loc 1 1675 0 is_stmt 0 discriminator 1
 573 0284 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 574 0288 23F0F003 		bic	r3, r3, #240
 575 028c 1B05     		lsls	r3, r3, #20
 576 028e 1B0D     		lsrs	r3, r3, #20
 577 0290 43F40043 		orr	r3, r3, #32768
 578 0294 43F0C003 		orr	r3, r3, #192
 579 0298 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 580              	.L28:
ARM GAS  /tmp/cc8jUnOu.s 			page 41


1676:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
 581              		.loc 1 1676 0 is_stmt 1
 582 029c 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 583 029e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 584 02a2 23F0F003 		bic	r3, r3, #240
 585 02a6 1B05     		lsls	r3, r3, #20
 586 02a8 1B0D     		lsrs	r3, r3, #20
 587 02aa 43F44043 		orr	r3, r3, #49152
 588 02ae 43F08003 		orr	r3, r3, #128
 589 02b2 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 590              	.LBB14:
1678:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 591              		.loc 1 1678 0
 592 02b6 48F28002 		movw	r2, #32896
 593 02ba 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 594 02bc 30F82430 		ldrh	r3, [r0, r4, lsl #2]
 595              	.LVL38:
 596 02c0 23F4E043 		bic	r3, r3, #28672
 597              	.LVL39:
 598 02c4 23F04003 		bic	r3, r3, #64
 599 02c8 1B04     		lsls	r3, r3, #16
 600 02ca 1B0C     		lsrs	r3, r3, #16
 601 02cc 1343     		orrs	r3, r3, r2
 602 02ce 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 603              	.LBE14:
 604              	.LBB15:
1679:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 605              		.loc 1 1679 0
 606 02d2 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 607              	.LVL40:
 608 02d4 30F82130 		ldrh	r3, [r0, r1, lsl #2]
 609              	.LVL41:
 610 02d8 23F48043 		bic	r3, r3, #16384
 611              	.LVL42:
 612 02dc 23F07003 		bic	r3, r3, #112
 613 02e0 B8E7     		b	.L53
 614              	.L55:
 615 02e2 00BF     		.align	2
 616              	.L54:
 617 02e4 0080FFFF 		.word	-32768
 618              	.LBE15:
 619              		.cfi_endproc
 620              	.LFE71:
 622              		.section	.text.USB_DeactivateEndpoint,"ax",%progbits
 623              		.align	1
 624              		.global	USB_DeactivateEndpoint
 625              		.syntax unified
 626              		.thumb
 627              		.thumb_func
 628              		.fpu softvfp
 630              	USB_DeactivateEndpoint:
 631              	.LFB72:
1685:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1686:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1687:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  De-activate and de-initialize an endpoint
1688:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1689:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
ARM GAS  /tmp/cc8jUnOu.s 			page 42


1690:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1691:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1692:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateEndpoint(USB_TypeDef *USBx, USB_EPTypeDef *ep)
1693:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 632              		.loc 1 1693 0
 633              		.cfi_startproc
 634              		@ args = 0, pretend = 0, frame = 0
 635              		@ frame_needed = 0, uses_anonymous_args = 0
 636              	.LVL43:
 637 0000 10B5     		push	{r4, lr}
 638              	.LCFI7:
 639              		.cfi_def_cfa_offset 8
 640              		.cfi_offset 4, -8
 641              		.cfi_offset 14, -4
1694:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->doublebuffer == 0) 
 642              		.loc 1 1694 0
 643 0002 8C7A     		ldrb	r4, [r1, #10]	@ zero_extendqisi2
 644 0004 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
 645 0006 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 646 0008 CCBB     		cbnz	r4, .L57
1695:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1696:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in)
 647              		.loc 1 1696 0
 648 000a 02B3     		cbz	r2, .L58
1697:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1698:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 649              		.loc 1 1698 0
 650 000c 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 651 0010 5206     		lsls	r2, r2, #25
 652 0012 0BD5     		bpl	.L59
 653              		.loc 1 1698 0 is_stmt 0 discriminator 1
 654 0014 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 655 0018 22F0F002 		bic	r2, r2, #240
 656 001c 1205     		lsls	r2, r2, #20
 657 001e 120D     		lsrs	r2, r2, #20
 658 0020 42F40042 		orr	r2, r2, #32768
 659 0024 42F0C002 		orr	r2, r2, #192
 660 0028 20F82320 		strh	r2, [r0, r3, lsl #2]	@ movhi
 661              	.L59:
 662              	.LBB16:
1699:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1700:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS); 
 663              		.loc 1 1700 0 is_stmt 1
 664 002c 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 665 002e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 666              	.LVL44:
 667 0032 23F4E043 		bic	r3, r3, #28672
 668              	.LVL45:
 669 0036 23F04003 		bic	r3, r3, #64
 670              	.L85:
 671              	.LBE16:
 672              	.LBB17:
1701:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1702:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1703:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1704:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
1705:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
ARM GAS  /tmp/cc8jUnOu.s 			page 43


1706:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 673              		.loc 1 1706 0
 674 003a 1B04     		lsls	r3, r3, #16
 675 003c 1B0C     		lsrs	r3, r3, #16
 676 003e 43F40043 		orr	r3, r3, #32768
 677 0042 43F08003 		orr	r3, r3, #128
 678 0046 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 679              	.LVL46:
 680              	.L60:
 681              	.LBE17:
1707:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1708:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1709:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Double Buffer*/
1710:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1711:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   { 
1712:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in==0)
1713:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1714:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1715:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
1716:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
1717:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1718:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Reset value of the data toggle bits for the endpoint out*/
1719:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_TX_DTOG(USBx, ep->num);
1720:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1721:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
1722:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
1723:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1724:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1725:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1726:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1727:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
1728:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
1729:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
1730:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1731:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
1732:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
1733:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1734:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1735:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1736:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1737:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 682              		.loc 1 1737 0
 683 004a 0020     		movs	r0, #0
 684              	.LVL47:
 685 004c 10BD     		pop	{r4, pc}
 686              	.LVL48:
 687              	.L58:
1704:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
 688              		.loc 1 1704 0
 689 004e 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 690 0052 5404     		lsls	r4, r2, #17
 691 0054 0BD5     		bpl	.L61
1704:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
 692              		.loc 1 1704 0 is_stmt 0 discriminator 1
 693 0056 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 694 005a 22F0F002 		bic	r2, r2, #240
 695 005e 1205     		lsls	r2, r2, #20
ARM GAS  /tmp/cc8jUnOu.s 			page 44


 696 0060 120D     		lsrs	r2, r2, #20
 697 0062 42F44042 		orr	r2, r2, #49152
 698 0066 42F08002 		orr	r2, r2, #128
 699 006a 20F82320 		strh	r2, [r0, r3, lsl #2]	@ movhi
 700              	.L61:
 701              	.LBB18:
1706:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 702              		.loc 1 1706 0 is_stmt 1
 703 006e 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 704 0070 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 705              	.LVL49:
 706 0074 23F48043 		bic	r3, r3, #16384
 707              	.LVL50:
 708 0078 23F07003 		bic	r3, r3, #112
 709 007c DDE7     		b	.L85
 710              	.L57:
 711              	.LBE18:
1712:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 712              		.loc 1 1712 0
 713 007e 002A     		cmp	r2, #0
 714 0080 48D1     		bne	.L62
1715:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 715              		.loc 1 1715 0
 716 0082 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 717 0086 5204     		lsls	r2, r2, #17
 718 0088 0BD5     		bpl	.L63
1715:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 719              		.loc 1 1715 0 is_stmt 0 discriminator 1
 720 008a 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 721 008e 22F0F002 		bic	r2, r2, #240
 722 0092 1205     		lsls	r2, r2, #20
 723 0094 120D     		lsrs	r2, r2, #20
 724 0096 42F44042 		orr	r2, r2, #49152
 725 009a 42F08002 		orr	r2, r2, #128
 726 009e 20F82320 		strh	r2, [r0, r3, lsl #2]	@ movhi
 727              	.L63:
1716:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 728              		.loc 1 1716 0 is_stmt 1
 729 00a2 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 730 00a4 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 731 00a8 5C06     		lsls	r4, r3, #25
 732 00aa 0BD5     		bpl	.L64
1716:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 733              		.loc 1 1716 0 is_stmt 0 discriminator 1
 734 00ac 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 735 00b0 23F0F003 		bic	r3, r3, #240
 736 00b4 1B05     		lsls	r3, r3, #20
 737 00b6 1B0D     		lsrs	r3, r3, #20
 738 00b8 43F40043 		orr	r3, r3, #32768
 739 00bc 43F0C003 		orr	r3, r3, #192
 740 00c0 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 741              	.L64:
1719:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 742              		.loc 1 1719 0 is_stmt 1
 743 00c4 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 744 00c6 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 745 00ca 23F0F003 		bic	r3, r3, #240
ARM GAS  /tmp/cc8jUnOu.s 			page 45


 746 00ce 1B05     		lsls	r3, r3, #20
 747 00d0 1B0D     		lsrs	r3, r3, #20
 748 00d2 43F40043 		orr	r3, r3, #32768
 749 00d6 43F0C003 		orr	r3, r3, #192
 750 00da 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 751              	.LBB19:
1721:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 752              		.loc 1 1721 0
 753 00de 48F28002 		movw	r2, #32896
 754 00e2 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 755 00e4 30F82430 		ldrh	r3, [r0, r4, lsl #2]
 756              	.LVL51:
 757 00e8 23F48043 		bic	r3, r3, #16384
 758              	.LVL52:
 759 00ec 23F07003 		bic	r3, r3, #112
 760 00f0 1B04     		lsls	r3, r3, #16
 761 00f2 1B0C     		lsrs	r3, r3, #16
 762 00f4 1343     		orrs	r3, r3, r2
 763 00f6 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 764              	.LBE19:
 765              	.LBB20:
1722:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 766              		.loc 1 1722 0
 767 00fa 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 768              	.LVL53:
 769 00fc 30F82130 		ldrh	r3, [r0, r1, lsl #2]
 770              	.LVL54:
 771 0100 23F4E043 		bic	r3, r3, #28672
 772              	.LVL55:
 773 0104 23F04003 		bic	r3, r3, #64
 774              	.L86:
 775              	.LBE20:
 776              	.LBB21:
1732:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 777              		.loc 1 1732 0
 778 0108 1B04     		lsls	r3, r3, #16
 779 010a 1B0C     		lsrs	r3, r3, #16
 780 010c 1343     		orrs	r3, r3, r2
 781 010e 20F82130 		strh	r3, [r0, r1, lsl #2]	@ movhi
 782 0112 9AE7     		b	.L60
 783              	.LVL56:
 784              	.L62:
 785              	.LBE21:
1727:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 786              		.loc 1 1727 0
 787 0114 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 788 0118 5204     		lsls	r2, r2, #17
 789 011a 0BD5     		bpl	.L65
1727:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 790              		.loc 1 1727 0 is_stmt 0 discriminator 1
 791 011c 30F82320 		ldrh	r2, [r0, r3, lsl #2]
 792 0120 22F0F002 		bic	r2, r2, #240
 793 0124 1205     		lsls	r2, r2, #20
 794 0126 120D     		lsrs	r2, r2, #20
 795 0128 42F44042 		orr	r2, r2, #49152
 796 012c 42F08002 		orr	r2, r2, #128
 797 0130 20F82320 		strh	r2, [r0, r3, lsl #2]	@ movhi
ARM GAS  /tmp/cc8jUnOu.s 			page 46


 798              	.L65:
1728:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 799              		.loc 1 1728 0 is_stmt 1
 800 0134 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 801 0136 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 802 013a 5B06     		lsls	r3, r3, #25
 803 013c 0BD5     		bpl	.L66
1728:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 804              		.loc 1 1728 0 is_stmt 0 discriminator 1
 805 013e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 806 0142 23F0F003 		bic	r3, r3, #240
 807 0146 1B05     		lsls	r3, r3, #20
 808 0148 1B0D     		lsrs	r3, r3, #20
 809 014a 43F40043 		orr	r3, r3, #32768
 810 014e 43F0C003 		orr	r3, r3, #192
 811 0152 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 812              	.L66:
1729:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
 813              		.loc 1 1729 0 is_stmt 1
 814 0156 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 815 0158 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 816 015c 23F0F003 		bic	r3, r3, #240
 817 0160 1B05     		lsls	r3, r3, #20
 818 0162 1B0D     		lsrs	r3, r3, #20
 819 0164 43F44043 		orr	r3, r3, #49152
 820 0168 43F08003 		orr	r3, r3, #128
 821 016c 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 822              	.LBB22:
1731:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 823              		.loc 1 1731 0
 824 0170 48F28002 		movw	r2, #32896
 825 0174 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 826 0176 30F82430 		ldrh	r3, [r0, r4, lsl #2]
 827              	.LVL57:
 828 017a 23F4E043 		bic	r3, r3, #28672
 829              	.LVL58:
 830 017e 23F04003 		bic	r3, r3, #64
 831 0182 1B04     		lsls	r3, r3, #16
 832 0184 1B0C     		lsrs	r3, r3, #16
 833 0186 1343     		orrs	r3, r3, r2
 834 0188 20F82430 		strh	r3, [r0, r4, lsl #2]	@ movhi
 835              	.LBE22:
 836              	.LBB23:
1732:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 837              		.loc 1 1732 0
 838 018c 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 839              	.LVL59:
 840 018e 30F82130 		ldrh	r3, [r0, r1, lsl #2]
 841              	.LVL60:
 842 0192 23F48043 		bic	r3, r3, #16384
 843              	.LVL61:
 844 0196 23F07003 		bic	r3, r3, #112
 845 019a B5E7     		b	.L86
 846              	.LBE23:
 847              		.cfi_endproc
 848              	.LFE72:
 850              		.section	.text.USB_WritePacket,"ax",%progbits
ARM GAS  /tmp/cc8jUnOu.s 			page 47


 851              		.align	1
 852              		.global	USB_WritePacket
 853              		.syntax unified
 854              		.thumb
 855              		.thumb_func
 856              		.fpu softvfp
 858              	USB_WritePacket:
 859              	.LFB74:
1738:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1739:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1740:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPStartXfer : setup and starts a transfer over an EP
1741:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1742:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1743:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1744:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1745:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPStartXfer(USB_TypeDef *USBx , USB_EPTypeDef *ep)
1746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1747:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pmabuffer = 0;
1748:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t len = ep->xfer_len;
1749:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1750:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* IN endpoint */
1751:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
1752:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1753:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Multi packet transfer*/
1754:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > ep->maxpacket)
1755:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1756:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->maxpacket;
1757:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len-=len; 
1758:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1759:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1760:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {  
1761:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->xfer_len;
1762:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len =0;
1763:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1764:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1765:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* configure and validate Tx endpoint */
1766:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->doublebuffer == 0) 
1767:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1768:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USB_WritePMA(USBx, ep->xfer_buff, ep->pmaadress, len);
1769:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_CNT(USBx, ep->num, len);
1770:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1771:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1772:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1773:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Write the data to the USB endpoint */
1774:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (PCD_GET_ENDPOINT(USBx, ep->num)& USB_EP_DTOG_TX)
1775:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1776:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* Set the Double buffer counter for pmabuffer1 */
1777:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         PCD_SET_EP_DBUF1_CNT(USBx, ep->num, ep->is_in, len);
1778:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         pmabuffer = ep->pmaaddr1;
1779:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1780:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       else
1781:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1782:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* Set the Double buffer counter for pmabuffer0 */
1783:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         PCD_SET_EP_DBUF0_CNT(USBx, ep->num, ep->is_in, len);
1784:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         pmabuffer = ep->pmaaddr0;
1785:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USB_WritePMA(USBx, ep->xfer_buff, pmabuffer, len);
ARM GAS  /tmp/cc8jUnOu.s 			page 48


1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_FreeUserBuffer(USBx, ep->num, ep->is_in);
1788:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1789:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1790:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_VALID);
1791:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1792:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else /* OUT endpoint */
1793:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1794:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Multi packet transfer*/
1795:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > ep->maxpacket)
1796:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1797:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->maxpacket;
1798:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len-=len; 
1799:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1800:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1801:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1802:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->xfer_len;
1803:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len =0;
1804:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1805:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1806:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* configure and validate Rx endpoint */
1807:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->doublebuffer == 0) 
1808:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1809:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set RX buffer count*/
1810:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_CNT(USBx, ep->num, len);
1811:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1812:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1813:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1814:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the Double buffer counter*/
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_DBUF_CNT(USBx, ep->num, ep->is_in, len);
1816:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1817:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1818:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
1819:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1820:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1821:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1822:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1823:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1824:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1825:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_WritePacket : Writes a packet into the Tx FIFO associated 
1826:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
1827:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1828:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  src :  pointer to source buffer
1829:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ch_ep_num : endpoint or host channel number
1830:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to write
1831:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1832:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1833:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_WritePacket(USB_TypeDef *USBx, uint8_t *src, uint8_t ch_ep_num, uint16_t len)
1834:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 860              		.loc 1 1834 0
 861              		.cfi_startproc
 862              		@ args = 0, pretend = 0, frame = 0
 863              		@ frame_needed = 0, uses_anonymous_args = 0
 864              		@ link register save eliminated.
 865              	.LVL62:
1835:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1836:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1837:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
ARM GAS  /tmp/cc8jUnOu.s 			page 49


1838:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1839:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1840:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 866              		.loc 1 1840 0
 867 0000 0020     		movs	r0, #0
 868              	.LVL63:
 869 0002 7047     		bx	lr
 870              		.cfi_endproc
 871              	.LFE74:
 873              		.section	.text.USB_ReadPacket,"ax",%progbits
 874              		.align	1
 875              		.global	USB_ReadPacket
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 879              		.fpu softvfp
 881              	USB_ReadPacket:
 882              	.LFB75:
1841:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1842:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1843:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadPacket : read a packet from the Tx FIFO associated 
1844:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
1845:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1846:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  dest : destination pointer
1847:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to read
1848:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval pointer to destination buffer
1849:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1850:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void *USB_ReadPacket(USB_TypeDef *USBx, uint8_t *dest, uint16_t len)
1851:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 883              		.loc 1 1851 0
 884              		.cfi_startproc
 885              		@ args = 0, pretend = 0, frame = 0
 886              		@ frame_needed = 0, uses_anonymous_args = 0
 887              		@ link register save eliminated.
 888              	.LVL64:
1852:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1853:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1854:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1855:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1856:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((void *)NULL);
1857:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 889              		.loc 1 1857 0
 890 0000 0020     		movs	r0, #0
 891              	.LVL65:
 892 0002 7047     		bx	lr
 893              		.cfi_endproc
 894              	.LFE75:
 896              		.section	.text.USB_EPSetStall,"ax",%progbits
 897              		.align	1
 898              		.global	USB_EPSetStall
 899              		.syntax unified
 900              		.thumb
 901              		.thumb_func
 902              		.fpu softvfp
 904              	USB_EPSetStall:
 905              	.LFB76:
1858:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
ARM GAS  /tmp/cc8jUnOu.s 			page 50


1859:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1860:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPSetStall : set a stall condition over an EP
1861:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1862:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure   
1863:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1864:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1865:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPSetStall(USB_TypeDef *USBx , USB_EPTypeDef *ep)
1866:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 906              		.loc 1 1866 0
 907              		.cfi_startproc
 908              		@ args = 0, pretend = 0, frame = 0
 909              		@ frame_needed = 0, uses_anonymous_args = 0
 910              		@ link register save eliminated.
 911              	.LVL66:
1867:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->num == 0)
 912              		.loc 1 1867 0
 913 0000 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 914 0002 8AB9     		cbnz	r2, .L90
 915              	.LBB24:
1868:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1869:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* This macro sets STALL status for RX & TX*/ 
1870:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_TXRX_STATUS(USBx, ep->num, USB_EP_RX_STALL, USB_EP_TX_STALL); 
 916              		.loc 1 1870 0
 917 0004 0388     		ldrh	r3, [r0]
 918              	.LVL67:
 919 0006 23F48043 		bic	r3, r3, #16384
 920              	.LVL68:
 921 000a 23F04003 		bic	r3, r3, #64
 922 000e 1B04     		lsls	r3, r3, #16
 923 0010 1B0C     		lsrs	r3, r3, #16
 924 0012 83F48053 		eor	r3, r3, #4096
 925 0016 83F01003 		eor	r3, r3, #16
 926 001a 43F40043 		orr	r3, r3, #32768
 927 001e 43F08003 		orr	r3, r3, #128
 928 0022 0380     		strh	r3, [r0]	@ movhi
 929              	.L91:
 930              	.LBE24:
1871:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1872:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1873:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1874:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in)
1875:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1876:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num , USB_EP_TX_STALL); 
1877:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1878:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1879:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1880:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num , USB_EP_RX_STALL);
1881:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1882:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1883:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1884:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 931              		.loc 1 1884 0
 932 0024 0020     		movs	r0, #0
 933              	.LVL69:
 934 0026 7047     		bx	lr
 935              	.LVL70:
 936              	.L90:
ARM GAS  /tmp/cc8jUnOu.s 			page 51


1874:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 937              		.loc 1 1874 0
 938 0028 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 939 002a 83B1     		cbz	r3, .L92
 940              	.LBB25:
1876:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 941              		.loc 1 1876 0
 942 002c 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 943 0030 23F4E043 		bic	r3, r3, #28672
 944 0034 23F04003 		bic	r3, r3, #64
 945 0038 1B04     		lsls	r3, r3, #16
 946 003a 1B0C     		lsrs	r3, r3, #16
 947              	.LVL71:
 948 003c 83F01003 		eor	r3, r3, #16
 949              	.LVL72:
 950              	.L93:
 951              	.LBE25:
 952              	.LBB26:
1880:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 953              		.loc 1 1880 0
 954 0040 43F40043 		orr	r3, r3, #32768
 955 0044 43F08003 		orr	r3, r3, #128
 956 0048 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 957 004c EAE7     		b	.L91
 958              	.L92:
 959 004e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 960 0052 23F48043 		bic	r3, r3, #16384
 961 0056 23F07003 		bic	r3, r3, #112
 962 005a 1B04     		lsls	r3, r3, #16
 963 005c 1B0C     		lsrs	r3, r3, #16
 964              	.LVL73:
 965 005e 83F48053 		eor	r3, r3, #4096
 966              	.LVL74:
 967 0062 EDE7     		b	.L93
 968              	.LBE26:
 969              		.cfi_endproc
 970              	.LFE76:
 972              		.section	.text.USB_EPClearStall,"ax",%progbits
 973              		.align	1
 974              		.global	USB_EPClearStall
 975              		.syntax unified
 976              		.thumb
 977              		.thumb_func
 978              		.fpu softvfp
 980              	USB_EPClearStall:
 981              	.LFB77:
1885:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1886:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1887:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPClearStall : Clear a stall condition over an EP
1888:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1889:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1890:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1891:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1892:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPClearStall(USB_TypeDef *USBx, USB_EPTypeDef *ep)
1893:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 982              		.loc 1 1893 0
 983              		.cfi_startproc
ARM GAS  /tmp/cc8jUnOu.s 			page 52


 984              		@ args = 0, pretend = 0, frame = 0
 985              		@ frame_needed = 0, uses_anonymous_args = 0
 986              		@ link register save eliminated.
 987              	.LVL75:
1894:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in)
 988              		.loc 1 1894 0
 989 0000 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 990 0002 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 991 0004 13B3     		cbz	r3, .L95
1895:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1896:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_CLEAR_TX_DTOG(USBx, ep->num);
 992              		.loc 1 1896 0
 993 0006 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 994 000a 5B06     		lsls	r3, r3, #25
 995 000c 0BD5     		bpl	.L96
 996              		.loc 1 1896 0 is_stmt 0 discriminator 1
 997 000e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 998 0012 23F0F003 		bic	r3, r3, #240
 999 0016 1B05     		lsls	r3, r3, #20
 1000 0018 1B0D     		lsrs	r3, r3, #20
 1001 001a 43F40043 		orr	r3, r3, #32768
 1002 001e 43F0C003 		orr	r3, r3, #192
 1003 0022 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 1004              	.L96:
 1005              	.LBB27:
1897:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_VALID);
 1006              		.loc 1 1897 0 is_stmt 1
 1007 0026 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1008 0028 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 1009 002c 23F4E043 		bic	r3, r3, #28672
 1010 0030 23F04003 		bic	r3, r3, #64
 1011 0034 1B04     		lsls	r3, r3, #16
 1012 0036 1B0C     		lsrs	r3, r3, #16
 1013              	.LVL76:
 1014 0038 83F03003 		eor	r3, r3, #48
 1015              	.LVL77:
 1016              	.L105:
 1017              	.LBE27:
 1018              	.LBB28:
1898:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1899:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1900:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1901:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_CLEAR_RX_DTOG(USBx, ep->num);
1902:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 1019              		.loc 1 1902 0
 1020 003c 43F40043 		orr	r3, r3, #32768
 1021 0040 43F08003 		orr	r3, r3, #128
 1022 0044 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 1023              	.LBE28:
1903:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1904:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1905:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1024              		.loc 1 1905 0
 1025 0048 0020     		movs	r0, #0
 1026              	.LVL78:
 1027 004a 7047     		bx	lr
 1028              	.LVL79:
ARM GAS  /tmp/cc8jUnOu.s 			page 53


 1029              	.L95:
1901:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 1030              		.loc 1 1901 0
 1031 004c 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 1032 0050 5B04     		lsls	r3, r3, #17
 1033 0052 0BD5     		bpl	.L98
1901:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 1034              		.loc 1 1901 0 is_stmt 0 discriminator 1
 1035 0054 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 1036 0058 23F0F003 		bic	r3, r3, #240
 1037 005c 1B05     		lsls	r3, r3, #20
 1038 005e 1B0D     		lsrs	r3, r3, #20
 1039 0060 43F44043 		orr	r3, r3, #49152
 1040 0064 43F08003 		orr	r3, r3, #128
 1041 0068 20F82230 		strh	r3, [r0, r2, lsl #2]	@ movhi
 1042              	.L98:
 1043              	.LBB29:
1902:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 1044              		.loc 1 1902 0 is_stmt 1
 1045 006c 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1046 006e 30F82230 		ldrh	r3, [r0, r2, lsl #2]
 1047 0072 23F48043 		bic	r3, r3, #16384
 1048 0076 23F07003 		bic	r3, r3, #112
 1049 007a 1B04     		lsls	r3, r3, #16
 1050 007c 1B0C     		lsrs	r3, r3, #16
 1051              	.LVL80:
 1052 007e 83F44053 		eor	r3, r3, #12288
 1053              	.LVL81:
 1054 0082 DBE7     		b	.L105
 1055              	.LBE29:
 1056              		.cfi_endproc
 1057              	.LFE77:
 1059              		.section	.text.USB_StopDevice,"ax",%progbits
 1060              		.align	1
 1061              		.global	USB_StopDevice
 1062              		.syntax unified
 1063              		.thumb
 1064              		.thumb_func
 1065              		.fpu softvfp
 1067              	USB_StopDevice:
 1068              	.LFB78:
1906:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1907:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1908:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_StopDevice : Stop the usb device mode
1909:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1910:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1911:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1912:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_StopDevice(USB_TypeDef *USBx)
1913:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1069              		.loc 1 1913 0
 1070              		.cfi_startproc
 1071              		@ args = 0, pretend = 0, frame = 0
 1072              		@ frame_needed = 0, uses_anonymous_args = 0
 1073              		@ link register save eliminated.
 1074              	.LVL82:
1914:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* disable all interrupts and force USB reset */
1915:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = USB_CNTR_FRES;
ARM GAS  /tmp/cc8jUnOu.s 			page 54


 1075              		.loc 1 1915 0
 1076 0000 0122     		movs	r2, #1
1913:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* disable all interrupts and force USB reset */
 1077              		.loc 1 1913 0
 1078 0002 0346     		mov	r3, r0
 1079              		.loc 1 1915 0
 1080 0004 A0F84020 		strh	r2, [r0, #64]	@ movhi
1916:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1917:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* clear interrupt status register */
1918:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->ISTR = 0;
 1081              		.loc 1 1918 0
 1082 0008 0020     		movs	r0, #0
 1083              	.LVL83:
1919:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1920:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* switch-off device */
1921:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = (USB_CNTR_FRES | USB_CNTR_PDWN);
 1084              		.loc 1 1921 0
 1085 000a 0322     		movs	r2, #3
1918:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 1086              		.loc 1 1918 0
 1087 000c A3F84400 		strh	r0, [r3, #68]	@ movhi
 1088              		.loc 1 1921 0
 1089 0010 A3F84020 		strh	r2, [r3, #64]	@ movhi
1922:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1923:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1924:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1090              		.loc 1 1924 0
 1091 0014 7047     		bx	lr
 1092              		.cfi_endproc
 1093              	.LFE78:
 1095              		.section	.text.USB_SetDevAddress,"ax",%progbits
 1096              		.align	1
 1097              		.global	USB_SetDevAddress
 1098              		.syntax unified
 1099              		.thumb
 1100              		.thumb_func
 1101              		.fpu softvfp
 1103              	USB_SetDevAddress:
 1104              	.LFB79:
1925:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1926:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1927:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetDevAddress : Stop the usb device mode
1928:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1929:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  address : new device address to be assigned
1930:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
1931:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1932:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1933:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_SetDevAddress (USB_TypeDef *USBx, uint8_t address)
1934:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1105              		.loc 1 1934 0
 1106              		.cfi_startproc
 1107              		@ args = 0, pretend = 0, frame = 0
 1108              		@ frame_needed = 0, uses_anonymous_args = 0
 1109              		@ link register save eliminated.
 1110              	.LVL84:
1935:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if(address == 0) 
 1111              		.loc 1 1935 0
ARM GAS  /tmp/cc8jUnOu.s 			page 55


 1112 0000 11B9     		cbnz	r1, .L108
1936:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1937:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    /* set device address and enable function */
1938:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    USBx->DADDR = USB_DADDR_EF;
 1113              		.loc 1 1938 0
 1114 0002 8023     		movs	r3, #128
 1115 0004 A0F84C30 		strh	r3, [r0, #76]	@ movhi
 1116              	.L108:
1939:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1940:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1941:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1942:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1117              		.loc 1 1942 0
 1118 0008 0020     		movs	r0, #0
 1119              	.LVL85:
 1120 000a 7047     		bx	lr
 1121              		.cfi_endproc
 1122              	.LFE79:
 1124              		.section	.text.USB_DevConnect,"ax",%progbits
 1125              		.align	1
 1126              		.global	USB_DevConnect
 1127              		.syntax unified
 1128              		.thumb
 1129              		.thumb_func
 1130              		.fpu softvfp
 1132              	USB_DevConnect:
 1133              	.LFB96:
 1134              		.cfi_startproc
 1135              		@ args = 0, pretend = 0, frame = 0
 1136              		@ frame_needed = 0, uses_anonymous_args = 0
 1137              		@ link register save eliminated.
 1138 0000 0020     		movs	r0, #0
 1139 0002 7047     		bx	lr
 1140              		.cfi_endproc
 1141              	.LFE96:
 1143              		.section	.text.USB_DevDisconnect,"ax",%progbits
 1144              		.align	1
 1145              		.global	USB_DevDisconnect
 1146              		.syntax unified
 1147              		.thumb
 1148              		.thumb_func
 1149              		.fpu softvfp
 1151              	USB_DevDisconnect:
 1152              	.LFB81:
1943:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1944:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1945:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevConnect : Connect the USB device by enabling the pull-up/pull-down
1946:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1947:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1948:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1949:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevConnect (USB_TypeDef *USBx)
1950:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1951:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1952:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1953:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1954:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1955:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
ARM GAS  /tmp/cc8jUnOu.s 			page 56


1956:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1957:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1958:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1959:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevDisconnect : Disconnect the USB device by disabling the pull-up/pull-down
1960:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1961:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1962:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1963:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevDisconnect (USB_TypeDef *USBx)
1964:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1153              		.loc 1 1964 0
 1154              		.cfi_startproc
 1155              		@ args = 0, pretend = 0, frame = 0
 1156              		@ frame_needed = 0, uses_anonymous_args = 0
 1157              		@ link register save eliminated.
 1158              	.LVL86:
1965:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1966:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1967:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1968:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1969:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1970:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1159              		.loc 1 1970 0
 1160 0000 0020     		movs	r0, #0
 1161              	.LVL87:
 1162 0002 7047     		bx	lr
 1163              		.cfi_endproc
 1164              	.LFE81:
 1166              		.section	.text.USB_ReadInterrupts,"ax",%progbits
 1167              		.align	1
 1168              		.global	USB_ReadInterrupts
 1169              		.syntax unified
 1170              		.thumb
 1171              		.thumb_func
 1172              		.fpu softvfp
 1174              	USB_ReadInterrupts:
 1175              	.LFB82:
1971:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1972:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1973:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadInterrupts: return the global USB interrupt status
1974:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1975:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1976:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1977:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t  USB_ReadInterrupts (USB_TypeDef *USBx)
1978:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1176              		.loc 1 1978 0
 1177              		.cfi_startproc
 1178              		@ args = 0, pretend = 0, frame = 0
 1179              		@ frame_needed = 0, uses_anonymous_args = 0
 1180              		@ link register save eliminated.
 1181              	.LVL88:
1979:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
1980:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1981:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx->ISTR;
 1182              		.loc 1 1981 0
 1183 0000 B0F84400 		ldrh	r0, [r0, #68]
 1184              	.LVL89:
1982:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
ARM GAS  /tmp/cc8jUnOu.s 			page 57


1983:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1185              		.loc 1 1983 0
 1186 0004 80B2     		uxth	r0, r0
 1187              	.LVL90:
 1188 0006 7047     		bx	lr
 1189              		.cfi_endproc
 1190              	.LFE82:
 1192              		.section	.text.USB_ReadDevAllOutEpInterrupt,"ax",%progbits
 1193              		.align	1
 1194              		.global	USB_ReadDevAllOutEpInterrupt
 1195              		.syntax unified
 1196              		.thumb
 1197              		.thumb_func
 1198              		.fpu softvfp
 1200              	USB_ReadDevAllOutEpInterrupt:
 1201              	.LFB94:
 1202              		.cfi_startproc
 1203              		@ args = 0, pretend = 0, frame = 0
 1204              		@ frame_needed = 0, uses_anonymous_args = 0
 1205              		@ link register save eliminated.
 1206 0000 0020     		movs	r0, #0
 1207 0002 7047     		bx	lr
 1208              		.cfi_endproc
 1209              	.LFE94:
 1211              		.section	.text.USB_ReadDevAllInEpInterrupt,"ax",%progbits
 1212              		.align	1
 1213              		.global	USB_ReadDevAllInEpInterrupt
 1214              		.syntax unified
 1215              		.thumb
 1216              		.thumb_func
 1217              		.fpu softvfp
 1219              	USB_ReadDevAllInEpInterrupt:
 1220              	.LFB84:
1984:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1985:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1986:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllOutEpInterrupt: return the USB device OUT endpoints interrupt status
1987:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1988:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1989:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1990:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllOutEpInterrupt (USB_TypeDef *USBx)
1991:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1992:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1993:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1994:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1995:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1996:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
1997:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1998:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1999:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2000:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllInEpInterrupt: return the USB device IN endpoints interrupt status
2001:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2002:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2003:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2004:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllInEpInterrupt (USB_TypeDef *USBx)
2005:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1221              		.loc 1 2005 0
 1222              		.cfi_startproc
ARM GAS  /tmp/cc8jUnOu.s 			page 58


 1223              		@ args = 0, pretend = 0, frame = 0
 1224              		@ frame_needed = 0, uses_anonymous_args = 0
 1225              		@ link register save eliminated.
 1226              	.LVL91:
2006:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2007:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2008:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2009:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2010:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
2011:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1227              		.loc 1 2011 0
 1228 0000 0020     		movs	r0, #0
 1229              	.LVL92:
 1230 0002 7047     		bx	lr
 1231              		.cfi_endproc
 1232              	.LFE84:
 1234              		.section	.text.USB_ReadDevOutEPInterrupt,"ax",%progbits
 1235              		.align	1
 1236              		.global	USB_ReadDevOutEPInterrupt
 1237              		.syntax unified
 1238              		.thumb
 1239              		.thumb_func
 1240              		.fpu softvfp
 1242              	USB_ReadDevOutEPInterrupt:
 1243              	.LFB100:
 1244              		.cfi_startproc
 1245              		@ args = 0, pretend = 0, frame = 0
 1246              		@ frame_needed = 0, uses_anonymous_args = 0
 1247              		@ link register save eliminated.
 1248 0000 0020     		movs	r0, #0
 1249 0002 7047     		bx	lr
 1250              		.cfi_endproc
 1251              	.LFE100:
 1253              		.section	.text.USB_ReadDevInEPInterrupt,"ax",%progbits
 1254              		.align	1
 1255              		.global	USB_ReadDevInEPInterrupt
 1256              		.syntax unified
 1257              		.thumb
 1258              		.thumb_func
 1259              		.fpu softvfp
 1261              	USB_ReadDevInEPInterrupt:
 1262              	.LFB86:
2012:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2013:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2014:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device OUT EP Interrupt register
2015:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2016:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
2017:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
2018:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device OUT EP Interrupt register
2019:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2020:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevOutEPInterrupt (USB_TypeDef *USBx , uint8_t epnum)
2021:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
2022:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2023:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2024:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2025:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2026:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
ARM GAS  /tmp/cc8jUnOu.s 			page 59


2027:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
2028:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2029:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2030:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device IN EP Interrupt register
2031:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2032:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
2033:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
2034:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device IN EP Interrupt register
2035:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2036:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevInEPInterrupt (USB_TypeDef *USBx , uint8_t epnum)
2037:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1263              		.loc 1 2037 0
 1264              		.cfi_startproc
 1265              		@ args = 0, pretend = 0, frame = 0
 1266              		@ frame_needed = 0, uses_anonymous_args = 0
 1267              		@ link register save eliminated.
 1268              	.LVL93:
2038:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2039:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2040:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2041:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2042:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
2043:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1269              		.loc 1 2043 0
 1270 0000 0020     		movs	r0, #0
 1271              	.LVL94:
 1272 0002 7047     		bx	lr
 1273              		.cfi_endproc
 1274              	.LFE86:
 1276              		.section	.text.USB_ClearInterrupts,"ax",%progbits
 1277              		.align	1
 1278              		.global	USB_ClearInterrupts
 1279              		.syntax unified
 1280              		.thumb
 1281              		.thumb_func
 1282              		.fpu softvfp
 1284              	USB_ClearInterrupts:
 1285              	.LFB87:
2044:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2045:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2046:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ClearInterrupts: clear a USB interrupt
2047:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2048:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  interrupt : interrupt flag
2049:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
2050:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2051:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void  USB_ClearInterrupts (USB_TypeDef *USBx, uint32_t interrupt)
2052:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1286              		.loc 1 2052 0
 1287              		.cfi_startproc
 1288              		@ args = 0, pretend = 0, frame = 0
 1289              		@ frame_needed = 0, uses_anonymous_args = 0
 1290              		@ link register save eliminated.
 1291              	.LVL95:
 1292 0000 7047     		bx	lr
 1293              		.cfi_endproc
 1294              	.LFE87:
 1296              		.section	.text.USB_EP0_OutStart,"ax",%progbits
ARM GAS  /tmp/cc8jUnOu.s 			page 60


 1297              		.align	1
 1298              		.global	USB_EP0_OutStart
 1299              		.syntax unified
 1300              		.thumb
 1301              		.thumb_func
 1302              		.fpu softvfp
 1304              	USB_EP0_OutStart:
 1305              	.LFB88:
2053:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2054:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2055:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2056:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2057:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
2058:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2059:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2060:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Prepare the EP0 to start the first control setup
2061:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2062:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  psetup : pointer to setup packet
2063:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2064:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2065:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0_OutStart(USB_TypeDef *USBx, uint8_t *psetup)
2066:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1306              		.loc 1 2066 0
 1307              		.cfi_startproc
 1308              		@ args = 0, pretend = 0, frame = 0
 1309              		@ frame_needed = 0, uses_anonymous_args = 0
 1310              		@ link register save eliminated.
 1311              	.LVL96:
2067:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2068:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2069:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2070:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2071:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
2072:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1312              		.loc 1 2072 0
 1313 0000 0020     		movs	r0, #0
 1314              	.LVL97:
 1315 0002 7047     		bx	lr
 1316              		.cfi_endproc
 1317              	.LFE88:
 1319              		.section	.text.USB_ActivateRemoteWakeup,"ax",%progbits
 1320              		.align	1
 1321              		.global	USB_ActivateRemoteWakeup
 1322              		.syntax unified
 1323              		.thumb
 1324              		.thumb_func
 1325              		.fpu softvfp
 1327              	USB_ActivateRemoteWakeup:
 1328              	.LFB89:
2073:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2074:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2075:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ActivateRemoteWakeup : active remote wakeup signalling
2076:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2077:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2078:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2079:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateRemoteWakeup(USB_TypeDef *USBx)
2080:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
ARM GAS  /tmp/cc8jUnOu.s 			page 61


 1329              		.loc 1 2080 0
 1330              		.cfi_startproc
 1331              		@ args = 0, pretend = 0, frame = 0
 1332              		@ frame_needed = 0, uses_anonymous_args = 0
 1333              		@ link register save eliminated.
 1334              	.LVL98:
2081:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR |= USB_CNTR_RESUME;
 1335              		.loc 1 2081 0
 1336 0000 B0F84030 		ldrh	r3, [r0, #64]
 1337 0004 9BB2     		uxth	r3, r3
 1338 0006 43F01003 		orr	r3, r3, #16
 1339 000a A0F84030 		strh	r3, [r0, #64]	@ movhi
2082:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2083:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
2084:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1340              		.loc 1 2084 0
 1341 000e 0020     		movs	r0, #0
 1342              	.LVL99:
 1343 0010 7047     		bx	lr
 1344              		.cfi_endproc
 1345              	.LFE89:
 1347              		.section	.text.USB_DeActivateRemoteWakeup,"ax",%progbits
 1348              		.align	1
 1349              		.global	USB_DeActivateRemoteWakeup
 1350              		.syntax unified
 1351              		.thumb
 1352              		.thumb_func
 1353              		.fpu softvfp
 1355              	USB_DeActivateRemoteWakeup:
 1356              	.LFB90:
2085:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2086:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2087:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DeActivateRemoteWakeup : de-active remote wakeup signalling
2088:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2089:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2090:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2091:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeActivateRemoteWakeup(USB_TypeDef *USBx)
2092:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1357              		.loc 1 2092 0
 1358              		.cfi_startproc
 1359              		@ args = 0, pretend = 0, frame = 0
 1360              		@ frame_needed = 0, uses_anonymous_args = 0
 1361              		@ link register save eliminated.
 1362              	.LVL100:
2093:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR &= ~(USB_CNTR_RESUME);
 1363              		.loc 1 2093 0
 1364 0000 B0F84030 		ldrh	r3, [r0, #64]
 1365 0004 23F01003 		bic	r3, r3, #16
 1366 0008 1B04     		lsls	r3, r3, #16
 1367 000a 1B0C     		lsrs	r3, r3, #16
 1368 000c A0F84030 		strh	r3, [r0, #64]	@ movhi
2094:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
2095:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1369              		.loc 1 2095 0
 1370 0010 0020     		movs	r0, #0
 1371              	.LVL101:
 1372 0012 7047     		bx	lr
ARM GAS  /tmp/cc8jUnOu.s 			page 62


 1373              		.cfi_endproc
 1374              	.LFE90:
 1376              		.section	.text.USB_WritePMA,"ax",%progbits
 1377              		.align	1
 1378              		.global	USB_WritePMA
 1379              		.syntax unified
 1380              		.thumb
 1381              		.thumb_func
 1382              		.fpu softvfp
 1384              	USB_WritePMA:
 1385              	.LFB91:
2096:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2097:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2098:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Copy a buffer from user memory area to packet memory area (PMA)
2099:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : pointer to USB register.
2100:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  pbUsrBuf : pointer to user memory area.
2101:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wPMABufAddr : address into PMA.
2102:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wNBytes : number of bytes to be copied.
2103:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
2104:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2105:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void USB_WritePMA(USB_TypeDef *USBx, uint8_t *pbUsrBuf, uint16_t wPMABufAddr, uint16_t wNBytes)
2106:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1386              		.loc 1 2106 0
 1387              		.cfi_startproc
 1388              		@ args = 0, pretend = 0, frame = 0
 1389              		@ frame_needed = 0, uses_anonymous_args = 0
 1390              	.LVL102:
 1391 0000 10B5     		push	{r4, lr}
 1392              	.LCFI8:
 1393              		.cfi_def_cfa_offset 8
 1394              		.cfi_offset 4, -8
 1395              		.cfi_offset 14, -4
2107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;   /* nbytes = (wNBytes + 1) / 2 */
2108:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0, temp1 = 0, temp2 = 0;
2109:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t *pdwVal = NULL;
2110:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   pdwVal = (uint16_t *)(wPMABufAddr * 2 + (uint32_t)USBx + 0x400);
2112:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 1396              		.loc 1 2112 0
 1397 0002 0024     		movs	r4, #0
2107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;   /* nbytes = (wNBytes + 1) / 2 */
 1398              		.loc 1 2107 0
 1399 0004 0133     		adds	r3, r3, #1
 1400              	.LVL103:
2111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 1401              		.loc 1 2111 0
 1402 0006 00F58060 		add	r0, r0, #1024
 1403              	.LVL104:
2107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;   /* nbytes = (wNBytes + 1) / 2 */
 1404              		.loc 1 2107 0
 1405 000a 5B10     		asrs	r3, r3, #1
 1406              	.LVL105:
2111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 1407              		.loc 1 2111 0
 1408 000c 00EB4202 		add	r2, r0, r2, lsl #1
 1409              	.LVL106:
 1410              	.L121:
ARM GAS  /tmp/cc8jUnOu.s 			page 63


 1411              		.loc 1 2112 0 discriminator 1
 1412 0010 A342     		cmp	r3, r4
 1413 0012 00D1     		bne	.L122
2113:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2114:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     temp1 = (uint16_t) * pbUsrBuf;
2115:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
2116:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     temp2 = temp1 | (uint16_t) * pbUsrBuf << 8;
2117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     *pdwVal++ = temp2;
2118:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pdwVal++;
2119:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
2120:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2121:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1414              		.loc 1 2121 0
 1415 0014 10BD     		pop	{r4, pc}
 1416              	.LVL107:
 1417              	.L122:
 1418 0016 31F8020B 		ldrh	r0, [r1], #2	@ unaligned
 1419              	.LVL108:
2117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pdwVal++;
 1420              		.loc 1 2117 0 discriminator 3
 1421 001a 22F82400 		strh	r0, [r2, r4, lsl #2]	@ movhi
 1422              	.LVL109:
 1423 001e 0134     		adds	r4, r4, #1
 1424              	.LVL110:
 1425 0020 F6E7     		b	.L121
 1426              		.cfi_endproc
 1427              	.LFE91:
 1429              		.section	.text.USB_EPStartXfer,"ax",%progbits
 1430              		.align	1
 1431              		.global	USB_EPStartXfer
 1432              		.syntax unified
 1433              		.thumb
 1434              		.thumb_func
 1435              		.fpu softvfp
 1437              	USB_EPStartXfer:
 1438              	.LFB73:
1746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pmabuffer = 0;
 1439              		.loc 1 1746 0
 1440              		.cfi_startproc
 1441              		@ args = 0, pretend = 0, frame = 0
 1442              		@ frame_needed = 0, uses_anonymous_args = 0
 1443              	.LVL111:
 1444 0000 70B5     		push	{r4, r5, r6, lr}
 1445              	.LCFI9:
 1446              		.cfi_def_cfa_offset 16
 1447              		.cfi_offset 4, -16
 1448              		.cfi_offset 5, -12
 1449              		.cfi_offset 6, -8
 1450              		.cfi_offset 14, -4
1746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pmabuffer = 0;
 1451              		.loc 1 1746 0
 1452 0002 0E46     		mov	r6, r1
1748:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 1453              		.loc 1 1748 0
 1454 0004 8A69     		ldr	r2, [r1, #24]
 1455              	.LVL112:
1751:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
ARM GAS  /tmp/cc8jUnOu.s 			page 64


 1456              		.loc 1 1751 0
 1457 0006 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 1458              	.LVL113:
1746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pmabuffer = 0;
 1459              		.loc 1 1746 0
 1460 0008 0546     		mov	r5, r0
1751:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 1461              		.loc 1 1751 0
 1462 000a 0129     		cmp	r1, #1
 1463 000c 3369     		ldr	r3, [r6, #16]
 1464 000e B07A     		ldrb	r0, [r6, #10]	@ zero_extendqisi2
 1465              	.LVL114:
 1466 0010 5ED1     		bne	.L124
1754:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 1467              		.loc 1 1754 0
 1468 0012 9A42     		cmp	r2, r3
 1469              	.LVL115:
 1470 0014 1C46     		mov	r4, r3
1762:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1471              		.loc 1 1762 0
 1472 0016 9BBF     		ittet	ls
 1473 0018 0023     		movls	r3, #0
 1474              	.LVL116:
 1475 001a 1446     		movls	r4, r2
 1476              	.LVL117:
1757:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1477              		.loc 1 1757 0
 1478 001c D21A     		subhi	r2, r2, r3
1762:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1479              		.loc 1 1762 0
 1480 001e B361     		strls	r3, [r6, #24]
1757:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1481              		.loc 1 1757 0
 1482 0020 88BF     		it	hi
 1483 0022 B261     		strhi	r2, [r6, #24]
 1484              	.LVL118:
 1485 0024 A3B2     		uxth	r3, r4
1766:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 1486              		.loc 1 1766 0
 1487 0026 08BB     		cbnz	r0, .L127
1768:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_CNT(USBx, ep->num, len);
 1488              		.loc 1 1768 0
 1489 0028 B288     		ldrh	r2, [r6, #4]
 1490 002a 7169     		ldr	r1, [r6, #20]
 1491 002c 2846     		mov	r0, r5
 1492 002e FFF7FEFF 		bl	USB_WritePMA
 1493              	.LVL119:
1769:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1494              		.loc 1 1769 0
 1495 0032 B5F85030 		ldrh	r3, [r5, #80]
 1496 0036 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 1497 0038 9BB2     		uxth	r3, r3
 1498 003a 03EBC203 		add	r3, r3, r2, lsl #3
 1499 003e 05EB4303 		add	r3, r5, r3, lsl #1
 1500 0042 C3F80444 		str	r4, [r3, #1028]
 1501              	.LVL120:
 1502              	.L128:
ARM GAS  /tmp/cc8jUnOu.s 			page 65


 1503              	.LBB30:
1790:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 1504              		.loc 1 1790 0
 1505 0046 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 1506 0048 35F82230 		ldrh	r3, [r5, r2, lsl #2]
 1507 004c 23F4E043 		bic	r3, r3, #28672
 1508 0050 23F04003 		bic	r3, r3, #64
 1509 0054 1B04     		lsls	r3, r3, #16
 1510 0056 1B0C     		lsrs	r3, r3, #16
 1511              	.LVL121:
 1512 0058 83F03003 		eor	r3, r3, #48
 1513              	.LVL122:
 1514              	.L159:
 1515              	.LBE30:
 1516              	.LBB31:
1818:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 1517              		.loc 1 1818 0
 1518 005c 43F40043 		orr	r3, r3, #32768
 1519 0060 43F08003 		orr	r3, r3, #128
 1520 0064 25F82230 		strh	r3, [r5, r2, lsl #2]	@ movhi
 1521              	.LBE31:
1822:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 1522              		.loc 1 1822 0
 1523 0068 0020     		movs	r0, #0
 1524 006a 70BD     		pop	{r4, r5, r6, pc}
 1525              	.LVL123:
 1526              	.L127:
1774:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 1527              		.loc 1 1774 0
 1528 006c 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
1786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_FreeUserBuffer(USBx, ep->num, ep->is_in);
 1529              		.loc 1 1786 0
 1530 006e 2846     		mov	r0, r5
1774:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 1531              		.loc 1 1774 0
 1532 0070 35F82210 		ldrh	r1, [r5, r2, lsl #2]
 1533 0074 D200     		lsls	r2, r2, #3
 1534 0076 11F0400F 		tst	r1, #64
1777:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         pmabuffer = ep->pmaaddr1;
 1535              		.loc 1 1777 0
 1536 007a B5F85010 		ldrh	r1, [r5, #80]
 1537 007e 89B2     		uxth	r1, r1
 1538 0080 0A44     		add	r2, r2, r1
 1539 0082 05EB4202 		add	r2, r5, r2, lsl #1
 1540 0086 C2F80444 		str	r4, [r2, #1028]
1786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_FreeUserBuffer(USBx, ep->num, ep->is_in);
 1541              		.loc 1 1786 0
 1542 008a 7169     		ldr	r1, [r6, #20]
1778:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 1543              		.loc 1 1778 0
 1544 008c 14BF     		ite	ne
 1545 008e 3289     		ldrhne	r2, [r6, #8]
 1546              	.LVL124:
1784:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 1547              		.loc 1 1784 0
 1548 0090 F288     		ldrheq	r2, [r6, #6]
 1549              	.LVL125:
ARM GAS  /tmp/cc8jUnOu.s 			page 66


1786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_FreeUserBuffer(USBx, ep->num, ep->is_in);
 1550              		.loc 1 1786 0
 1551 0092 FFF7FEFF 		bl	USB_WritePMA
 1552              	.LVL126:
1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1553              		.loc 1 1787 0
 1554 0096 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 1555 0098 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 1556 009a 63B9     		cbnz	r3, .L131
1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1557              		.loc 1 1787 0 is_stmt 0 discriminator 1
 1558 009c 35F82230 		ldrh	r3, [r5, r2, lsl #2]
 1559 00a0 23F0F003 		bic	r3, r3, #240
 1560 00a4 1B05     		lsls	r3, r3, #20
 1561 00a6 1B0D     		lsrs	r3, r3, #20
 1562 00a8 43F40043 		orr	r3, r3, #32768
 1563 00ac 43F0C003 		orr	r3, r3, #192
 1564              	.L157:
1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1565              		.loc 1 1787 0 discriminator 3
 1566 00b0 25F82230 		strh	r3, [r5, r2, lsl #2]	@ movhi
 1567 00b4 C7E7     		b	.L128
 1568              	.L131:
1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1569              		.loc 1 1787 0 discriminator 2
 1570 00b6 012B     		cmp	r3, #1
 1571 00b8 C5D1     		bne	.L128
1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1572              		.loc 1 1787 0 discriminator 3
 1573 00ba 35F82230 		ldrh	r3, [r5, r2, lsl #2]
 1574 00be 23F0F003 		bic	r3, r3, #240
 1575 00c2 1B05     		lsls	r3, r3, #20
 1576 00c4 1B0D     		lsrs	r3, r3, #20
 1577 00c6 43F44043 		orr	r3, r3, #49152
 1578 00ca 43F08003 		orr	r3, r3, #128
 1579 00ce EFE7     		b	.L157
 1580              	.LVL127:
 1581              	.L124:
1795:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 1582              		.loc 1 1795 0 is_stmt 1
 1583 00d0 9A42     		cmp	r2, r3
 1584              	.LVL128:
1803:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1585              		.loc 1 1803 0
 1586 00d2 93BF     		iteet	ls
 1587 00d4 0023     		movls	r3, #0
 1588              	.LVL129:
1798:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1589              		.loc 1 1798 0
 1590 00d6 D21A     		subhi	r2, r2, r3
 1591 00d8 B261     		strhi	r2, [r6, #24]
 1592              	.LVL130:
1803:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1593              		.loc 1 1803 0
 1594 00da B361     		strls	r3, [r6, #24]
 1595 00dc 98BF     		it	ls
 1596 00de 1346     		movls	r3, r2
ARM GAS  /tmp/cc8jUnOu.s 			page 67


 1597              	.LVL131:
 1598 00e0 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
1807:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 1599              		.loc 1 1807 0
 1600 00e2 18BB     		cbnz	r0, .L135
 1601              	.L166:
 1602              	.LBB32:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1603              		.loc 1 1815 0 discriminator 14
 1604 00e4 B5F85010 		ldrh	r1, [r5, #80]
 1605              	.LBB33:
 1606 00e8 3E2B     		cmp	r3, #62
 1607              	.LBE33:
 1608 00ea 89B2     		uxth	r1, r1
 1609 00ec 01EBC201 		add	r1, r1, r2, lsl #3
 1610 00f0 01F10601 		add	r1, r1, #6
 1611 00f4 05F58060 		add	r0, r5, #1024
 1612              	.LVL132:
 1613              	.LBB34:
 1614 00f8 49D9     		bls	.L145
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1615              		.loc 1 1815 0 is_stmt 0 discriminator 16
 1616 00fa C3F34F12 		ubfx	r2, r3, #5, #16
 1617              	.LVL133:
 1618 00fe DC06     		lsls	r4, r3, #27
 1619 0100 04BF     		itt	eq
 1620 0102 02F1FF33 		addeq	r3, r2, #-1
 1621              	.LVL134:
 1622 0106 9AB2     		uxtheq	r2, r3
 1623              	.LVL135:
 1624 0108 264B     		ldr	r3, .L167
 1625 010a 43EA8223 		orr	r3, r3, r2, lsl #10
 1626 010e 9BB2     		uxth	r3, r3
 1627 0110 40F81130 		str	r3, [r0, r1, lsl #1]
 1628              	.LVL136:
 1629              	.L138:
 1630              	.LBE34:
 1631              	.LBE32:
 1632              	.LBB36:
1818:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 1633              		.loc 1 1818 0 is_stmt 1
 1634 0114 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 1635 0116 35F82230 		ldrh	r3, [r5, r2, lsl #2]
 1636 011a 23F48043 		bic	r3, r3, #16384
 1637 011e 23F07003 		bic	r3, r3, #112
 1638 0122 1B04     		lsls	r3, r3, #16
 1639 0124 1B0C     		lsrs	r3, r3, #16
 1640              	.LVL137:
 1641 0126 83F44053 		eor	r3, r3, #12288
 1642              	.LVL138:
 1643 012a 97E7     		b	.L159
 1644              	.LVL139:
 1645              	.L135:
 1646              	.LBE36:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1647              		.loc 1 1815 0
 1648 012c B9B9     		cbnz	r1, .L140
ARM GAS  /tmp/cc8jUnOu.s 			page 68


 1649              	.LBB37:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1650              		.loc 1 1815 0 is_stmt 0 discriminator 1
 1651 012e B5F85010 		ldrh	r1, [r5, #80]
 1652              	.LBB38:
 1653 0132 3E2B     		cmp	r3, #62
 1654              	.LBE38:
 1655 0134 89B2     		uxth	r1, r1
 1656 0136 01EBC201 		add	r1, r1, r2, lsl #3
 1657 013a 01F10201 		add	r1, r1, #2
 1658 013e 05F58064 		add	r4, r5, #1024
 1659              	.LVL140:
 1660              	.LBB39:
 1661 0142 1CD9     		bls	.L141
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1662              		.loc 1 1815 0 discriminator 3
 1663 0144 C3F34F10 		ubfx	r0, r3, #5, #16
 1664              	.LVL141:
 1665 0148 DA06     		lsls	r2, r3, #27
 1666 014a 04BF     		itt	eq
 1667 014c 00F1FF32 		addeq	r2, r0, #-1
 1668 0150 90B2     		uxtheq	r0, r2
 1669              	.LVL142:
 1670 0152 144A     		ldr	r2, .L167
 1671 0154 42EA8022 		orr	r2, r2, r0, lsl #10
 1672              	.LVL143:
 1673              	.L158:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1674              		.loc 1 1815 0 discriminator 10
 1675 0158 92B2     		uxth	r2, r2
 1676 015a 44F81120 		str	r2, [r4, r1, lsl #1]
 1677              	.LVL144:
 1678              	.L140:
 1679              	.LBE39:
 1680              	.LBE37:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1681              		.loc 1 1815 0 discriminator 13
 1682 015e 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 1683 0160 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 1684 0162 0029     		cmp	r1, #0
 1685 0164 BED0     		beq	.L166
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1686              		.loc 1 1815 0 discriminator 15
 1687 0166 0129     		cmp	r1, #1
 1688 0168 D4D1     		bne	.L138
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1689              		.loc 1 1815 0 discriminator 24
 1690 016a B5F85010 		ldrh	r1, [r5, #80]
 1691 016e 89B2     		uxth	r1, r1
 1692 0170 01EBC201 		add	r1, r1, r2, lsl #3
 1693 0174 05EB4101 		add	r1, r5, r1, lsl #1
 1694 0178 C1F80434 		str	r3, [r1, #1028]
 1695 017c CAE7     		b	.L138
 1696              	.LVL145:
 1697              	.L141:
 1698              	.LBB41:
 1699              	.LBB40:
ARM GAS  /tmp/cc8jUnOu.s 			page 69


1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1700              		.loc 1 1815 0 discriminator 4
 1701 017e C3F34F02 		ubfx	r2, r3, #1, #16
 1702              	.LVL146:
 1703 0182 D807     		lsls	r0, r3, #31
 1704 0184 44BF     		itt	mi
 1705 0186 0132     		addmi	r2, r2, #1
 1706              	.LVL147:
 1707 0188 92B2     		uxthmi	r2, r2
 1708              	.LVL148:
 1709 018a 9202     		lsls	r2, r2, #10
 1710              	.LVL149:
 1711 018c E4E7     		b	.L158
 1712              	.LVL150:
 1713              	.L145:
 1714              	.LBE40:
 1715              	.LBE41:
 1716              	.LBB42:
 1717              	.LBB35:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 1718              		.loc 1 1815 0 discriminator 17
 1719 018e C3F34F02 		ubfx	r2, r3, #1, #16
 1720              	.LVL151:
 1721 0192 DB07     		lsls	r3, r3, #31
 1722              	.LVL152:
 1723 0194 44BF     		itt	mi
 1724 0196 0132     		addmi	r2, r2, #1
 1725              	.LVL153:
 1726 0198 92B2     		uxthmi	r2, r2
 1727              	.LVL154:
 1728 019a 9202     		lsls	r2, r2, #10
 1729              	.LVL155:
 1730 019c 92B2     		uxth	r2, r2
 1731 019e 40F81120 		str	r2, [r0, r1, lsl #1]
 1732 01a2 B7E7     		b	.L138
 1733              	.L168:
 1734              		.align	2
 1735              	.L167:
 1736 01a4 0080FFFF 		.word	-32768
 1737              	.LBE35:
 1738              	.LBE42:
 1739              		.cfi_endproc
 1740              	.LFE73:
 1742              		.section	.text.USB_ReadPMA,"ax",%progbits
 1743              		.align	1
 1744              		.global	USB_ReadPMA
 1745              		.syntax unified
 1746              		.thumb
 1747              		.thumb_func
 1748              		.fpu softvfp
 1750              	USB_ReadPMA:
 1751              	.LFB92:
2122:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2123:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2124:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Copy a buffer from user memory area to packet memory area (PMA)
2125:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : pointer to USB register.
2126:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** * @param  pbUsrBuf : pointer to user memory area.
ARM GAS  /tmp/cc8jUnOu.s 			page 70


2127:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wPMABufAddr : address into PMA.
2128:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wNBytes : number of bytes to be copied.
2129:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
2130:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2131:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void USB_ReadPMA(USB_TypeDef *USBx, uint8_t *pbUsrBuf, uint16_t wPMABufAddr, uint16_t wNBytes)
2132:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1752              		.loc 1 2132 0 is_stmt 1
 1753              		.cfi_startproc
 1754              		@ args = 0, pretend = 0, frame = 0
 1755              		@ frame_needed = 0, uses_anonymous_args = 0
 1756              	.LVL156:
 1757 0000 10B5     		push	{r4, lr}
 1758              	.LCFI10:
 1759              		.cfi_def_cfa_offset 8
 1760              		.cfi_offset 4, -8
 1761              		.cfi_offset 14, -4
2133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;/* /2*/
2134:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
2135:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t *pdwVal = NULL;
2136:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   pdwVal = (uint32_t *)(wPMABufAddr * 2 + (uint32_t)USBx + 0x400);
2138:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 1762              		.loc 1 2138 0
 1763 0002 0024     		movs	r4, #0
2133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;/* /2*/
 1764              		.loc 1 2133 0
 1765 0004 0133     		adds	r3, r3, #1
 1766              	.LVL157:
2137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 1767              		.loc 1 2137 0
 1768 0006 00F58060 		add	r0, r0, #1024
 1769              	.LVL158:
2133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;/* /2*/
 1770              		.loc 1 2133 0
 1771 000a 5B10     		asrs	r3, r3, #1
 1772              	.LVL159:
2137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 1773              		.loc 1 2137 0
 1774 000c 00EB4202 		add	r2, r0, r2, lsl #1
 1775              	.LVL160:
 1776              	.L170:
 1777              		.loc 1 2138 0 discriminator 1
 1778 0010 A342     		cmp	r3, r4
 1779 0012 00D1     		bne	.L171
2139:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     *(uint16_t*)pbUsrBuf++ = *pdwVal++;
2141:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
2142:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2143:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1780              		.loc 1 2143 0
 1781 0014 10BD     		pop	{r4, pc}
 1782              	.LVL161:
 1783              	.L171:
2140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
 1784              		.loc 1 2140 0 discriminator 3
 1785 0016 52F82400 		ldr	r0, [r2, r4, lsl #2]
 1786 001a 21F81400 		strh	r0, [r1, r4, lsl #1]	@ movhi
ARM GAS  /tmp/cc8jUnOu.s 			page 71


 1787              	.LVL162:
 1788 001e 0134     		adds	r4, r4, #1
 1789              	.LVL163:
 1790 0020 F6E7     		b	.L170
 1791              		.cfi_endproc
 1792              	.LFE92:
 1794              		.text
 1795              	.Letext0:
 1796              		.file 2 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/machine/_default_types.h"
 1797              		.file 3 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/_stdint.h"
 1798              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 1799              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1800              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1801              		.file 7 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/lock.h"
 1802              		.file 8 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/_types.h"
 1803              		.file 9 "/opt/gcc-arm-none-eabi-6-2017-q1-update/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 1804              		.file 10 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/reent.h"
 1805              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1806              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_ll_usb.h"
 1807              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_pcd.h"
ARM GAS  /tmp/cc8jUnOu.s 			page 72


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32f1xx_ll_usb.c
     /tmp/cc8jUnOu.s:16     .text.USB_CoreInit:0000000000000000 $t
     /tmp/cc8jUnOu.s:23     .text.USB_CoreInit:0000000000000000 USB_CoreInit
     /tmp/cc8jUnOu.s:49     .text.USB_EnableGlobalInt:0000000000000000 $t
     /tmp/cc8jUnOu.s:56     .text.USB_EnableGlobalInt:0000000000000000 USB_EnableGlobalInt
     /tmp/cc8jUnOu.s:77     .text.USB_DisableGlobalInt:0000000000000000 $t
     /tmp/cc8jUnOu.s:84     .text.USB_DisableGlobalInt:0000000000000000 USB_DisableGlobalInt
     /tmp/cc8jUnOu.s:106    .text.USB_SetCurrentMode:0000000000000000 $t
     /tmp/cc8jUnOu.s:113    .text.USB_SetCurrentMode:0000000000000000 USB_SetCurrentMode
     /tmp/cc8jUnOu.s:129    .text.USB_DevInit:0000000000000000 $t
     /tmp/cc8jUnOu.s:136    .text.USB_DevInit:0000000000000000 USB_DevInit
     /tmp/cc8jUnOu.s:183    .text.USB_FlushTxFifo:0000000000000000 $t
     /tmp/cc8jUnOu.s:190    .text.USB_FlushTxFifo:0000000000000000 USB_FlushTxFifo
     /tmp/cc8jUnOu.s:206    .text.USB_FlushRxFifo:0000000000000000 $t
     /tmp/cc8jUnOu.s:213    .text.USB_FlushRxFifo:0000000000000000 USB_FlushRxFifo
     /tmp/cc8jUnOu.s:225    .text.USB_ActivateEndpoint:0000000000000000 $t
     /tmp/cc8jUnOu.s:232    .text.USB_ActivateEndpoint:0000000000000000 USB_ActivateEndpoint
     /tmp/cc8jUnOu.s:254    .text.USB_ActivateEndpoint:000000000000000e $d
     /tmp/cc8jUnOu.s:258    .text.USB_ActivateEndpoint:0000000000000012 $t
     /tmp/cc8jUnOu.s:617    .text.USB_ActivateEndpoint:00000000000002e4 $d
     /tmp/cc8jUnOu.s:623    .text.USB_DeactivateEndpoint:0000000000000000 $t
     /tmp/cc8jUnOu.s:630    .text.USB_DeactivateEndpoint:0000000000000000 USB_DeactivateEndpoint
     /tmp/cc8jUnOu.s:851    .text.USB_WritePacket:0000000000000000 $t
     /tmp/cc8jUnOu.s:858    .text.USB_WritePacket:0000000000000000 USB_WritePacket
     /tmp/cc8jUnOu.s:874    .text.USB_ReadPacket:0000000000000000 $t
     /tmp/cc8jUnOu.s:881    .text.USB_ReadPacket:0000000000000000 USB_ReadPacket
     /tmp/cc8jUnOu.s:897    .text.USB_EPSetStall:0000000000000000 $t
     /tmp/cc8jUnOu.s:904    .text.USB_EPSetStall:0000000000000000 USB_EPSetStall
     /tmp/cc8jUnOu.s:973    .text.USB_EPClearStall:0000000000000000 $t
     /tmp/cc8jUnOu.s:980    .text.USB_EPClearStall:0000000000000000 USB_EPClearStall
     /tmp/cc8jUnOu.s:1060   .text.USB_StopDevice:0000000000000000 $t
     /tmp/cc8jUnOu.s:1067   .text.USB_StopDevice:0000000000000000 USB_StopDevice
     /tmp/cc8jUnOu.s:1096   .text.USB_SetDevAddress:0000000000000000 $t
     /tmp/cc8jUnOu.s:1103   .text.USB_SetDevAddress:0000000000000000 USB_SetDevAddress
     /tmp/cc8jUnOu.s:1125   .text.USB_DevConnect:0000000000000000 $t
     /tmp/cc8jUnOu.s:1132   .text.USB_DevConnect:0000000000000000 USB_DevConnect
     /tmp/cc8jUnOu.s:1144   .text.USB_DevDisconnect:0000000000000000 $t
     /tmp/cc8jUnOu.s:1151   .text.USB_DevDisconnect:0000000000000000 USB_DevDisconnect
     /tmp/cc8jUnOu.s:1167   .text.USB_ReadInterrupts:0000000000000000 $t
     /tmp/cc8jUnOu.s:1174   .text.USB_ReadInterrupts:0000000000000000 USB_ReadInterrupts
     /tmp/cc8jUnOu.s:1193   .text.USB_ReadDevAllOutEpInterrupt:0000000000000000 $t
     /tmp/cc8jUnOu.s:1200   .text.USB_ReadDevAllOutEpInterrupt:0000000000000000 USB_ReadDevAllOutEpInterrupt
     /tmp/cc8jUnOu.s:1212   .text.USB_ReadDevAllInEpInterrupt:0000000000000000 $t
     /tmp/cc8jUnOu.s:1219   .text.USB_ReadDevAllInEpInterrupt:0000000000000000 USB_ReadDevAllInEpInterrupt
     /tmp/cc8jUnOu.s:1235   .text.USB_ReadDevOutEPInterrupt:0000000000000000 $t
     /tmp/cc8jUnOu.s:1242   .text.USB_ReadDevOutEPInterrupt:0000000000000000 USB_ReadDevOutEPInterrupt
     /tmp/cc8jUnOu.s:1254   .text.USB_ReadDevInEPInterrupt:0000000000000000 $t
     /tmp/cc8jUnOu.s:1261   .text.USB_ReadDevInEPInterrupt:0000000000000000 USB_ReadDevInEPInterrupt
     /tmp/cc8jUnOu.s:1277   .text.USB_ClearInterrupts:0000000000000000 $t
     /tmp/cc8jUnOu.s:1284   .text.USB_ClearInterrupts:0000000000000000 USB_ClearInterrupts
     /tmp/cc8jUnOu.s:1297   .text.USB_EP0_OutStart:0000000000000000 $t
     /tmp/cc8jUnOu.s:1304   .text.USB_EP0_OutStart:0000000000000000 USB_EP0_OutStart
     /tmp/cc8jUnOu.s:1320   .text.USB_ActivateRemoteWakeup:0000000000000000 $t
     /tmp/cc8jUnOu.s:1327   .text.USB_ActivateRemoteWakeup:0000000000000000 USB_ActivateRemoteWakeup
     /tmp/cc8jUnOu.s:1348   .text.USB_DeActivateRemoteWakeup:0000000000000000 $t
     /tmp/cc8jUnOu.s:1355   .text.USB_DeActivateRemoteWakeup:0000000000000000 USB_DeActivateRemoteWakeup
ARM GAS  /tmp/cc8jUnOu.s 			page 73


     /tmp/cc8jUnOu.s:1377   .text.USB_WritePMA:0000000000000000 $t
     /tmp/cc8jUnOu.s:1384   .text.USB_WritePMA:0000000000000000 USB_WritePMA
     /tmp/cc8jUnOu.s:1430   .text.USB_EPStartXfer:0000000000000000 $t
     /tmp/cc8jUnOu.s:1437   .text.USB_EPStartXfer:0000000000000000 USB_EPStartXfer
     /tmp/cc8jUnOu.s:1736   .text.USB_EPStartXfer:00000000000001a4 $d
     /tmp/cc8jUnOu.s:1743   .text.USB_ReadPMA:0000000000000000 $t
     /tmp/cc8jUnOu.s:1750   .text.USB_ReadPMA:0000000000000000 USB_ReadPMA
                     .debug_frame:0000000000000010 $d

NO UNDEFINED SYMBOLS
