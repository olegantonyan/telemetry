ARM GAS  /tmp/cci2zZmt.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"cmsis_os.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.osKernelStart,"ax",%progbits
  16              		.align	1
  17              		.global	osKernelStart
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	osKernelStart:
  24              	.LFB29:
  25              		.file 1 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c"
   1:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /* ----------------------------------------------------------------------
   2:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * $Date:        5. February 2013
   3:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * $Revision:    V1.02
   4:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *
   5:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Project:      CMSIS-RTOS API
   6:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Title:        cmsis_os.c
   7:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *
   8:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Version 0.02
   9:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Initial Proposal Phase
  10:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Version 0.03
  11:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    osKernelStart added, optional feature: main started as thread
  12:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    osSemaphores have standard behavior
  13:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    osTimerCreate does not start the timer, added osTimerStart
  14:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    osThreadPass is renamed to osThreadYield
  15:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Version 1.01
  16:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Support for C++ interface
  17:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *     - const attribute removed from the osXxxxDef_t typedef's
  18:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *     - const attribute added to the osXxxxDef macros
  19:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Added: osTimerDelete, osMutexDelete, osSemaphoreDelete
  20:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Added: osKernelInitialize
  21:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Version 1.02
  22:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Control functions for short timeouts in microsecond resolution:
  23:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Added: osKernelSysTick, osKernelSysTickFrequency, osKernelSysTickMicroSec
  24:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    Removed: osSignalGet 
  25:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    
  26:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *  
  27:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *----------------------------------------------------------------------------
  28:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *
  29:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Portions Copyright © 2016 STMicroelectronics International N.V. All rights reserved.
  30:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Portions Copyright (c) 2013 ARM LIMITED
  31:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * All rights reserved.
  32:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * Redistribution and use in source and binary forms, with or without
  33:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * modification, are permitted provided that the following conditions are met:
ARM GAS  /tmp/cci2zZmt.s 			page 2


  34:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *  - Redistributions of source code must retain the above copyright
  35:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    notice, this list of conditions and the following disclaimer.
  36:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *  - Redistributions in binary form must reproduce the above copyright
  37:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    notice, this list of conditions and the following disclaimer in the
  38:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    documentation and/or other materials provided with the distribution.
  39:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *  - Neither the name of ARM  nor the names of its contributors may be used
  40:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    to endorse or promote products derived from this software without
  41:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *    specific prior written permission.
  42:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *
  43:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  44:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  45:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  46:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS AND CONTRIBUTORS BE
  47:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  48:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  49:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  50:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  51:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  52:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  53:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  * POSSIBILITY OF SUCH DAMAGE.
  54:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  *---------------------------------------------------------------------------*/
  55:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
  56:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  /**
  57:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ******************************************************************************
  58:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * @file    cmsis_os.c
  59:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * @author  MCD Application Team
  60:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * @date    22-January-2016
  61:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * @brief   CMSIS-RTOS API implementation for FreeRTOS V8.2.3
  62:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ******************************************************************************
  63:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * @attention
  64:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *
  65:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * Redistribution and use in source and binary forms, with or without 
  66:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * modification, are permitted, provided that the following conditions are met:
  67:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *
  68:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * 1. Redistribution of source code must retain the above copyright notice, 
  69:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    this list of conditions and the following disclaimer.
  70:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  71:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    this list of conditions and the following disclaimer in the documentation
  72:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    and/or other materials provided with the distribution.
  73:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  74:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    contributors to this software may be used to endorse or promote products 
  75:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    derived from this software without specific written permission.
  76:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * 4. This software, including modifications and/or derivative works of this 
  77:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    software, must execute solely and exclusively on microcontroller or
  78:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  79:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * 5. Redistribution and use of this software other than as permitted under 
  80:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    this license is void and will automatically terminate your rights under 
  81:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *    this license. 
  82:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *
  83:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
  84:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  85:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  86:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  87:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  88:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  89:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  90:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
ARM GAS  /tmp/cci2zZmt.s 			page 3


  91:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  92:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  93:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  94:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  95:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *
  96:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ******************************************************************************
  97:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   */ 
  98:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
  99:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #include <string.h>
 100:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #include "cmsis_os.h"
 101:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 102:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** extern void xPortSysTickHandler(void);
 103:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 104:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /* Convert from CMSIS type osPriority to FreeRTOS priority number */
 105:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** static unsigned portBASE_TYPE makeFreeRtosPriority (osPriority priority)
 106:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 107:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   unsigned portBASE_TYPE fpriority = tskIDLE_PRIORITY;
 108:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 109:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (priority != osPriorityError) {
 110:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     fpriority += (priority - osPriorityIdle);
 111:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 112:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 113:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return fpriority;
 114:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 115:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 116:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_uxTaskPriorityGet == 1)
 117:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /* Convert from FreeRTOS priority number to CMSIS type osPriority */
 118:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** static osPriority makeCmsisPriority (unsigned portBASE_TYPE fpriority)
 119:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 120:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osPriority priority = osPriorityError;
 121:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 122:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if ((fpriority - tskIDLE_PRIORITY) <= (osPriorityRealtime - osPriorityIdle)) {
 123:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     priority = (osPriority)((int)osPriorityIdle + (int)(fpriority - tskIDLE_PRIORITY));
 124:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 125:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 126:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return priority;
 127:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 128:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 129:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 130:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 131:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /* Determine whether we are in thread mode or handler mode. */
 132:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** static int inHandlerMode (void)
 133:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 134:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return __get_IPSR() != 0;
 135:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 136:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 137:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /*********************** Kernel Control Functions *****************************/
 138:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 139:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Initialize the RTOS Kernel for creating objects.
 140:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function.
 141:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osKernelInitialize shall be consistent in every CMSIS-RTOS.
 142:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 143:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osKernelInitialize (void);
 144:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 145:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 146:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Start the RTOS Kernel with executing the specified thread.
 147:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  thread_def    thread definition referenced with \ref osThread.
ARM GAS  /tmp/cci2zZmt.s 			page 4


 148:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  argument      pointer that is passed to the thread function as start argument.
 149:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function
 150:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osKernelStart shall be consistent in every CMSIS-RTOS.
 151:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 152:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osKernelStart (void)
 153:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
  26              		.loc 1 153 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 08B5     		push	{r3, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 3, -8
  34              		.cfi_offset 14, -4
 154:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskStartScheduler();
  35              		.loc 1 154 0
  36 0002 FFF7FEFF 		bl	vTaskStartScheduler
  37              	.LVL0:
 155:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 156:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 157:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
  38              		.loc 1 157 0
  39 0006 0020     		movs	r0, #0
  40 0008 08BD     		pop	{r3, pc}
  41              		.cfi_endproc
  42              	.LFE29:
  44              		.section	.text.osKernelRunning,"ax",%progbits
  45              		.align	1
  46              		.global	osKernelRunning
  47              		.syntax unified
  48              		.thumb
  49              		.thumb_func
  50              		.fpu softvfp
  52              	osKernelRunning:
  53              	.LFB30:
 158:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 159:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 160:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Check if the RTOS kernel is already started
 161:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  None
 162:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval (0) RTOS is not started
 163:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** *         (1) RTOS is started
 164:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** *         (-1) if this feature is disabled in FreeRTOSConfig.h 
 165:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note  MUST REMAIN UNCHANGED: \b osKernelRunning shall be consistent in every CMSIS-RTOS.
 166:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 167:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** int32_t osKernelRunning(void)
 168:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
  54              		.loc 1 168 0
  55              		.cfi_startproc
  56              		@ args = 0, pretend = 0, frame = 0
  57              		@ frame_needed = 0, uses_anonymous_args = 0
  58 0000 08B5     		push	{r3, lr}
  59              	.LCFI1:
  60              		.cfi_def_cfa_offset 8
  61              		.cfi_offset 3, -8
  62              		.cfi_offset 14, -4
 169:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )
ARM GAS  /tmp/cci2zZmt.s 			page 5


 170:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xTaskGetSchedulerState() == taskSCHEDULER_NOT_STARTED)
  63              		.loc 1 170 0
  64 0002 FFF7FEFF 		bl	xTaskGetSchedulerState
  65              	.LVL1:
 171:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return 0;
 172:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else
 173:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return 1;
 174:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 175:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	return (-1);
 176:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif	
 177:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
  66              		.loc 1 177 0
  67 0006 10F1FF30 		adds	r0, r0, #-1
  68 000a 18BF     		it	ne
  69 000c 0120     		movne	r0, #1
  70 000e 08BD     		pop	{r3, pc}
  71              		.cfi_endproc
  72              	.LFE30:
  74              		.section	.text.osKernelSysTick,"ax",%progbits
  75              		.align	1
  76              		.global	osKernelSysTick
  77              		.syntax unified
  78              		.thumb
  79              		.thumb_func
  80              		.fpu softvfp
  82              	osKernelSysTick:
  83              	.LFB31:
 178:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 179:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (defined (osFeature_SysTick)  &&  (osFeature_SysTick != 0))     // System Timer available
 180:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 181:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Get the value of the Kernel SysTick timer
 182:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  None
 183:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval None
 184:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osKernelSysTick shall be consistent in every CMSIS-RTOS.
 185:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 186:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** uint32_t osKernelSysTick(void)
 187:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
  84              		.loc 1 187 0
  85              		.cfi_startproc
  86              		@ args = 0, pretend = 0, frame = 0
  87              		@ frame_needed = 0, uses_anonymous_args = 0
  88              		@ link register save eliminated.
  89              	.LBB80:
  90              	.LBB81:
  91              	.LBB82:
  92              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS Cortex-M Core Function/Instruction Header File
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V4.30
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     20. October 2015
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Copyright (c) 2009 - 2015 ARM LIMITED
   8:Drivers/CMSIS/Include/cmsis_gcc.h **** 
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****    All rights reserved.
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****    Redistribution and use in source and binary forms, with or without
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****    modification, are permitted provided that the following conditions are met:
ARM GAS  /tmp/cci2zZmt.s 			page 6


  12:Drivers/CMSIS/Include/cmsis_gcc.h ****    - Redistributions of source code must retain the above copyright
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****      notice, this list of conditions and the following disclaimer.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****    - Redistributions in binary form must reproduce the above copyright
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****      notice, this list of conditions and the following disclaimer in the
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****      documentation and/or other materials provided with the distribution.
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****    - Neither the name of ARM nor the names of its contributors may be used
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****      to endorse or promote products derived from this software without
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****      specific prior written permission.
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****    *
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****    AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:Drivers/CMSIS/Include/cmsis_gcc.h ****    ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS AND CONTRIBUTORS BE
  25:Drivers/CMSIS/Include/cmsis_gcc.h ****    LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:Drivers/CMSIS/Include/cmsis_gcc.h ****    CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:Drivers/CMSIS/Include/cmsis_gcc.h ****    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Drivers/CMSIS/Include/cmsis_gcc.h ****    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Drivers/CMSIS/Include/cmsis_gcc.h ****    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:Drivers/CMSIS/Include/cmsis_gcc.h ****    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:Drivers/CMSIS/Include/cmsis_gcc.h ****    POSSIBILITY OF SUCH DAMAGE.
  32:Drivers/CMSIS/Include/cmsis_gcc.h ****    ---------------------------------------------------------------------------*/
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  36:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** #if defined ( __GNUC__ )
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  41:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  44:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  47:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
  49:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
  51:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  53:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
  54:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
  55:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
  57:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** __attribute__( ( always_inline ) ) __STATIC_INLINE void __enable_irq(void)
  59:Drivers/CMSIS/Include/cmsis_gcc.h **** {
  60:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** }
  62:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
  66:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
  67:Drivers/CMSIS/Include/cmsis_gcc.h ****   Can only be executed in Privileged modes.
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
ARM GAS  /tmp/cci2zZmt.s 			page 7


  69:Drivers/CMSIS/Include/cmsis_gcc.h **** __attribute__( ( always_inline ) ) __STATIC_INLINE void __disable_irq(void)
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** {
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
  72:Drivers/CMSIS/Include/cmsis_gcc.h **** }
  73:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  74:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  75:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Control Register
  77:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the Control Register.
  78:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Control Register value
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  80:Drivers/CMSIS/Include/cmsis_gcc.h **** __attribute__( ( always_inline ) ) __STATIC_INLINE uint32_t __get_CONTROL(void)
  81:Drivers/CMSIS/Include/cmsis_gcc.h **** {
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
  83:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control" : "=r" (result) );
  85:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** }
  87:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  88:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  89:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Set Control Register
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Writes the given value to the Control Register.
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
  93:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** __attribute__( ( always_inline ) ) __STATIC_INLINE void __set_CONTROL(uint32_t control)
  95:Drivers/CMSIS/Include/cmsis_gcc.h **** {
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control, %0" : : "r" (control) : "memory");
  97:Drivers/CMSIS/Include/cmsis_gcc.h **** }
  98:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  99:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 100:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 101:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get IPSR Register
 102:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the IPSR Register.
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               IPSR Register value
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 105:Drivers/CMSIS/Include/cmsis_gcc.h **** __attribute__( ( always_inline ) ) __STATIC_INLINE uint32_t __get_IPSR(void)
 106:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 108:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 109:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, ipsr" : "=r" (result) );
  93              		.loc 2 109 0
  94              		.syntax unified
  95              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
  96 0000 EFF30583 		MRS r3, ipsr
  97              	@ 0 "" 2
  98              		.thumb
  99              		.syntax unified
 100              	.LBE82:
 101              	.LBE81:
 102              	.LBE80:
 188:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 103              		.loc 1 188 0
 104 0004 0BB1     		cbz	r3, .L4
 189:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return xTaskGetTickCountFromISR();
 105              		.loc 1 189 0
 106 0006 FFF7FEBF 		b	xTaskGetTickCountFromISR
ARM GAS  /tmp/cci2zZmt.s 			page 8


 107              	.LVL2:
 108              	.L4:
 190:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 191:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
 192:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return xTaskGetTickCount();
 109              		.loc 1 192 0
 110 000a FFF7FEBF 		b	xTaskGetTickCount
 111              	.LVL3:
 112              		.cfi_endproc
 113              	.LFE31:
 115              		.section	.text.osThreadCreate,"ax",%progbits
 116              		.align	1
 117              		.global	osThreadCreate
 118              		.syntax unified
 119              		.thumb
 120              		.thumb_func
 121              		.fpu softvfp
 123              	osThreadCreate:
 124              	.LFB32:
 193:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 194:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 195:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif    // System Timer available
 196:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /*********************** Thread Management *****************************/
 197:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 198:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Create a thread and add it to Active Threads and set it to state READY.
 199:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  thread_def    thread definition referenced with \ref osThread.
 200:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  argument      pointer that is passed to the thread function as start argument.
 201:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval thread ID for reference by other functions or NULL in case of error.
 202:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osThreadCreate shall be consistent in every CMSIS-RTOS.
 203:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 204:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osThreadId osThreadCreate (const osThreadDef_t *thread_def, void *argument)
 205:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 125              		.loc 1 205 0
 126              		.cfi_startproc
 127              		@ args = 0, pretend = 0, frame = 8
 128              		@ frame_needed = 0, uses_anonymous_args = 0
 129              	.LVL4:
 130 0000 70B5     		push	{r4, r5, r6, lr}
 131              	.LCFI2:
 132              		.cfi_def_cfa_offset 16
 133              		.cfi_offset 4, -16
 134              		.cfi_offset 5, -12
 135              		.cfi_offset 6, -8
 136              		.cfi_offset 14, -4
 137 0002 0025     		movs	r5, #0
 206:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TaskHandle_t handle;
 207:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 208:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 209:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xTaskCreate((TaskFunction_t)thread_def->pthread,(const portCHAR *)thread_def->name,
 138              		.loc 1 209 0
 139 0004 B0F90840 		ldrsh	r4, [r0, #8]
 140              	.LVL5:
 205:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TaskHandle_t handle;
 141              		.loc 1 205 0
 142 0008 86B0     		sub	sp, sp, #24
 143              	.LCFI3:
 144              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/cci2zZmt.s 			page 9


 145              	.LBB83:
 146              	.LBB84:
 109:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     fpriority += (priority - osPriorityIdle);
 147              		.loc 1 109 0
 148 000a 842C     		cmp	r4, #132
 107:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 149              		.loc 1 107 0
 150 000c 08BF     		it	eq
 151 000e 2C46     		moveq	r4, r5
 152              	.LVL6:
 153              	.LBE84:
 154              	.LBE83:
 155              		.loc 1 209 0
 156 0010 028A     		ldrh	r2, [r0, #16]
 157              	.LBB86:
 158              	.LBB85:
 110:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 159              		.loc 1 110 0
 160 0012 18BF     		it	ne
 161 0014 0334     		addne	r4, r4, #3
 162              	.LVL7:
 163              	.LBE85:
 164              	.LBE86:
 205:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TaskHandle_t handle;
 165              		.loc 1 205 0
 166 0016 0B46     		mov	r3, r1
 167              		.loc 1 209 0
 168 0018 90E84200 		ldm	r0, {r1, r6}
 169              	.LVL8:
 170 001c 05A8     		add	r0, sp, #20
 171              	.LVL9:
 172 001e 0190     		str	r0, [sp, #4]
 173 0020 0395     		str	r5, [sp, #12]
 174 0022 0295     		str	r5, [sp, #8]
 175 0024 0094     		str	r4, [sp]
 176 0026 3046     		mov	r0, r6
 177 0028 FFF7FEFF 		bl	xTaskGenericCreate
 178              	.LVL10:
 179 002c 0128     		cmp	r0, #1
 210:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****               thread_def->stacksize, argument, makeFreeRtosPriority(thread_def->tpriority),
 211:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****               &handle) != pdPASS)  {
 212:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return NULL;
 180              		.loc 1 212 0
 181 002e 14BF     		ite	ne
 182 0030 0020     		movne	r0, #0
 213:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 214:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 215:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return handle;
 183              		.loc 1 215 0
 184 0032 0598     		ldreq	r0, [sp, #20]
 216:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 185              		.loc 1 216 0
 186 0034 06B0     		add	sp, sp, #24
 187              	.LCFI4:
 188              		.cfi_def_cfa_offset 16
 189              		@ sp needed
 190 0036 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/cci2zZmt.s 			page 10


 191              		.cfi_endproc
 192              	.LFE32:
 194              		.section	.text.osThreadGetId,"ax",%progbits
 195              		.align	1
 196              		.global	osThreadGetId
 197              		.syntax unified
 198              		.thumb
 199              		.thumb_func
 200              		.fpu softvfp
 202              	osThreadGetId:
 203              	.LFB33:
 217:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 218:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 219:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Return the thread ID of the current running thread.
 220:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval thread ID for reference by other functions or NULL in case of error.
 221:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osThreadGetId shall be consistent in every CMSIS-RTOS.
 222:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 223:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osThreadId osThreadGetId (void)
 224:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 204              		.loc 1 224 0
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 0
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208              		@ link register save eliminated.
 225:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if ( ( INCLUDE_xTaskGetCurrentTaskHandle == 1 ) || ( configUSE_MUTEXES == 1 ) )
 226:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return xTaskGetCurrentTaskHandle();
 209              		.loc 1 226 0
 210 0000 FFF7FEBF 		b	xTaskGetCurrentTaskHandle
 211              	.LVL11:
 212              		.cfi_endproc
 213              	.LFE33:
 215              		.section	.text.osThreadTerminate,"ax",%progbits
 216              		.align	1
 217              		.global	osThreadTerminate
 218              		.syntax unified
 219              		.thumb
 220              		.thumb_func
 221              		.fpu softvfp
 223              	osThreadTerminate:
 224              	.LFB34:
 227:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 228:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	return NULL;
 229:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 230:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 231:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 232:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 233:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Terminate execution of a thread and remove it from Active Threads.
 234:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id   thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
 235:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 236:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osThreadTerminate shall be consistent in every CMSIS-RTOS.
 237:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 238:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadTerminate (osThreadId thread_id)
 239:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 225              		.loc 1 239 0
 226              		.cfi_startproc
 227              		@ args = 0, pretend = 0, frame = 0
 228              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/cci2zZmt.s 			page 11


 229              	.LVL12:
 230 0000 08B5     		push	{r3, lr}
 231              	.LCFI5:
 232              		.cfi_def_cfa_offset 8
 233              		.cfi_offset 3, -8
 234              		.cfi_offset 14, -4
 240:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_vTaskDelete == 1)
 241:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskDelete(thread_id);
 235              		.loc 1 241 0
 236 0002 FFF7FEFF 		bl	vTaskDelete
 237              	.LVL13:
 242:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 243:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 244:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorOS;
 245:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 246:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 238              		.loc 1 246 0
 239 0006 0020     		movs	r0, #0
 240 0008 08BD     		pop	{r3, pc}
 241              		.cfi_endproc
 242              	.LFE34:
 244              		.section	.text.osThreadYield,"ax",%progbits
 245              		.align	1
 246              		.global	osThreadYield
 247              		.syntax unified
 248              		.thumb
 249              		.thumb_func
 250              		.fpu softvfp
 252              	osThreadYield:
 253              	.LFB35:
 247:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 248:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 249:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Pass control to next thread that is in state \b READY.
 250:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function.
 251:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osThreadYield shall be consistent in every CMSIS-RTOS.
 252:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 253:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadYield (void)
 254:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 254              		.loc 1 254 0
 255              		.cfi_startproc
 256              		@ args = 0, pretend = 0, frame = 0
 257              		@ frame_needed = 0, uses_anonymous_args = 0
 258 0000 08B5     		push	{r3, lr}
 259              	.LCFI6:
 260              		.cfi_def_cfa_offset 8
 261              		.cfi_offset 3, -8
 262              		.cfi_offset 14, -4
 255:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   taskYIELD();
 263              		.loc 1 255 0
 264 0002 FFF7FEFF 		bl	vPortYield
 265              	.LVL14:
 256:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 257:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 258:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 266              		.loc 1 258 0
 267 0006 0020     		movs	r0, #0
 268 0008 08BD     		pop	{r3, pc}
ARM GAS  /tmp/cci2zZmt.s 			page 12


 269              		.cfi_endproc
 270              	.LFE35:
 272              		.section	.text.osThreadSetPriority,"ax",%progbits
 273              		.align	1
 274              		.global	osThreadSetPriority
 275              		.syntax unified
 276              		.thumb
 277              		.thumb_func
 278              		.fpu softvfp
 280              	osThreadSetPriority:
 281              	.LFB36:
 259:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 260:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 261:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief   Change priority of an active thread.
 262:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id     thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
 263:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   priority      new priority value for the thread function.
 264:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 265:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osThreadSetPriority shall be consistent in every CMSIS-RTOS.
 266:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 267:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadSetPriority (osThreadId thread_id, osPriority priority)
 268:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 282              		.loc 1 268 0
 283              		.cfi_startproc
 284              		@ args = 0, pretend = 0, frame = 0
 285              		@ frame_needed = 0, uses_anonymous_args = 0
 286              	.LVL15:
 287 0000 08B5     		push	{r3, lr}
 288              	.LCFI7:
 289              		.cfi_def_cfa_offset 8
 290              		.cfi_offset 3, -8
 291              		.cfi_offset 14, -4
 292              	.LBB87:
 293              	.LBB88:
 109:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     fpriority += (priority - osPriorityIdle);
 294              		.loc 1 109 0
 295 0002 8429     		cmp	r1, #132
 110:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 296              		.loc 1 110 0
 297 0004 14BF     		ite	ne
 298 0006 0331     		addne	r1, r1, #3
 299              	.LVL16:
 107:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 300              		.loc 1 107 0
 301 0008 0021     		moveq	r1, #0
 302              	.LVL17:
 303              	.LBE88:
 304              	.LBE87:
 269:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_vTaskPrioritySet == 1)
 270:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskPrioritySet(thread_id, makeFreeRtosPriority(priority));
 305              		.loc 1 270 0
 306 000a FFF7FEFF 		bl	vTaskPrioritySet
 307              	.LVL18:
 271:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 272:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 273:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorOS;
 274:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 275:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
ARM GAS  /tmp/cci2zZmt.s 			page 13


 308              		.loc 1 275 0
 309 000e 0020     		movs	r0, #0
 310 0010 08BD     		pop	{r3, pc}
 311              		.cfi_endproc
 312              	.LFE36:
 314              		.section	.text.osThreadGetPriority,"ax",%progbits
 315              		.align	1
 316              		.global	osThreadGetPriority
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 320              		.fpu softvfp
 322              	osThreadGetPriority:
 323              	.LFB37:
 276:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 277:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 278:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief   Get current priority of an active thread.
 279:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id     thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
 280:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  current priority value of the thread function.
 281:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osThreadGetPriority shall be consistent in every CMSIS-RTOS.
 282:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 283:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osPriority osThreadGetPriority (osThreadId thread_id)
 284:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 324              		.loc 1 284 0
 325              		.cfi_startproc
 326              		@ args = 0, pretend = 0, frame = 0
 327              		@ frame_needed = 0, uses_anonymous_args = 0
 328              	.LVL19:
 329 0000 08B5     		push	{r3, lr}
 330              	.LCFI8:
 331              		.cfi_def_cfa_offset 8
 332              		.cfi_offset 3, -8
 333              		.cfi_offset 14, -4
 334              	.LBB89:
 335              	.LBB90:
 336              	.LBB91:
 337              		.loc 2 109 0
 338              		.syntax unified
 339              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 340 0002 EFF30583 		MRS r3, ipsr
 341              	@ 0 "" 2
 342              		.thumb
 343              		.syntax unified
 344              	.LBE91:
 345              	.LBE90:
 346              	.LBE89:
 285:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_uxTaskPriorityGet == 1)
 286:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode())
 347              		.loc 1 286 0
 348 0006 2BB1     		cbz	r3, .L17
 287:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 288:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return makeCmsisPriority(uxTaskPriorityGetFromISR(thread_id));  
 349              		.loc 1 288 0
 350 0008 FFF7FEFF 		bl	uxTaskPriorityGetFromISR
 351              	.LVL20:
 352              	.L22:
 353              	.LBB92:
ARM GAS  /tmp/cci2zZmt.s 			page 14


 354              	.LBB93:
 122:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     priority = (osPriority)((int)osPriorityIdle + (int)(fpriority - tskIDLE_PRIORITY));
 355              		.loc 1 122 0
 356 000c 0628     		cmp	r0, #6
 357 000e 04D9     		bls	.L21
 120:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 358              		.loc 1 120 0
 359 0010 8420     		movs	r0, #132
 360              	.LVL21:
 361 0012 08BD     		pop	{r3, pc}
 362              	.LVL22:
 363              	.L17:
 364              	.LBE93:
 365              	.LBE92:
 289:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 290:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else
 291:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {  
 292:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return makeCmsisPriority(uxTaskPriorityGet(thread_id));
 366              		.loc 1 292 0
 367 0014 FFF7FEFF 		bl	uxTaskPriorityGet
 368              	.LVL23:
 369 0018 F8E7     		b	.L22
 370              	.LVL24:
 371              	.L21:
 372              	.LBB94:
 373              	.LBB95:
 123:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 374              		.loc 1 123 0
 375 001a 0338     		subs	r0, r0, #3
 376              	.LVL25:
 377 001c 00B2     		sxth	r0, r0
 378              	.LVL26:
 379              	.LBE95:
 380              	.LBE94:
 293:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 294:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 295:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osPriorityError;
 296:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 297:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 381              		.loc 1 297 0
 382 001e 08BD     		pop	{r3, pc}
 383              		.cfi_endproc
 384              	.LFE37:
 386              		.section	.text.osDelay,"ax",%progbits
 387              		.align	1
 388              		.global	osDelay
 389              		.syntax unified
 390              		.thumb
 391              		.thumb_func
 392              		.fpu softvfp
 394              	osDelay:
 395              	.LFB38:
 298:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 299:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /*********************** Generic Wait Functions *******************************/
 300:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 301:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief   Wait for Timeout (Time Delay)
 302:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   millisec      time delay value
ARM GAS  /tmp/cci2zZmt.s 			page 15


 303:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 304:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 305:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osDelay (uint32_t millisec)
 306:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 396              		.loc 1 306 0
 397              		.cfi_startproc
 398              		@ args = 0, pretend = 0, frame = 0
 399              		@ frame_needed = 0, uses_anonymous_args = 0
 400              	.LVL27:
 401 0000 08B5     		push	{r3, lr}
 402              	.LCFI9:
 403              		.cfi_def_cfa_offset 8
 404              		.cfi_offset 3, -8
 405              		.cfi_offset 14, -4
 307:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if INCLUDE_vTaskDelay
 308:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks = millisec / portTICK_PERIOD_MS;
 309:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 310:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskDelay(ticks ? ticks : 1);          /* Minimum delay = 1 tick */
 406              		.loc 1 310 0
 407 0002 0028     		cmp	r0, #0
 408 0004 08BF     		it	eq
 409 0006 0120     		moveq	r0, #1
 410              	.LVL28:
 411 0008 FFF7FEFF 		bl	vTaskDelay
 412              	.LVL29:
 311:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 312:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 313:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 314:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) millisec;
 315:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 316:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorResource;
 317:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 318:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 413              		.loc 1 318 0
 414 000c 0020     		movs	r0, #0
 415 000e 08BD     		pop	{r3, pc}
 416              		.cfi_endproc
 417              	.LFE38:
 419              		.section	.text.osTimerCreate,"ax",%progbits
 420              		.align	1
 421              		.global	osTimerCreate
 422              		.syntax unified
 423              		.thumb
 424              		.thumb_func
 425              		.fpu softvfp
 427              	osTimerCreate:
 428              	.LFB39:
 319:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 320:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (defined (osFeature_Wait)  &&  (osFeature_Wait != 0)) /* Generic Wait available */
 321:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 322:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Wait for Signal, Message, Mail, or Timeout
 323:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   millisec  timeout value or 0 in case of no time-out
 324:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  event that contains signal, message, or mail information or error code.
 325:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osWait shall be consistent in every CMSIS-RTOS.
 326:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 327:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osEvent osWait (uint32_t millisec);
 328:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
ARM GAS  /tmp/cci2zZmt.s 			page 16


 329:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif  /* Generic Wait available */
 330:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 331:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /***********************  Timer Management Functions ***************************/
 332:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 333:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Create a timer.
 334:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  timer_def     timer object referenced with \ref osTimer.
 335:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  type          osTimerOnce for one-shot or osTimerPeriodic for periodic behavior.
 336:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  argument      argument to the timer call back function.
 337:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  timer ID for reference by other functions or NULL in case of error.
 338:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osTimerCreate shall be consistent in every CMSIS-RTOS.
 339:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 340:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osTimerId osTimerCreate (const osTimerDef_t *timer_def, os_timer_type type, void *argument)
 341:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 429              		.loc 1 341 0
 430              		.cfi_startproc
 431              		@ args = 0, pretend = 0, frame = 0
 432              		@ frame_needed = 0, uses_anonymous_args = 0
 433              		@ link register save eliminated.
 434              	.LVL30:
 342:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_TIMERS == 1)
 343:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return xTimerCreate((const char *)"",
 344:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****                       1, // period should be filled when starting the Timer using osTimerStart
 345:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****                       (type == osTimerPeriodic) ? pdTRUE : pdFALSE,
 346:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****                       (void *) argument,
 347:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****                       (TaskFunction_t)timer_def->ptimer);
 348:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else 
 349:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	return NULL;
 350:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 351:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 435              		.loc 1 351 0
 436 0000 0020     		movs	r0, #0
 437              	.LVL31:
 438 0002 7047     		bx	lr
 439              		.cfi_endproc
 440              	.LFE39:
 442              		.section	.text.osTimerStart,"ax",%progbits
 443              		.align	1
 444              		.global	osTimerStart
 445              		.syntax unified
 446              		.thumb
 447              		.thumb_func
 448              		.fpu softvfp
 450              	osTimerStart:
 451              	.LFB40:
 352:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 353:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 354:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Start or restart a timer.
 355:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  timer_id      timer ID obtained by \ref osTimerCreate.
 356:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec      time delay value of the timer.
 357:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function
 358:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osTimerStart shall be consistent in every CMSIS-RTOS.
 359:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 360:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osTimerStart (osTimerId timer_id, uint32_t millisec)
 361:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 452              		.loc 1 361 0
 453              		.cfi_startproc
 454              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cci2zZmt.s 			page 17


 455              		@ frame_needed = 0, uses_anonymous_args = 0
 456              		@ link register save eliminated.
 457              	.LVL32:
 362:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osStatus result = osOK;
 363:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_TIMERS == 1)  
 364:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 365:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks = millisec / portTICK_PERIOD_MS;
 366:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 367:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (ticks == 0)
 368:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = 1;
 369:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     
 370:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) 
 371:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 372:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xTimerChangePeriodFromISR(timer_id, ticks, &taskWoken) != pdPASS)
 373:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
 374:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       result = osErrorOS;
 375:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 376:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else
 377:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
 378:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       portEND_SWITCHING_ISR(taskWoken);     
 379:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 380:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 381:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else 
 382:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 383:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xTimerChangePeriod(timer_id, ticks, 0) != pdPASS)
 384:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       result = osErrorOS;
 385:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 386:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 387:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else 
 388:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   result = osErrorOS;
 389:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 390:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
 391:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 458              		.loc 1 391 0
 459 0000 FF20     		movs	r0, #255
 460              	.LVL33:
 461 0002 7047     		bx	lr
 462              		.cfi_endproc
 463              	.LFE40:
 465              		.section	.text.osTimerStop,"ax",%progbits
 466              		.align	1
 467              		.global	osTimerStop
 468              		.syntax unified
 469              		.thumb
 470              		.thumb_func
 471              		.fpu softvfp
 473              	osTimerStop:
 474              	.LFB83:
 475              		.cfi_startproc
 476              		@ args = 0, pretend = 0, frame = 0
 477              		@ frame_needed = 0, uses_anonymous_args = 0
 478              		@ link register save eliminated.
 479 0000 FF20     		movs	r0, #255
 480 0002 7047     		bx	lr
 481              		.cfi_endproc
 482              	.LFE83:
 484              		.section	.text.osTimerDelete,"ax",%progbits
ARM GAS  /tmp/cci2zZmt.s 			page 18


 485              		.align	1
 486              		.global	osTimerDelete
 487              		.syntax unified
 488              		.thumb
 489              		.thumb_func
 490              		.fpu softvfp
 492              	osTimerDelete:
 493              	.LFB42:
 392:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 393:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 394:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Stop a timer.
 395:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  timer_id      timer ID obtained by \ref osTimerCreate
 396:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 397:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osTimerStop shall be consistent in every CMSIS-RTOS.
 398:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 399:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osTimerStop (osTimerId timer_id)
 400:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 401:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osStatus result = osOK;
 402:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_TIMERS == 1)  
 403:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 404:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 405:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 406:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xTimerStopFromISR(timer_id, &taskWoken) != pdPASS) {
 407:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 408:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 409:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
 410:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 411:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
 412:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xTimerStop(timer_id, 0) != pdPASS) {
 413:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       result = osErrorOS;
 414:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 415:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 416:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else 
 417:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   result = osErrorOS;
 418:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif 
 419:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
 420:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 421:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 422:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 423:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Delete a timer.
 424:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  timer_id      timer ID obtained by \ref osTimerCreate
 425:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 426:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osTimerDelete shall be consistent in every CMSIS-RTOS.
 427:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 428:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osTimerDelete (osTimerId timer_id)
 429:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 494              		.loc 1 429 0
 495              		.cfi_startproc
 496              		@ args = 0, pretend = 0, frame = 0
 497              		@ frame_needed = 0, uses_anonymous_args = 0
 498              		@ link register save eliminated.
 499              	.LVL34:
 430:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus result = osOK;
 431:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 432:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_TIMERS == 1)
 433:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 434:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****    if (inHandlerMode()) {
ARM GAS  /tmp/cci2zZmt.s 			page 19


 435:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****      return osErrorISR;
 436:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 437:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else { 
 438:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if ((xTimerDelete(timer_id, osWaitForever )) != pdPASS) {
 439:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       result = osErrorOS;
 440:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 441:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   } 
 442:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     
 443:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else 
 444:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   result = osErrorOS;
 445:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif 
 446:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  
 447:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
 448:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 500              		.loc 1 448 0
 501 0000 FF20     		movs	r0, #255
 502              	.LVL35:
 503 0002 7047     		bx	lr
 504              		.cfi_endproc
 505              	.LFE42:
 507              		.section	.text.osSignalSet,"ax",%progbits
 508              		.align	1
 509              		.global	osSignalSet
 510              		.syntax unified
 511              		.thumb
 512              		.thumb_func
 513              		.fpu softvfp
 515              	osSignalSet:
 516              	.LFB43:
 449:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 450:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /***************************  Signal Management ********************************/
 451:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 452:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Set the specified Signal Flags of an active thread.
 453:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  thread_id     thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
 454:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  signals       specifies the signal flags of the thread that should be set.
 455:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  osOK if successful, osErrorOS if failed .
 456:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSignalSet shall be consistent in every CMSIS-RTOS.
 457:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 458:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** int32_t osSignalSet (osThreadId thread_id, int32_t signal)
 459:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 517              		.loc 1 459 0
 518              		.cfi_startproc
 519              		@ args = 0, pretend = 0, frame = 8
 520              		@ frame_needed = 0, uses_anonymous_args = 0
 521              	.LVL36:
 522 0000 1FB5     		push	{r0, r1, r2, r3, r4, lr}
 523              	.LCFI10:
 524              		.cfi_def_cfa_offset 24
 525              		.cfi_offset 4, -8
 526              		.cfi_offset 14, -4
 460:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if( configUSE_TASK_NOTIFICATIONS == 1 )	
 461:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   BaseType_t xHigherPriorityTaskWoken = pdFALSE;
 527              		.loc 1 461 0
 528 0002 0024     		movs	r4, #0
 529 0004 0394     		str	r4, [sp, #12]
 530              	.LBB96:
 531              	.LBB97:
ARM GAS  /tmp/cci2zZmt.s 			page 20


 532              	.LBB98:
 533              		.loc 2 109 0
 534              		.syntax unified
 535              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 536 0006 EFF30583 		MRS r3, ipsr
 537              	@ 0 "" 2
 538              		.thumb
 539              		.syntax unified
 540              	.LBE98:
 541              	.LBE97:
 542              	.LBE96:
 462:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 463:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode())
 543              		.loc 1 463 0
 544 000a 93B1     		cbz	r3, .L30
 464:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 465:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if(xTaskNotifyFromISR( thread_id, (uint32_t)signal, eSetBits, &xHigherPriorityTaskWoken ) != pd
 545              		.loc 1 465 0
 546 000c 03AB     		add	r3, sp, #12
 547 000e 0093     		str	r3, [sp]
 548 0010 0122     		movs	r2, #1
 549 0012 2346     		mov	r3, r4
 550 0014 FFF7FEFF 		bl	xTaskGenericNotifyFromISR
 551              	.LVL37:
 552 0018 0128     		cmp	r0, #1
 553 001a 02D0     		beq	.L31
 554              	.L34:
 466:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 555              		.loc 1 466 0
 556 001c FF20     		movs	r0, #255
 557              	.L29:
 467:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 468:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portYIELD_FROM_ISR( xHigherPriorityTaskWoken );
 469:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
 470:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if(xTaskNotify( thread_id, (uint32_t)signal, eSetBits) != pdPASS )
 471:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 472:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
 473:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 474:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 475:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 476:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 477:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) thread_id;
 478:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) signal;
 479:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 480:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorOS; /* Task Notification not supported */ 	
 481:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 482:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 558              		.loc 1 482 0
 559 001e 04B0     		add	sp, sp, #16
 560              	.LCFI11:
 561              		.cfi_remember_state
 562              		.cfi_def_cfa_offset 8
 563              		@ sp needed
 564 0020 10BD     		pop	{r4, pc}
 565              	.L31:
 566              	.LCFI12:
 567              		.cfi_restore_state
ARM GAS  /tmp/cci2zZmt.s 			page 21


 468:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
 568              		.loc 1 468 0
 569 0022 039B     		ldr	r3, [sp, #12]
 570 0024 1BB1     		cbz	r3, .L33
 468:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
 571              		.loc 1 468 0 is_stmt 0 discriminator 1
 572 0026 4FF08052 		mov	r2, #268435456
 573 002a 054B     		ldr	r3, .L38
 574 002c 1A60     		str	r2, [r3]
 575              	.L33:
 475:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 576              		.loc 1 475 0 is_stmt 1
 577 002e 0020     		movs	r0, #0
 578 0030 F5E7     		b	.L29
 579              	.LVL38:
 580              	.L30:
 470:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 581              		.loc 1 470 0
 582 0032 0122     		movs	r2, #1
 583 0034 FFF7FEFF 		bl	xTaskGenericNotify
 584              	.LVL39:
 585 0038 0128     		cmp	r0, #1
 586 003a EFD1     		bne	.L34
 587 003c F7E7     		b	.L33
 588              	.L39:
 589 003e 00BF     		.align	2
 590              	.L38:
 591 0040 04ED00E0 		.word	-536810236
 592              		.cfi_endproc
 593              	.LFE43:
 595              		.section	.text.osSignalWait,"ax",%progbits
 596              		.align	1
 597              		.global	osSignalWait
 598              		.syntax unified
 599              		.thumb
 600              		.thumb_func
 601              		.fpu softvfp
 603              	osSignalWait:
 604              	.LFB44:
 483:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 484:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 485:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Clear the specified Signal Flags of an active thread.
 486:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  thread_id  thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
 487:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  signals    specifies the signal flags of the thread that shall be cleared.
 488:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  previous signal flags of the specified thread or 0x80000000 in case of incorrect paramet
 489:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSignalClear shall be consistent in every CMSIS-RTOS.
 490:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 491:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** int32_t osSignalClear (osThreadId thread_id, int32_t signal);
 492:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 493:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 494:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Wait for one or more Signal Flags to become signaled for the current \b RUNNING thread.
 495:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  signals   wait until all specified signal flags set or 0 for any single signal flag.
 496:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec  timeout value or 0 in case of no time-out.
 497:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  event flag information or error code.
 498:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSignalWait shall be consistent in every CMSIS-RTOS.
 499:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 500:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osEvent osSignalWait (int32_t signals, uint32_t millisec)
ARM GAS  /tmp/cci2zZmt.s 			page 22


 501:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 605              		.loc 1 501 0
 606              		.cfi_startproc
 607              		@ args = 0, pretend = 0, frame = 16
 608              		@ frame_needed = 0, uses_anonymous_args = 0
 609              	.LVL40:
 502:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osEvent ret;
 503:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 504:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if( configUSE_TASK_NOTIFICATIONS == 1 )
 505:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	
 506:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 507:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 508:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ret.value.signals = 0;  
 610              		.loc 1 508 0
 611 0000 0023     		movs	r3, #0
 501:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osEvent ret;
 612              		.loc 1 501 0
 613 0002 30B5     		push	{r4, r5, lr}
 614              	.LCFI13:
 615              		.cfi_def_cfa_offset 12
 616              		.cfi_offset 4, -12
 617              		.cfi_offset 5, -8
 618              		.cfi_offset 14, -4
 619 0004 85B0     		sub	sp, sp, #20
 620              	.LCFI14:
 621              		.cfi_def_cfa_offset 32
 501:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osEvent ret;
 622              		.loc 1 501 0
 623 0006 0446     		mov	r4, r0
 624 0008 1546     		mov	r5, r2
 625              		.loc 1 508 0
 626 000a 0293     		str	r3, [sp, #8]
 627              	.LVL41:
 628              	.LBB99:
 629              	.LBB100:
 630              	.LBB101:
 631              		.loc 2 109 0
 632              		.syntax unified
 633              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 634 000c EFF30580 		MRS r0, ipsr
 635              	@ 0 "" 2
 636              	.LVL42:
 637              		.thumb
 638              		.syntax unified
 639              	.LBE101:
 640              	.LBE100:
 641              	.LBE99:
 509:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
 510:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) {
 511:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
 512:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 513:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) {
 514:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
 515:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) {
 516:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
 517:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 518:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
ARM GAS  /tmp/cci2zZmt.s 			page 23


 519:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 520:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode())
 642              		.loc 1 520 0
 643 0010 10B1     		cbz	r0, .L41
 521:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 522:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ret.status = osErrorISR;  /*Not allowed in ISR*/
 644              		.loc 1 522 0
 645 0012 8223     		movs	r3, #130
 646              	.LVL43:
 647              	.L46:
 523:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 524:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else
 525:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 526:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if(xTaskNotifyWait( 0,(uint32_t) signals, (uint32_t *)&ret.value.signals, ticks) != pdTRUE)
 527:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
 528:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       if(ticks == 0)  ret.status = osOK;
 529:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       else  ret.status = osEventTimeout;
 530:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 531:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else if(ret.value.signals < 0)
 532:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
 533:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ret.status =  osErrorValue;     
 534:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 535:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else  ret.status =  osEventSignal;
 648              		.loc 1 535 0
 649 0014 0193     		str	r3, [sp, #4]
 650 0016 07E0     		b	.L42
 651              	.LVL44:
 652              	.L41:
 526:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
 653              		.loc 1 526 0
 654 0018 1346     		mov	r3, r2
 655 001a 02AA     		add	r2, sp, #8
 656              	.LVL45:
 657 001c FFF7FEFF 		bl	xTaskNotifyWait
 658              	.LVL46:
 659 0020 0128     		cmp	r0, #1
 660 0022 0BD0     		beq	.L43
 528:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       else  ret.status = osEventTimeout;
 661              		.loc 1 528 0
 662 0024 45B9     		cbnz	r5, .L44
 528:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       else  ret.status = osEventTimeout;
 663              		.loc 1 528 0 is_stmt 0 discriminator 1
 664 0026 0195     		str	r5, [sp, #4]
 665              	.L42:
 536:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 537:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 538:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) signals;
 539:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) millisec;
 540:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	
 541:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ret.status =  osErrorOS;	/* Task Notification not supported */
 542:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 543:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 544:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return ret;
 666              		.loc 1 544 0 is_stmt 1
 667 0028 04AB     		add	r3, sp, #16
 668 002a 13E90700 		ldmdb	r3, {r0, r1, r2}
 669 002e 84E80700 		stm	r4, {r0, r1, r2}
ARM GAS  /tmp/cci2zZmt.s 			page 24


 545:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 670              		.loc 1 545 0
 671 0032 2046     		mov	r0, r4
 672 0034 05B0     		add	sp, sp, #20
 673              	.LCFI15:
 674              		.cfi_remember_state
 675              		.cfi_def_cfa_offset 12
 676              		@ sp needed
 677 0036 30BD     		pop	{r4, r5, pc}
 678              	.LVL47:
 679              	.L44:
 680              	.LCFI16:
 681              		.cfi_restore_state
 529:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 682              		.loc 1 529 0
 683 0038 4023     		movs	r3, #64
 684 003a EBE7     		b	.L46
 685              	.L43:
 531:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
 686              		.loc 1 531 0
 687 003c 029B     		ldr	r3, [sp, #8]
 688 003e 002B     		cmp	r3, #0
 533:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 689              		.loc 1 533 0
 690 0040 B4BF     		ite	lt
 691 0042 8623     		movlt	r3, #134
 535:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 692              		.loc 1 535 0
 693 0044 0823     		movge	r3, #8
 694 0046 E5E7     		b	.L46
 695              		.cfi_endproc
 696              	.LFE44:
 698              		.section	.text.osMutexCreate,"ax",%progbits
 699              		.align	1
 700              		.global	osMutexCreate
 701              		.syntax unified
 702              		.thumb
 703              		.thumb_func
 704              		.fpu softvfp
 706              	osMutexCreate:
 707              	.LFB45:
 546:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 547:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /****************************  Mutex Management ********************************/
 548:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 549:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Create and Initialize a Mutex object
 550:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  mutex_def     mutex definition referenced with \ref osMutex.
 551:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  mutex ID for reference by other functions or NULL in case of error.
 552:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMutexCreate shall be consistent in every CMSIS-RTOS.
 553:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 554:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osMutexId osMutexCreate (const osMutexDef_t *mutex_def)
 555:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 708              		.loc 1 555 0
 709              		.cfi_startproc
 710              		@ args = 0, pretend = 0, frame = 0
 711              		@ frame_needed = 0, uses_anonymous_args = 0
 712              		@ link register save eliminated.
 713              	.LVL48:
ARM GAS  /tmp/cci2zZmt.s 			page 25


 556:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if ( configUSE_MUTEXES == 1)
 557:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return xSemaphoreCreateMutex(); 
 714              		.loc 1 557 0
 715 0000 0120     		movs	r0, #1
 716              	.LVL49:
 717 0002 FFF7FEBF 		b	xQueueCreateMutex
 718              	.LVL50:
 719              		.cfi_endproc
 720              	.LFE45:
 722              		.section	.text.osMutexWait,"ax",%progbits
 723              		.align	1
 724              		.global	osMutexWait
 725              		.syntax unified
 726              		.thumb
 727              		.thumb_func
 728              		.fpu softvfp
 730              	osMutexWait:
 731              	.LFB46:
 558:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 559:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	return NULL;
 560:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 561:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 562:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 563:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 564:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Wait until a Mutex becomes available
 565:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param mutex_id      mutex ID obtained by \ref osMutexCreate.
 566:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param millisec      timeout value or 0 in case of no time-out.
 567:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 568:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMutexWait shall be consistent in every CMSIS-RTOS.
 569:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 570:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osMutexWait (osMutexId mutex_id, uint32_t millisec)
 571:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 732              		.loc 1 571 0
 733              		.cfi_startproc
 734              		@ args = 0, pretend = 0, frame = 8
 735              		@ frame_needed = 0, uses_anonymous_args = 0
 736              	.LVL51:
 737 0000 13B5     		push	{r0, r1, r4, lr}
 738              	.LCFI17:
 739              		.cfi_def_cfa_offset 16
 740              		.cfi_offset 4, -8
 741              		.cfi_offset 14, -4
 572:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 573:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;  
 742              		.loc 1 573 0
 743 0002 0024     		movs	r4, #0
 571:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 744              		.loc 1 571 0
 745 0004 0A46     		mov	r2, r1
 746              		.loc 1 573 0
 747 0006 0194     		str	r4, [sp, #4]
 574:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 575:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 576:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (mutex_id == NULL) {
 748              		.loc 1 576 0
 749 0008 C8B1     		cbz	r0, .L54
 750              	.LVL52:
ARM GAS  /tmp/cci2zZmt.s 			page 26


 751              	.LBB102:
 752              	.LBB103:
 753              	.LBB104:
 754              		.loc 2 109 0
 755              		.syntax unified
 756              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 757 000a EFF30583 		MRS r3, ipsr
 758              	@ 0 "" 2
 759              		.thumb
 760              		.syntax unified
 761              	.LBE104:
 762              	.LBE103:
 763              	.LBE102:
 577:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
 578:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 579:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 580:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
 581:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) {
 582:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
 583:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 584:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) {
 585:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
 586:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) {
 587:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
 588:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 589:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 590:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 591:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 764              		.loc 1 591 0
 765 000e 83B1     		cbz	r3, .L50
 592:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xSemaphoreTakeFromISR(mutex_id, &taskWoken) != pdTRUE) {
 766              		.loc 1 592 0
 767 0010 01AA     		add	r2, sp, #4
 768 0012 2146     		mov	r1, r4
 769              	.LVL53:
 770 0014 FFF7FEFF 		bl	xQueueReceiveFromISR
 771              	.LVL54:
 772 0018 0128     		cmp	r0, #1
 773 001a 02D0     		beq	.L51
 774              	.L53:
 593:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 775              		.loc 1 593 0
 776 001c FF20     		movs	r0, #255
 777              	.LVL55:
 778              	.L48:
 594:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 595:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	portEND_SWITCHING_ISR(taskWoken);
 596:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   } 
 597:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (xSemaphoreTake(mutex_id, ticks) != pdTRUE) {
 598:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
 599:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 600:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 601:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 602:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 779              		.loc 1 602 0
 780 001e 02B0     		add	sp, sp, #8
 781              	.LCFI18:
ARM GAS  /tmp/cci2zZmt.s 			page 27


 782              		.cfi_remember_state
 783              		.cfi_def_cfa_offset 8
 784              		@ sp needed
 785 0020 10BD     		pop	{r4, pc}
 786              	.LVL56:
 787              	.L51:
 788              	.LCFI19:
 789              		.cfi_restore_state
 595:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   } 
 790              		.loc 1 595 0
 791 0022 019B     		ldr	r3, [sp, #4]
 792 0024 1BB1     		cbz	r3, .L52
 595:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   } 
 793              		.loc 1 595 0 is_stmt 0 discriminator 1
 794 0026 4FF08052 		mov	r2, #268435456
 795 002a 064B     		ldr	r3, .L58
 796 002c 1A60     		str	r2, [r3]
 797              	.L52:
 601:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 798              		.loc 1 601 0 is_stmt 1
 799 002e 0020     		movs	r0, #0
 800 0030 F5E7     		b	.L48
 801              	.LVL57:
 802              	.L50:
 597:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
 803              		.loc 1 597 0
 804 0032 1946     		mov	r1, r3
 805              	.LVL58:
 806 0034 FFF7FEFF 		bl	xQueueGenericReceive
 807              	.LVL59:
 808 0038 0128     		cmp	r0, #1
 809 003a EFD1     		bne	.L53
 810 003c F7E7     		b	.L52
 811              	.LVL60:
 812              	.L54:
 577:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 813              		.loc 1 577 0
 814 003e 8020     		movs	r0, #128
 815              	.LVL61:
 816 0040 EDE7     		b	.L48
 817              	.L59:
 818 0042 00BF     		.align	2
 819              	.L58:
 820 0044 04ED00E0 		.word	-536810236
 821              		.cfi_endproc
 822              	.LFE46:
 824              		.section	.text.osSemaphoreCreate,"ax",%progbits
 825              		.align	1
 826              		.global	osSemaphoreCreate
 827              		.syntax unified
 828              		.thumb
 829              		.thumb_func
 830              		.fpu softvfp
 832              	osSemaphoreCreate:
 833              	.LFB49:
 603:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 604:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
ARM GAS  /tmp/cci2zZmt.s 			page 28


 605:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Release a Mutex that was obtained by \ref osMutexWait
 606:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param mutex_id      mutex ID obtained by \ref osMutexCreate.
 607:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 608:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMutexRelease shall be consistent in every CMSIS-RTOS.
 609:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 610:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osMutexRelease (osMutexId mutex_id)
 611:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 612:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osStatus result = osOK;
 613:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 614:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 615:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 616:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xSemaphoreGiveFromISR(mutex_id, &taskWoken) != pdTRUE) {
 617:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 618:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 619:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
 620:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 621:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (xSemaphoreGive(mutex_id) != pdTRUE) 
 622:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 623:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osErrorOS;
 624:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 625:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
 626:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 627:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 628:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 629:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Delete a Mutex
 630:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param mutex_id  mutex ID obtained by \ref osMutexCreate.
 631:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 632:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMutexDelete shall be consistent in every CMSIS-RTOS.
 633:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 634:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osMutexDelete (osMutexId mutex_id)
 635:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 636:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 637:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorISR;
 638:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 639:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 640:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vQueueDelete(mutex_id);
 641:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 642:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 643:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 644:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 645:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /********************  Semaphore Management Functions **************************/
 646:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 647:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (defined (osFeature_Semaphore)  &&  (osFeature_Semaphore != 0))
 648:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 649:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 650:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Create and Initialize a Semaphore object used for managing resources
 651:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param semaphore_def semaphore definition referenced with \ref osSemaphore.
 652:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param count         number of available resources.
 653:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  semaphore ID for reference by other functions or NULL in case of error.
 654:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSemaphoreCreate shall be consistent in every CMSIS-RTOS.
 655:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 656:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osSemaphoreId osSemaphoreCreate (const osSemaphoreDef_t *semaphore_def, int32_t count)
 657:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 834              		.loc 1 657 0
 835              		.cfi_startproc
 836              		@ args = 0, pretend = 0, frame = 0
 837              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/cci2zZmt.s 			page 29


 838              	.LVL62:
 658:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) semaphore_def;
 659:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osSemaphoreId sema;
 660:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 661:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (count == 1) {
 839              		.loc 1 661 0
 840 0000 0129     		cmp	r1, #1
 657:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) semaphore_def;
 841              		.loc 1 657 0
 842 0002 10B5     		push	{r4, lr}
 843              	.LCFI20:
 844              		.cfi_def_cfa_offset 8
 845              		.cfi_offset 4, -8
 846              		.cfi_offset 14, -4
 657:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) semaphore_def;
 847              		.loc 1 657 0
 848 0004 0846     		mov	r0, r1
 849              	.LVL63:
 850              		.loc 1 661 0
 851 0006 0CD1     		bne	.L62
 662:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vSemaphoreCreateBinary(sema);
 852              		.loc 1 662 0
 853 0008 0322     		movs	r2, #3
 854 000a 0021     		movs	r1, #0
 855              	.LVL64:
 856 000c FFF7FEFF 		bl	xQueueGenericCreate
 857              	.LVL65:
 858 0010 0446     		mov	r4, r0
 859 0012 20B1     		cbz	r0, .L60
 860              		.loc 1 662 0 is_stmt 0 discriminator 1
 861 0014 0023     		movs	r3, #0
 862 0016 1A46     		mov	r2, r3
 863 0018 1946     		mov	r1, r3
 864 001a FFF7FEFF 		bl	xQueueGenericSend
 865              	.LVL66:
 866              	.L60:
 663:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return sema;
 664:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 665:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 666:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_COUNTING_SEMAPHORES == 1 )	
 667:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return xSemaphoreCreateCounting(count, 0);
 668:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
 669:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return NULL;
 670:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 671:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 867              		.loc 1 671 0 is_stmt 1
 868 001e 2046     		mov	r0, r4
 869 0020 10BD     		pop	{r4, pc}
 870              	.LVL67:
 871              	.L62:
 669:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
 872              		.loc 1 669 0
 873 0022 0024     		movs	r4, #0
 874 0024 FBE7     		b	.L60
 875              		.cfi_endproc
 876              	.LFE49:
 878              		.section	.text.osSemaphoreWait,"ax",%progbits
ARM GAS  /tmp/cci2zZmt.s 			page 30


 879              		.align	1
 880              		.global	osSemaphoreWait
 881              		.syntax unified
 882              		.thumb
 883              		.thumb_func
 884              		.fpu softvfp
 886              	osSemaphoreWait:
 887              	.LFB50:
 672:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 673:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 674:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Wait until a Semaphore token becomes available
 675:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  semaphore_id  semaphore object referenced with \ref osSemaphore.
 676:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec      timeout value or 0 in case of no time-out.
 677:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  number of available tokens, or -1 in case of incorrect parameters.
 678:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSemaphoreWait shall be consistent in every CMSIS-RTOS.
 679:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 680:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** int32_t osSemaphoreWait (osSemaphoreId semaphore_id, uint32_t millisec)
 681:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 888              		.loc 1 681 0
 889              		.cfi_startproc
 890              		@ args = 0, pretend = 0, frame = 8
 891              		@ frame_needed = 0, uses_anonymous_args = 0
 892              	.LVL68:
 893 0000 13B5     		push	{r0, r1, r4, lr}
 894              	.LCFI21:
 895              		.cfi_def_cfa_offset 16
 896              		.cfi_offset 4, -8
 897              		.cfi_offset 14, -4
 682:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 683:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;  
 898              		.loc 1 683 0
 899 0002 0024     		movs	r4, #0
 681:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 900              		.loc 1 681 0
 901 0004 0A46     		mov	r2, r1
 902              		.loc 1 683 0
 903 0006 0194     		str	r4, [sp, #4]
 684:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 685:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 686:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (semaphore_id == NULL) {
 904              		.loc 1 686 0
 905 0008 C8B1     		cbz	r0, .L72
 906              	.LVL69:
 907              	.LBB105:
 908              	.LBB106:
 909              	.LBB107:
 910              		.loc 2 109 0
 911              		.syntax unified
 912              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 913 000a EFF30583 		MRS r3, ipsr
 914              	@ 0 "" 2
 915              		.thumb
 916              		.syntax unified
 917              	.LBE107:
 918              	.LBE106:
 919              	.LBE105:
 687:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
ARM GAS  /tmp/cci2zZmt.s 			page 31


 688:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 689:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 690:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
 691:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) {
 692:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
 693:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 694:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) {
 695:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
 696:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) {
 697:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
 698:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 699:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 700:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 701:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 920              		.loc 1 701 0
 921 000e 83B1     		cbz	r3, .L68
 702:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xSemaphoreTakeFromISR(semaphore_id, &taskWoken) != pdTRUE) {
 922              		.loc 1 702 0
 923 0010 01AA     		add	r2, sp, #4
 924 0012 2146     		mov	r1, r4
 925              	.LVL70:
 926 0014 FFF7FEFF 		bl	xQueueReceiveFromISR
 927              	.LVL71:
 928 0018 0128     		cmp	r0, #1
 929 001a 02D0     		beq	.L69
 930              	.L71:
 703:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 931              		.loc 1 703 0
 932 001c FF20     		movs	r0, #255
 933              	.LVL72:
 934              	.L66:
 704:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 705:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	portEND_SWITCHING_ISR(taskWoken);
 706:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
 707:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (xSemaphoreTake(semaphore_id, ticks) != pdTRUE) {
 708:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
 709:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 710:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 711:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 712:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 935              		.loc 1 712 0
 936 001e 02B0     		add	sp, sp, #8
 937              	.LCFI22:
 938              		.cfi_remember_state
 939              		.cfi_def_cfa_offset 8
 940              		@ sp needed
 941 0020 10BD     		pop	{r4, pc}
 942              	.LVL73:
 943              	.L69:
 944              	.LCFI23:
 945              		.cfi_restore_state
 705:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
 946              		.loc 1 705 0
 947 0022 019B     		ldr	r3, [sp, #4]
 948 0024 1BB1     		cbz	r3, .L70
 705:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }  
 949              		.loc 1 705 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cci2zZmt.s 			page 32


 950 0026 4FF08052 		mov	r2, #268435456
 951 002a 064B     		ldr	r3, .L76
 952 002c 1A60     		str	r2, [r3]
 953              	.L70:
 711:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 954              		.loc 1 711 0 is_stmt 1
 955 002e 0020     		movs	r0, #0
 956 0030 F5E7     		b	.L66
 957              	.LVL74:
 958              	.L68:
 707:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
 959              		.loc 1 707 0
 960 0032 1946     		mov	r1, r3
 961              	.LVL75:
 962 0034 FFF7FEFF 		bl	xQueueGenericReceive
 963              	.LVL76:
 964 0038 0128     		cmp	r0, #1
 965 003a EFD1     		bne	.L71
 966 003c F7E7     		b	.L70
 967              	.LVL77:
 968              	.L72:
 687:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 969              		.loc 1 687 0
 970 003e 8020     		movs	r0, #128
 971              	.LVL78:
 972 0040 EDE7     		b	.L66
 973              	.L77:
 974 0042 00BF     		.align	2
 975              	.L76:
 976 0044 04ED00E0 		.word	-536810236
 977              		.cfi_endproc
 978              	.LFE50:
 980              		.section	.text.osSemaphoreRelease,"ax",%progbits
 981              		.align	1
 982              		.global	osSemaphoreRelease
 983              		.syntax unified
 984              		.thumb
 985              		.thumb_func
 986              		.fpu softvfp
 988              	osSemaphoreRelease:
 989              	.LFB51:
 713:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 714:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 715:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Release a Semaphore token
 716:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  semaphore_id  semaphore object referenced with \ref osSemaphore.
 717:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 718:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSemaphoreRelease shall be consistent in every CMSIS-RTOS.
 719:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 720:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osSemaphoreRelease (osSemaphoreId semaphore_id)
 721:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 990              		.loc 1 721 0
 991              		.cfi_startproc
 992              		@ args = 0, pretend = 0, frame = 8
 993              		@ frame_needed = 0, uses_anonymous_args = 0
 994              	.LVL79:
 995 0000 13B5     		push	{r0, r1, r4, lr}
 996              	.LCFI24:
ARM GAS  /tmp/cci2zZmt.s 			page 33


 997              		.cfi_def_cfa_offset 16
 998              		.cfi_offset 4, -8
 999              		.cfi_offset 14, -4
 722:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osStatus result = osOK;
 723:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 1000              		.loc 1 723 0
 1001 0002 0024     		movs	r4, #0
 1002 0004 0194     		str	r4, [sp, #4]
 1003              	.LBB108:
 1004              	.LBB109:
 1005              	.LBB110:
 1006              		.loc 2 109 0
 1007              		.syntax unified
 1008              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1009 0006 EFF30583 		MRS r3, ipsr
 1010              	@ 0 "" 2
 1011              		.thumb
 1012              		.syntax unified
 1013              	.LBE110:
 1014              	.LBE109:
 1015              	.LBE108:
 724:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 725:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 726:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 1016              		.loc 1 726 0
 1017 000a 73B1     		cbz	r3, .L79
 727:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xSemaphoreGiveFromISR(semaphore_id, &taskWoken) != pdTRUE) {
 1018              		.loc 1 727 0
 1019 000c 01A9     		add	r1, sp, #4
 1020 000e FFF7FEFF 		bl	xQueueGiveFromISR
 1021              	.LVL80:
 1022 0012 0128     		cmp	r0, #1
 1023 0014 0FD1     		bne	.L80
 728:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 729:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 730:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
 1024              		.loc 1 730 0
 1025 0016 019B     		ldr	r3, [sp, #4]
 1026 0018 13B9     		cbnz	r3, .L81
 1027              	.L83:
 722:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 1028              		.loc 1 722 0
 1029 001a 0020     		movs	r0, #0
 1030              	.LVL81:
 1031              	.L78:
 731:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 732:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
 733:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xSemaphoreGive(semaphore_id) != pdTRUE) {
 734:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       result = osErrorOS;
 735:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 736:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 737:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 738:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
 739:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1032              		.loc 1 739 0
 1033 001c 02B0     		add	sp, sp, #8
 1034              	.LCFI25:
ARM GAS  /tmp/cci2zZmt.s 			page 34


 1035              		.cfi_remember_state
 1036              		.cfi_def_cfa_offset 8
 1037              		@ sp needed
 1038 001e 10BD     		pop	{r4, pc}
 1039              	.LVL82:
 1040              	.L81:
 1041              	.LCFI26:
 1042              		.cfi_restore_state
 730:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1043              		.loc 1 730 0 discriminator 1
 1044 0020 4FF08052 		mov	r2, #268435456
 1045 0024 054B     		ldr	r3, .L87
 1046 0026 1A60     		str	r2, [r3]
 1047 0028 F7E7     		b	.L83
 1048              	.LVL83:
 1049              	.L79:
 733:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       result = osErrorOS;
 1050              		.loc 1 733 0
 1051 002a 1A46     		mov	r2, r3
 1052 002c 1946     		mov	r1, r3
 1053 002e FFF7FEFF 		bl	xQueueGenericSend
 1054              	.LVL84:
 1055 0032 0128     		cmp	r0, #1
 1056 0034 F1D0     		beq	.L83
 1057              	.L80:
 1058              	.LVL85:
 734:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1059              		.loc 1 734 0
 1060 0036 FF20     		movs	r0, #255
 1061 0038 F0E7     		b	.L78
 1062              	.L88:
 1063 003a 00BF     		.align	2
 1064              	.L87:
 1065 003c 04ED00E0 		.word	-536810236
 1066              		.cfi_endproc
 1067              	.LFE51:
 1069              		.section	.text.osMutexRelease,"ax",%progbits
 1070              		.align	1
 1071              		.global	osMutexRelease
 1072              		.syntax unified
 1073              		.thumb
 1074              		.thumb_func
 1075              		.fpu softvfp
 1077              	osMutexRelease:
 1078              	.LFB79:
 1079              		.cfi_startproc
 1080              		@ args = 0, pretend = 0, frame = 0
 1081              		@ frame_needed = 0, uses_anonymous_args = 0
 1082              		@ link register save eliminated.
 1083 0000 FFF7FEBF 		b	osSemaphoreRelease
 1084              		.cfi_endproc
 1085              	.LFE79:
 1087              		.section	.text.osSemaphoreDelete,"ax",%progbits
 1088              		.align	1
 1089              		.global	osSemaphoreDelete
 1090              		.syntax unified
 1091              		.thumb
ARM GAS  /tmp/cci2zZmt.s 			page 35


 1092              		.thumb_func
 1093              		.fpu softvfp
 1095              	osSemaphoreDelete:
 1096              	.LFB52:
 740:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 741:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 742:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Delete a Semaphore
 743:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  semaphore_id  semaphore object referenced with \ref osSemaphore.
 744:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 745:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osSemaphoreDelete shall be consistent in every CMSIS-RTOS.
 746:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 747:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osSemaphoreDelete (osSemaphoreId semaphore_id)
 748:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1097              		.loc 1 748 0
 1098              		.cfi_startproc
 1099              		@ args = 0, pretend = 0, frame = 0
 1100              		@ frame_needed = 0, uses_anonymous_args = 0
 1101              	.LVL86:
 1102              		.loc 1 748 0
 1103 0000 10B5     		push	{r4, lr}
 1104              	.LCFI27:
 1105              		.cfi_def_cfa_offset 8
 1106              		.cfi_offset 4, -8
 1107              		.cfi_offset 14, -4
 1108              	.LBB111:
 1109              	.LBB112:
 1110              	.LBB113:
 1111              		.loc 2 109 0
 1112              		.syntax unified
 1113              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1114 0002 EFF30584 		MRS r4, ipsr
 1115              	@ 0 "" 2
 1116              		.thumb
 1117              		.syntax unified
 1118              	.LBE113:
 1119              	.LBE112:
 1120              	.LBE111:
 749:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 1121              		.loc 1 749 0
 1122 0006 1CB9     		cbnz	r4, .L92
 750:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorISR;
 751:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 752:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 753:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vSemaphoreDelete(semaphore_id);
 1123              		.loc 1 753 0
 1124 0008 FFF7FEFF 		bl	vQueueDelete
 1125              	.LVL87:
 754:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 755:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK; 
 1126              		.loc 1 755 0
 1127 000c 2046     		mov	r0, r4
 1128 000e 10BD     		pop	{r4, pc}
 1129              	.LVL88:
 1130              	.L92:
 750:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorISR;
 1131              		.loc 1 750 0
 1132 0010 8220     		movs	r0, #130
ARM GAS  /tmp/cci2zZmt.s 			page 36


 1133              	.LVL89:
 756:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1134              		.loc 1 756 0
 1135 0012 10BD     		pop	{r4, pc}
 1136              		.cfi_endproc
 1137              	.LFE52:
 1139              		.section	.text.osMutexDelete,"ax",%progbits
 1140              		.align	1
 1141              		.global	osMutexDelete
 1142              		.syntax unified
 1143              		.thumb
 1144              		.thumb_func
 1145              		.fpu softvfp
 1147              	osMutexDelete:
 1148              	.LFB85:
 1149              		.cfi_startproc
 1150              		@ args = 0, pretend = 0, frame = 0
 1151              		@ frame_needed = 0, uses_anonymous_args = 0
 1152              		@ link register save eliminated.
 1153 0000 FFF7FEBF 		b	osSemaphoreDelete
 1154              		.cfi_endproc
 1155              	.LFE85:
 1157              		.section	.text.osPoolCreate,"ax",%progbits
 1158              		.align	1
 1159              		.global	osPoolCreate
 1160              		.syntax unified
 1161              		.thumb
 1162              		.thumb_func
 1163              		.fpu softvfp
 1165              	osPoolCreate:
 1166              	.LFB53:
 757:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 758:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif    /* Use Semaphores */
 759:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 760:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /*******************   Memory Pool Management Functions  ***********************/
 761:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 762:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (defined (osFeature_Pool)  &&  (osFeature_Pool != 0)) 
 763:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 764:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** //TODO
 765:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** //This is a primitive and inefficient wrapper around the existing FreeRTOS memory management.
 766:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** //A better implementation will have to modify heap_x.c!
 767:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 768:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 769:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** typedef struct os_pool_cb {
 770:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   void *pool;
 771:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint8_t *markers;
 772:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t pool_sz;
 773:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t item_sz;
 774:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t currentIndex;
 775:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** } os_pool_cb_t;
 776:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 777:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 778:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 779:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Create and Initialize a memory pool
 780:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  pool_def      memory pool definition referenced with \ref osPool.
 781:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  memory pool ID for reference by other functions or NULL in case of error.
 782:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osPoolCreate shall be consistent in every CMSIS-RTOS.
ARM GAS  /tmp/cci2zZmt.s 			page 37


 783:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 784:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osPoolId osPoolCreate (const osPoolDef_t *pool_def)
 785:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1167              		.loc 1 785 0
 1168              		.cfi_startproc
 1169              		@ args = 0, pretend = 0, frame = 0
 1170              		@ frame_needed = 0, uses_anonymous_args = 0
 1171              	.LVL90:
 1172              		.loc 1 785 0
 1173 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1174              	.LCFI28:
 1175              		.cfi_def_cfa_offset 24
 1176              		.cfi_offset 4, -24
 1177              		.cfi_offset 5, -20
 1178              		.cfi_offset 6, -16
 1179              		.cfi_offset 7, -12
 1180              		.cfi_offset 8, -8
 1181              		.cfi_offset 14, -4
 786:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osPoolId thePool;
 787:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   int itemSize = 4 * ((pool_def->item_sz + 3) / 4);
 1182              		.loc 1 787 0
 1183 0004 4668     		ldr	r6, [r0, #4]
 785:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osPoolId thePool;
 1184              		.loc 1 785 0
 1185 0006 0746     		mov	r7, r0
 788:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t i;
 789:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 790:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   /* First have to allocate memory for the pool control block. */
 791:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   thePool = pvPortMalloc(sizeof(os_pool_cb_t));
 1186              		.loc 1 791 0
 1187 0008 1420     		movs	r0, #20
 1188              	.LVL91:
 1189 000a FFF7FEFF 		bl	pvPortMalloc
 1190              	.LVL92:
 787:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t i;
 1191              		.loc 1 787 0
 1192 000e 0336     		adds	r6, r6, #3
 1193 0010 26F00306 		bic	r6, r6, #3
 1194              	.LVL93:
 792:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (thePool) {
 1195              		.loc 1 792 0
 1196 0014 0446     		mov	r4, r0
 1197 0016 A8B1     		cbz	r0, .L94
 793:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->pool_sz = pool_def->pool_sz;
 794:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->item_sz = itemSize;
 795:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->currentIndex = 0;
 1198              		.loc 1 795 0
 1199 0018 0025     		movs	r5, #0
 793:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->pool_sz = pool_def->pool_sz;
 1200              		.loc 1 793 0
 1201 001a 3868     		ldr	r0, [r7]
 1202              	.LVL94:
 794:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->currentIndex = 0;
 1203              		.loc 1 794 0
 1204 001c E660     		str	r6, [r4, #12]
 793:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->pool_sz = pool_def->pool_sz;
 1205              		.loc 1 793 0
ARM GAS  /tmp/cci2zZmt.s 			page 38


 1206 001e A060     		str	r0, [r4, #8]
 1207              		.loc 1 795 0
 1208 0020 2561     		str	r5, [r4, #16]
 796:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     
 797:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     /* Memory for markers */
 798:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     thePool->markers = pvPortMalloc(pool_def->pool_sz);
 1209              		.loc 1 798 0
 1210 0022 FFF7FEFF 		bl	pvPortMalloc
 1211              	.LVL95:
 1212 0026 8046     		mov	r8, r0
 1213 0028 6060     		str	r0, [r4, #4]
 799:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (thePool->markers) {
 1214              		.loc 1 799 0
 1215 002a D0B1     		cbz	r0, .L96
 800:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* Now allocate the pool itself. */
 801:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       thePool->pool = pvPortMalloc(pool_def->pool_sz * itemSize);
 1216              		.loc 1 801 0
 1217 002c 3868     		ldr	r0, [r7]
 1218 002e 7043     		muls	r0, r6, r0
 1219 0030 FFF7FEFF 		bl	pvPortMalloc
 1220              	.LVL96:
 1221 0034 0646     		mov	r6, r0
 1222              	.LVL97:
 1223 0036 2060     		str	r0, [r4]
 802:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       
 803:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       if (thePool->pool) {
 1224              		.loc 1 803 0
 1225 0038 58B1     		cbz	r0, .L97
 1226 003a 2B46     		mov	r3, r5
 804:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         for (i = 0; i < pool_def->pool_sz; i++) {
 805:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****           thePool->markers[i] = 0;
 1227              		.loc 1 805 0 discriminator 1
 1228 003c 2946     		mov	r1, r5
 1229              	.L98:
 1230              	.LVL98:
 804:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         for (i = 0; i < pool_def->pool_sz; i++) {
 1231              		.loc 1 804 0 discriminator 1
 1232 003e 3A68     		ldr	r2, [r7]
 1233 0040 9342     		cmp	r3, r2
 1234 0042 02D3     		bcc	.L99
 1235              	.LVL99:
 1236              	.L94:
 806:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         }
 807:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       }
 808:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       else {
 809:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         vPortFree(thePool->markers);
 810:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         vPortFree(thePool);
 811:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         thePool = NULL;
 812:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       }
 813:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 814:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else {
 815:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       vPortFree(thePool);
 816:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       thePool = NULL;
 817:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 818:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 819:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 820:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return thePool;
ARM GAS  /tmp/cci2zZmt.s 			page 39


 821:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1237              		.loc 1 821 0
 1238 0044 2046     		mov	r0, r4
 1239 0046 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1240              	.LVL100:
 1241              	.L99:
 805:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         }
 1242              		.loc 1 805 0 discriminator 3
 1243 004a 6268     		ldr	r2, [r4, #4]
 1244 004c D154     		strb	r1, [r2, r3]
 804:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         for (i = 0; i < pool_def->pool_sz; i++) {
 1245              		.loc 1 804 0 discriminator 3
 1246 004e 0133     		adds	r3, r3, #1
 1247              	.LVL101:
 1248 0050 F5E7     		b	.L98
 1249              	.LVL102:
 1250              	.L97:
 809:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         vPortFree(thePool);
 1251              		.loc 1 809 0
 1252 0052 6068     		ldr	r0, [r4, #4]
 1253 0054 FFF7FEFF 		bl	vPortFree
 1254              	.LVL103:
 810:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****         thePool = NULL;
 1255              		.loc 1 810 0
 1256 0058 2046     		mov	r0, r4
 1257 005a FFF7FEFF 		bl	vPortFree
 1258              	.LVL104:
 811:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       }
 1259              		.loc 1 811 0
 1260 005e 3446     		mov	r4, r6
 1261 0060 F0E7     		b	.L94
 1262              	.LVL105:
 1263              	.L96:
 815:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       thePool = NULL;
 1264              		.loc 1 815 0
 1265 0062 2046     		mov	r0, r4
 1266 0064 FFF7FEFF 		bl	vPortFree
 1267              	.LVL106:
 816:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1268              		.loc 1 816 0
 1269 0068 4446     		mov	r4, r8
 1270              	.LVL107:
 820:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1271              		.loc 1 820 0
 1272 006a EBE7     		b	.L94
 1273              		.cfi_endproc
 1274              	.LFE53:
 1276              		.section	.text.osPoolAlloc,"ax",%progbits
 1277              		.align	1
 1278              		.global	osPoolAlloc
 1279              		.syntax unified
 1280              		.thumb
 1281              		.thumb_func
 1282              		.fpu softvfp
 1284              	osPoolAlloc:
 1285              	.LFB54:
 822:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
ARM GAS  /tmp/cci2zZmt.s 			page 40


 823:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 824:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Allocate a memory block from a memory pool
 825:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param pool_id       memory pool ID obtain referenced with \ref osPoolCreate.
 826:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  address of the allocated memory block or NULL in case of no memory available.
 827:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osPoolAlloc shall be consistent in every CMSIS-RTOS.
 828:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 829:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** void *osPoolAlloc (osPoolId pool_id)
 830:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1286              		.loc 1 830 0
 1287              		.cfi_startproc
 1288              		@ args = 0, pretend = 0, frame = 0
 1289              		@ frame_needed = 0, uses_anonymous_args = 0
 1290              	.LVL108:
 1291 0000 70B5     		push	{r4, r5, r6, lr}
 1292              	.LCFI29:
 1293              		.cfi_def_cfa_offset 16
 1294              		.cfi_offset 4, -16
 1295              		.cfi_offset 5, -12
 1296              		.cfi_offset 6, -8
 1297              		.cfi_offset 14, -4
 1298              		.loc 1 830 0
 1299 0002 0446     		mov	r4, r0
 1300              	.LBB114:
 1301              	.LBB115:
 1302              	.LBB116:
 1303              		.loc 2 109 0
 1304              		.syntax unified
 1305              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1306 0004 EFF30585 		MRS r5, ipsr
 1307              	@ 0 "" 2
 1308              		.thumb
 1309              		.syntax unified
 1310              	.LBE116:
 1311              	.LBE115:
 1312              	.LBE114:
 831:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   int dummy = 0;
 832:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   void *p = NULL;
 833:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t i;
 834:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t index;
 835:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 836:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 1313              		.loc 1 836 0
 1314 0008 3DB1     		cbz	r5, .L104
 837:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     dummy = portSET_INTERRUPT_MASK_FROM_ISR();
 1315              		.loc 1 837 0
 1316 000a FFF7FEFF 		bl	ulPortSetInterruptMask
 1317              	.LVL109:
 1318              	.L105:
 838:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 839:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
 840:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vPortEnterCritical();
 841:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 842:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 843:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   for (i = 0; i < pool_id->pool_sz; i++) {
 1319              		.loc 1 843 0
 1320 000e 0022     		movs	r2, #0
 1321 0010 A168     		ldr	r1, [r4, #8]
ARM GAS  /tmp/cci2zZmt.s 			page 41


 1322              	.LVL110:
 1323              	.L106:
 1324              		.loc 1 843 0 is_stmt 0 discriminator 1
 1325 0012 8A42     		cmp	r2, r1
 1326 0014 05D1     		bne	.L110
 832:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t i;
 1327              		.loc 1 832 0 is_stmt 1
 1328 0016 0025     		movs	r5, #0
 1329 0018 13E0     		b	.L109
 1330              	.LVL111:
 1331              	.L104:
 840:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1332              		.loc 1 840 0
 1333 001a FFF7FEFF 		bl	vPortEnterCritical
 1334              	.LVL112:
 831:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   void *p = NULL;
 1335              		.loc 1 831 0
 1336 001e 2846     		mov	r0, r5
 1337 0020 F5E7     		b	.L105
 1338              	.LVL113:
 1339              	.L110:
 844:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     index = pool_id->currentIndex + i;
 1340              		.loc 1 844 0
 1341 0022 2369     		ldr	r3, [r4, #16]
 845:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (index >= pool_id->pool_sz) {
 846:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       index = 0;
 847:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 848:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     
 849:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (pool_id->markers[index] == 0) {
 1342              		.loc 1 849 0
 1343 0024 6568     		ldr	r5, [r4, #4]
 844:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     index = pool_id->currentIndex + i;
 1344              		.loc 1 844 0
 1345 0026 1344     		add	r3, r3, r2
 1346              	.LVL114:
 846:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1347              		.loc 1 846 0
 1348 0028 9942     		cmp	r1, r3
 1349 002a 98BF     		it	ls
 1350 002c 0023     		movls	r3, #0
 1351              	.LVL115:
 1352              		.loc 1 849 0
 1353 002e EE18     		adds	r6, r5, r3
 1354 0030 ED5C     		ldrb	r5, [r5, r3]	@ zero_extendqisi2
 1355 0032 6DB9     		cbnz	r5, .L108
 850:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       pool_id->markers[index] = 1;
 1356              		.loc 1 850 0
 1357 0034 0122     		movs	r2, #1
 1358              	.LVL116:
 1359 0036 3270     		strb	r2, [r6]
 851:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       p = (void *)((uint32_t)(pool_id->pool) + (index * pool_id->item_sz));
 1360              		.loc 1 851 0
 1361 0038 E568     		ldr	r5, [r4, #12]
 1362 003a 2268     		ldr	r2, [r4]
 852:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       pool_id->currentIndex = index;
 1363              		.loc 1 852 0
 1364 003c 2361     		str	r3, [r4, #16]
ARM GAS  /tmp/cci2zZmt.s 			page 42


 851:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       p = (void *)((uint32_t)(pool_id->pool) + (index * pool_id->item_sz));
 1365              		.loc 1 851 0
 1366 003e 05FB0325 		mla	r5, r5, r3, r2
 1367              	.LVL117:
 1368              	.L109:
 1369              	.LBB117:
 1370              	.LBB118:
 1371              	.LBB119:
 1372              		.loc 2 109 0
 1373              		.syntax unified
 1374              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1375 0042 EFF30583 		MRS r3, ipsr
 1376              	@ 0 "" 2
 1377              		.thumb
 1378              		.syntax unified
 1379              	.LBE119:
 1380              	.LBE118:
 1381              	.LBE117:
 853:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       break;
 854:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 855:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 856:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 857:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 1382              		.loc 1 857 0
 1383 0046 2BB1     		cbz	r3, .L111
 858:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portCLEAR_INTERRUPT_MASK_FROM_ISR(dummy);
 1384              		.loc 1 858 0
 1385 0048 FFF7FEFF 		bl	vPortClearInterruptMask
 1386              	.LVL118:
 1387              	.L103:
 859:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 860:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
 861:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vPortExitCritical();
 862:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 863:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 864:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return p;
 865:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1388              		.loc 1 865 0
 1389 004c 2846     		mov	r0, r5
 1390 004e 70BD     		pop	{r4, r5, r6, pc}
 1391              	.LVL119:
 1392              	.L108:
 843:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     index = pool_id->currentIndex + i;
 1393              		.loc 1 843 0 discriminator 2
 1394 0050 0132     		adds	r2, r2, #1
 1395              	.LVL120:
 1396 0052 DEE7     		b	.L106
 1397              	.LVL121:
 1398              	.L111:
 861:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1399              		.loc 1 861 0
 1400 0054 FFF7FEFF 		bl	vPortExitCritical
 1401              	.LVL122:
 864:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1402              		.loc 1 864 0
 1403 0058 F8E7     		b	.L103
 1404              		.cfi_endproc
ARM GAS  /tmp/cci2zZmt.s 			page 43


 1405              	.LFE54:
 1407              		.section	.text.osPoolCAlloc,"ax",%progbits
 1408              		.align	1
 1409              		.global	osPoolCAlloc
 1410              		.syntax unified
 1411              		.thumb
 1412              		.thumb_func
 1413              		.fpu softvfp
 1415              	osPoolCAlloc:
 1416              	.LFB55:
 866:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 867:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 868:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Allocate a memory block from a memory pool and set memory block to zero
 869:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  pool_id       memory pool ID obtain referenced with \ref osPoolCreate.
 870:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  address of the allocated memory block or NULL in case of no memory available.
 871:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osPoolCAlloc shall be consistent in every CMSIS-RTOS.
 872:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 873:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** void *osPoolCAlloc (osPoolId pool_id)
 874:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1417              		.loc 1 874 0
 1418              		.cfi_startproc
 1419              		@ args = 0, pretend = 0, frame = 0
 1420              		@ frame_needed = 0, uses_anonymous_args = 0
 1421              	.LVL123:
 1422 0000 08B5     		push	{r3, lr}
 1423              	.LCFI30:
 1424              		.cfi_def_cfa_offset 8
 1425              		.cfi_offset 3, -8
 1426              		.cfi_offset 14, -4
 875:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   void *p = osPoolAlloc(pool_id);
 1427              		.loc 1 875 0
 1428 0002 FFF7FEFF 		bl	osPoolAlloc
 1429              	.LVL124:
 876:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 877:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (p != NULL)
 1430              		.loc 1 877 0
 1431 0006 08B1     		cbz	r0, .L113
 878:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 879:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     memset(p, 0, sizeof(pool_id->pool_sz));
 1432              		.loc 1 879 0
 1433 0008 0023     		movs	r3, #0
 1434 000a 0360     		str	r3, [r0]	@ unaligned
 1435              	.L113:
 880:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 881:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 882:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return p;
 883:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1436              		.loc 1 883 0
 1437 000c 08BD     		pop	{r3, pc}
 1438              		.cfi_endproc
 1439              	.LFE55:
 1441              		.section	.text.osPoolFree,"ax",%progbits
 1442              		.align	1
 1443              		.global	osPoolFree
 1444              		.syntax unified
 1445              		.thumb
 1446              		.thumb_func
ARM GAS  /tmp/cci2zZmt.s 			page 44


 1447              		.fpu softvfp
 1449              	osPoolFree:
 1450              	.LFB56:
 884:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 885:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 886:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Return an allocated memory block back to a specific memory pool
 887:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  pool_id       memory pool ID obtain referenced with \ref osPoolCreate.
 888:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  block         address of the allocated memory block that is returned to the memory pool.
 889:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
 890:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osPoolFree shall be consistent in every CMSIS-RTOS.
 891:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 892:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osPoolFree (osPoolId pool_id, void *block)
 893:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1451              		.loc 1 893 0
 1452              		.cfi_startproc
 1453              		@ args = 0, pretend = 0, frame = 0
 1454              		@ frame_needed = 0, uses_anonymous_args = 0
 1455              		@ link register save eliminated.
 1456              	.LVL125:
 894:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t index;
 895:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 896:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (pool_id == NULL) {
 1457              		.loc 1 896 0
 1458 0000 88B1     		cbz	r0, .L124
 897:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
 898:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 899:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 900:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (block == NULL) {
 1459              		.loc 1 900 0
 1460 0002 81B1     		cbz	r1, .L124
 1461              	.LVL126:
 1462              	.LBB122:
 1463              	.LBB123:
 901:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
 902:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 903:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 904:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (block < pool_id->pool) {
 1464              		.loc 1 904 0
 1465 0004 0368     		ldr	r3, [r0]
 1466 0006 9942     		cmp	r1, r3
 1467 0008 0DD3     		bcc	.L124
 905:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
 906:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 907:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 908:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   index = (uint32_t)block - (uint32_t)(pool_id->pool);
 1468              		.loc 1 908 0
 1469 000a CB1A     		subs	r3, r1, r3
 1470              	.LVL127:
 909:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (index % pool_id->item_sz) {
 1471              		.loc 1 909 0
 1472 000c C168     		ldr	r1, [r0, #12]
 1473              	.LVL128:
 1474 000e B3FBF1F2 		udiv	r2, r3, r1
 1475 0012 01FB1231 		mls	r1, r1, r2, r3
 1476 0016 31B9     		cbnz	r1, .L124
 1477              	.LVL129:
 910:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
ARM GAS  /tmp/cci2zZmt.s 			page 45


 911:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 912:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   index = index / pool_id->item_sz;
 913:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (index >= pool_id->pool_sz) {
 1478              		.loc 1 913 0
 1479 0018 8368     		ldr	r3, [r0, #8]
 1480 001a 9A42     		cmp	r2, r3
 1481 001c 03D2     		bcs	.L124
 914:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
 915:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 916:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 917:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   pool_id->markers[index] = 0;
 1482              		.loc 1 917 0
 1483 001e 4368     		ldr	r3, [r0, #4]
 918:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 919:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 1484              		.loc 1 919 0
 1485 0020 0846     		mov	r0, r1
 1486              	.LVL130:
 917:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 1487              		.loc 1 917 0
 1488 0022 9954     		strb	r1, [r3, r2]
 1489 0024 7047     		bx	lr
 1490              	.LVL131:
 1491              	.L124:
 1492              	.LBE123:
 1493              	.LBE122:
 897:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1494              		.loc 1 897 0
 1495 0026 8020     		movs	r0, #128
 1496              	.LVL132:
 920:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1497              		.loc 1 920 0
 1498 0028 7047     		bx	lr
 1499              		.cfi_endproc
 1500              	.LFE56:
 1502              		.section	.text.osMessageCreate,"ax",%progbits
 1503              		.align	1
 1504              		.global	osMessageCreate
 1505              		.syntax unified
 1506              		.thumb
 1507              		.thumb_func
 1508              		.fpu softvfp
 1510              	osMessageCreate:
 1511              	.LFB57:
 921:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 922:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 923:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif   /* Use Memory Pool Management */
 924:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 925:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /*******************   Message Queue Management Functions  *********************/
 926:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 927:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (defined (osFeature_MessageQ)  &&  (osFeature_MessageQ != 0)) /* Use Message Queues */
 928:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 929:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 930:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Create and Initialize a Message Queue
 931:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param queue_def     queue definition referenced with \ref osMessageQ.
 932:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  thread_id     thread ID (obtained by \ref osThreadCreate or \ref osThreadGetId) or NULL.
 933:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  message queue ID for reference by other functions or NULL in case of error.
ARM GAS  /tmp/cci2zZmt.s 			page 46


 934:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMessageCreate shall be consistent in every CMSIS-RTOS.
 935:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 936:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osMessageQId osMessageCreate (const osMessageQDef_t *queue_def, osThreadId thread_id)
 937:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1512              		.loc 1 937 0
 1513              		.cfi_startproc
 1514              		@ args = 0, pretend = 0, frame = 0
 1515              		@ frame_needed = 0, uses_anonymous_args = 0
 1516              		@ link register save eliminated.
 1517              	.LVL133:
 938:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) thread_id;
 939:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 940:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return xQueueCreate(queue_def->queue_sz, queue_def->item_sz);
 1518              		.loc 1 940 0
 1519 0000 0022     		movs	r2, #0
 1520 0002 03C8     		ldm	r0, {r0, r1}
 1521              	.LVL134:
 1522 0004 FFF7FEBF 		b	xQueueGenericCreate
 1523              	.LVL135:
 1524              		.cfi_endproc
 1525              	.LFE57:
 1527              		.section	.text.osMessagePut,"ax",%progbits
 1528              		.align	1
 1529              		.global	osMessagePut
 1530              		.syntax unified
 1531              		.thumb
 1532              		.thumb_func
 1533              		.fpu softvfp
 1535              	osMessagePut:
 1536              	.LFB58:
 941:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 942:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 943:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 944:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Put a Message to a Queue.
 945:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id  message queue ID obtained with \ref osMessageCreate.
 946:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  info      message information.
 947:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec  timeout value or 0 in case of no time-out.
 948:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function.
 949:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMessagePut shall be consistent in every CMSIS-RTOS.
 950:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 951:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osMessagePut (osMessageQId queue_id, uint32_t info, uint32_t millisec)
 952:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1537              		.loc 1 952 0
 1538              		.cfi_startproc
 1539              		@ args = 0, pretend = 0, frame = 16
 1540              		@ frame_needed = 0, uses_anonymous_args = 0
 1541              	.LVL136:
 1542 0000 1FB5     		push	{r0, r1, r2, r3, r4, lr}
 1543              	.LCFI31:
 1544              		.cfi_def_cfa_offset 24
 1545              		.cfi_offset 4, -8
 1546              		.cfi_offset 14, -4
 953:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 1547              		.loc 1 953 0
 1548 0002 0024     		movs	r4, #0
 952:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken = pdFALSE;
 1549              		.loc 1 952 0
ARM GAS  /tmp/cci2zZmt.s 			page 47


 1550 0004 0191     		str	r1, [sp, #4]
 1551              		.loc 1 953 0
 1552 0006 0394     		str	r4, [sp, #12]
 1553              	.LVL137:
 954:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 955:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 956:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = millisec / portTICK_PERIOD_MS;
 957:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (ticks == 0) {
 958:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = 1;
 1554              		.loc 1 958 0
 1555 0008 A242     		cmp	r2, r4
 1556 000a 08BF     		it	eq
 1557 000c 0122     		moveq	r2, #1
 1558              	.LVL138:
 1559              	.LBB124:
 1560              	.LBB125:
 1561              	.LBB126:
 1562              		.loc 2 109 0
 1563              		.syntax unified
 1564              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1565 000e EFF30583 		MRS r3, ipsr
 1566              	@ 0 "" 2
 1567              		.thumb
 1568              		.syntax unified
 1569              	.LBE126:
 1570              	.LBE125:
 1571              	.LBE124:
 959:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 960:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 961:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 1572              		.loc 1 961 0
 1573 0012 8BB1     		cbz	r3, .L128
 962:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueSendFromISR(queue_id, &info, &taskWoken) != pdTRUE) {
 1574              		.loc 1 962 0
 1575 0014 2346     		mov	r3, r4
 1576 0016 03AA     		add	r2, sp, #12
 1577              	.LVL139:
 1578 0018 01A9     		add	r1, sp, #4
 1579              	.LVL140:
 1580 001a FFF7FEFF 		bl	xQueueGenericSendFromISR
 1581              	.LVL141:
 1582 001e 0128     		cmp	r0, #1
 1583 0020 02D0     		beq	.L129
 1584              	.L132:
 963:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 1585              		.loc 1 963 0
 1586 0022 FF20     		movs	r0, #255
 1587              	.L126:
 964:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 965:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
 966:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 967:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
 968:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueSend(queue_id, &info, ticks) != pdTRUE) {
 969:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 970:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 971:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 972:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
ARM GAS  /tmp/cci2zZmt.s 			page 48


 973:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
 974:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1588              		.loc 1 974 0
 1589 0024 04B0     		add	sp, sp, #16
 1590              	.LCFI32:
 1591              		.cfi_remember_state
 1592              		.cfi_def_cfa_offset 8
 1593              		@ sp needed
 1594 0026 10BD     		pop	{r4, pc}
 1595              	.LVL142:
 1596              	.L129:
 1597              	.LCFI33:
 1598              		.cfi_restore_state
 965:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1599              		.loc 1 965 0
 1600 0028 039B     		ldr	r3, [sp, #12]
 1601 002a 1BB1     		cbz	r3, .L131
 965:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1602              		.loc 1 965 0 is_stmt 0 discriminator 1
 1603 002c 4FF08052 		mov	r2, #268435456
 1604 0030 044B     		ldr	r3, .L136
 1605 0032 1A60     		str	r2, [r3]
 1606              	.L131:
 973:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1607              		.loc 1 973 0 is_stmt 1
 1608 0034 0020     		movs	r0, #0
 1609 0036 F5E7     		b	.L126
 1610              	.LVL143:
 1611              	.L128:
 968:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 1612              		.loc 1 968 0
 1613 0038 01A9     		add	r1, sp, #4
 1614              	.LVL144:
 1615 003a FFF7FEFF 		bl	xQueueGenericSend
 1616              	.LVL145:
 1617 003e 0128     		cmp	r0, #1
 1618 0040 EFD1     		bne	.L132
 1619 0042 F7E7     		b	.L131
 1620              	.L137:
 1621              		.align	2
 1622              	.L136:
 1623 0044 04ED00E0 		.word	-536810236
 1624              		.cfi_endproc
 1625              	.LFE58:
 1627              		.section	.text.osMessageGet,"ax",%progbits
 1628              		.align	1
 1629              		.global	osMessageGet
 1630              		.syntax unified
 1631              		.thumb
 1632              		.thumb_func
 1633              		.fpu softvfp
 1635              	osMessageGet:
 1636              	.LFB59:
 975:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
 976:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
 977:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Get a Message or Wait for a Message from a Queue.
 978:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id  message queue ID obtained with \ref osMessageCreate.
ARM GAS  /tmp/cci2zZmt.s 			page 49


 979:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec  timeout value or 0 in case of no time-out.
 980:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval event information that includes status code.
 981:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMessageGet shall be consistent in every CMSIS-RTOS.
 982:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
 983:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osEvent osMessageGet (osMessageQId queue_id, uint32_t millisec)
 984:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1637              		.loc 1 984 0
 1638              		.cfi_startproc
 1639              		@ args = 0, pretend = 0, frame = 16
 1640              		@ frame_needed = 0, uses_anonymous_args = 0
 1641              	.LVL146:
 1642 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1643              	.LCFI34:
 1644              		.cfi_def_cfa_offset 20
 1645              		.cfi_offset 4, -20
 1646              		.cfi_offset 5, -16
 1647              		.cfi_offset 6, -12
 1648              		.cfi_offset 7, -8
 1649              		.cfi_offset 14, -4
 985:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken;
 986:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
 987:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osEvent event;
 988:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 989:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   event.def.message_id = queue_id;
 990:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   event.value.v = 0;
 1650              		.loc 1 990 0
 1651 0002 0026     		movs	r6, #0
 984:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken;
 1652              		.loc 1 984 0
 1653 0004 85B0     		sub	sp, sp, #20
 1654              	.LCFI35:
 1655              		.cfi_def_cfa_offset 40
 984:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken;
 1656              		.loc 1 984 0
 1657 0006 0446     		mov	r4, r0
 1658 0008 1746     		mov	r7, r2
 1659 000a 0846     		mov	r0, r1
 1660              	.LVL147:
 989:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   event.value.v = 0;
 1661              		.loc 1 989 0
 1662 000c 0391     		str	r1, [sp, #12]
 1663              		.loc 1 990 0
 1664 000e 0296     		str	r6, [sp, #8]
 1665 0010 01AD     		add	r5, sp, #4
 991:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 992:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (queue_id == NULL) {
 1666              		.loc 1 992 0
 1667 0012 11B9     		cbnz	r1, .L139
 993:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     event.status = osErrorParameter;
 1668              		.loc 1 993 0
 1669 0014 8023     		movs	r3, #128
 1670              	.LVL148:
 1671              	.L151:
 994:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return event;
 995:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 996:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 997:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   taskWoken = pdFALSE;
ARM GAS  /tmp/cci2zZmt.s 			page 50


 998:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 999:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
1000:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) {
1001:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
1002:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1003:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) {
1004:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
1005:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) {
1006:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
1007:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1008:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1009:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1010:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
1011:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueReceiveFromISR(queue_id, &event.value.v, &taskWoken) == pdTRUE) {
1012:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
1013:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = osEventMessage;
1014:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1015:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else {
1016:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = osOK;
1017:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1018:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
1019:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1020:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
1021:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueReceive(queue_id, &event.value.v, ticks) == pdTRUE) {
1022:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
1023:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = osEventMessage;
1024:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1025:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else {
1026:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = (ticks == 0) ? osOK : osEventTimeout;
 1672              		.loc 1 1026 0
 1673 0016 0193     		str	r3, [sp, #4]
 1674 0018 13E0     		b	.L144
 1675              	.LVL149:
 1676              	.L139:
 997:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 1677              		.loc 1 997 0
 1678 001a 0096     		str	r6, [sp]
 1679              	.LVL150:
 1680              	.LBB127:
 1681              	.LBB128:
 1682              	.LBB129:
 1683              		.loc 2 109 0
 1684              		.syntax unified
 1685              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1686 001c EFF30583 		MRS r3, ipsr
 1687              	@ 0 "" 2
 1688              		.thumb
 1689              		.syntax unified
 1690              	.LBE129:
 1691              	.LBE128:
 1692              	.LBE127:
1010:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueReceiveFromISR(queue_id, &event.value.v, &taskWoken) == pdTRUE) {
 1693              		.loc 1 1010 0
 1694 0020 B3B1     		cbz	r3, .L141
1011:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
 1695              		.loc 1 1011 0
 1696 0022 6A46     		mov	r2, sp
ARM GAS  /tmp/cci2zZmt.s 			page 51


 1697              	.LVL151:
 1698 0024 02A9     		add	r1, sp, #8
 1699 0026 FFF7FEFF 		bl	xQueueReceiveFromISR
 1700              	.LVL152:
 1701 002a 0128     		cmp	r0, #1
1013:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1702              		.loc 1 1013 0
 1703 002c 04BF     		itt	eq
 1704 002e 1023     		moveq	r3, #16
 1705 0030 0193     		streq	r3, [sp, #4]
1018:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1706              		.loc 1 1018 0
 1707 0032 009B     		ldr	r3, [sp]
1016:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1708              		.loc 1 1016 0
 1709 0034 18BF     		it	ne
 1710 0036 0196     		strne	r6, [sp, #4]
1018:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1711              		.loc 1 1018 0
 1712 0038 1BB1     		cbz	r3, .L144
1018:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1713              		.loc 1 1018 0 is_stmt 0 discriminator 1
 1714 003a 4FF08052 		mov	r2, #268435456
 1715 003e 0A4B     		ldr	r3, .L152
 1716 0040 1A60     		str	r2, [r3]
 1717              	.LVL153:
 1718              	.L144:
1027:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1028:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1029:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1030:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return event;
 1719              		.loc 1 1030 0 is_stmt 1
 1720 0042 95E80700 		ldm	r5, {r0, r1, r2}
 1721 0046 84E80700 		stm	r4, {r0, r1, r2}
1031:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1722              		.loc 1 1031 0
 1723 004a 2046     		mov	r0, r4
 1724 004c 05B0     		add	sp, sp, #20
 1725              	.LCFI36:
 1726              		.cfi_remember_state
 1727              		.cfi_def_cfa_offset 20
 1728              		@ sp needed
 1729 004e F0BD     		pop	{r4, r5, r6, r7, pc}
 1730              	.LVL154:
 1731              	.L141:
 1732              	.LCFI37:
 1733              		.cfi_restore_state
1021:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
 1734              		.loc 1 1021 0
 1735 0050 02A9     		add	r1, sp, #8
 1736 0052 FFF7FEFF 		bl	xQueueGenericReceive
 1737              	.LVL155:
 1738 0056 0128     		cmp	r0, #1
 1739 0058 01D1     		bne	.L145
1023:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1740              		.loc 1 1023 0
 1741 005a 1023     		movs	r3, #16
ARM GAS  /tmp/cci2zZmt.s 			page 52


 1742 005c DBE7     		b	.L151
 1743              	.L145:
1026:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 1744              		.loc 1 1026 0
 1745 005e 002F     		cmp	r7, #0
 1746 0060 0CBF     		ite	eq
 1747 0062 0023     		moveq	r3, #0
 1748 0064 4023     		movne	r3, #64
 1749 0066 D6E7     		b	.L151
 1750              	.L153:
 1751              		.align	2
 1752              	.L152:
 1753 0068 04ED00E0 		.word	-536810236
 1754              		.cfi_endproc
 1755              	.LFE59:
 1757              		.section	.text.osMailCreate,"ax",%progbits
 1758              		.align	1
 1759              		.global	osMailCreate
 1760              		.syntax unified
 1761              		.thumb
 1762              		.thumb_func
 1763              		.fpu softvfp
 1765              	osMailCreate:
 1766              	.LFB60:
1032:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1033:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif     /* Use Message Queues */
1034:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1035:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /********************   Mail Queue Management Functions  ***********************/
1036:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (defined (osFeature_MailQ)  &&  (osFeature_MailQ != 0))  /* Use Mail Queues */
1037:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1038:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1039:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** typedef struct os_mailQ_cb {
1040:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   const osMailQDef_t *queue_def;
1041:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   QueueHandle_t handle;
1042:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osPoolId pool;
1043:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** } os_mailQ_cb_t;
1044:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1045:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1046:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Create and Initialize mail queue
1047:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_def     reference to the mail queue definition obtain with \ref osMailQ
1048:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id     thread ID (obtained by \ref osThreadCreate or \ref osThreadGetId) or NULL.
1049:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval mail queue ID for reference by other functions or NULL in case of error.
1050:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMailCreate shall be consistent in every CMSIS-RTOS.
1051:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1052:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osMailQId osMailCreate (const osMailQDef_t *queue_def, osThreadId thread_id)
1053:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1767              		.loc 1 1053 0
 1768              		.cfi_startproc
 1769              		@ args = 0, pretend = 0, frame = 16
 1770              		@ frame_needed = 0, uses_anonymous_args = 0
 1771              	.LVL156:
 1772 0000 7FB5     		push	{r0, r1, r2, r3, r4, r5, r6, lr}
 1773              	.LCFI38:
 1774              		.cfi_def_cfa_offset 32
 1775              		.cfi_offset 4, -16
 1776              		.cfi_offset 5, -12
 1777              		.cfi_offset 6, -8
ARM GAS  /tmp/cci2zZmt.s 			page 53


 1778              		.cfi_offset 14, -4
1054:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) thread_id;
1055:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1056:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osPoolDef_t pool_def = {queue_def->queue_sz, queue_def->item_sz, NULL};
 1779              		.loc 1 1056 0
 1780 0002 0026     		movs	r6, #0
 1781 0004 0368     		ldr	r3, [r0]
1057:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1058:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1059:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   /* Create a mail queue control block */
1060:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   *(queue_def->cb) = pvPortMalloc(sizeof(struct os_mailQ_cb));
 1782              		.loc 1 1060 0
 1783 0006 8468     		ldr	r4, [r0, #8]
1056:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 1784              		.loc 1 1056 0
 1785 0008 0193     		str	r3, [sp, #4]
 1786 000a 4368     		ldr	r3, [r0, #4]
1053:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) thread_id;
 1787              		.loc 1 1053 0
 1788 000c 0546     		mov	r5, r0
 1789              		.loc 1 1060 0
 1790 000e 0C20     		movs	r0, #12
 1791              	.LVL157:
1056:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 1792              		.loc 1 1056 0
 1793 0010 0293     		str	r3, [sp, #8]
 1794 0012 0396     		str	r6, [sp, #12]
 1795              		.loc 1 1060 0
 1796 0014 FFF7FEFF 		bl	pvPortMalloc
 1797              	.LVL158:
1061:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (*(queue_def->cb) == NULL) {
 1798              		.loc 1 1061 0
 1799 0018 AB68     		ldr	r3, [r5, #8]
1060:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (*(queue_def->cb) == NULL) {
 1800              		.loc 1 1060 0
 1801 001a 2060     		str	r0, [r4]
 1802              		.loc 1 1061 0
 1803 001c 1C68     		ldr	r4, [r3]
 1804 001e 6CB1     		cbz	r4, .L157
1062:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return NULL;
1063:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1064:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (*(queue_def->cb))->queue_def = queue_def;
 1805              		.loc 1 1064 0
 1806 0020 2560     		str	r5, [r4]
1065:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1066:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   /* Create a queue in FreeRTOS */
1067:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (*(queue_def->cb))->handle = xQueueCreate(queue_def->queue_sz, sizeof(void *));
 1807              		.loc 1 1067 0
 1808 0022 3246     		mov	r2, r6
 1809 0024 0421     		movs	r1, #4
 1810 0026 2868     		ldr	r0, [r5]
 1811 0028 FFF7FEFF 		bl	xQueueGenericCreate
 1812              	.LVL159:
1068:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if ((*(queue_def->cb))->handle == NULL) {
 1813              		.loc 1 1068 0
 1814 002c AB68     		ldr	r3, [r5, #8]
1067:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if ((*(queue_def->cb))->handle == NULL) {
ARM GAS  /tmp/cci2zZmt.s 			page 54


 1815              		.loc 1 1067 0
 1816 002e 6060     		str	r0, [r4, #4]
 1817              		.loc 1 1068 0
 1818 0030 1E68     		ldr	r6, [r3]
 1819 0032 7468     		ldr	r4, [r6, #4]
 1820 0034 24B9     		cbnz	r4, .L156
1069:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vPortFree(*(queue_def->cb));
 1821              		.loc 1 1069 0
 1822 0036 3046     		mov	r0, r6
 1823              	.L158:
1070:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return NULL;
1071:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1072:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1073:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   /* Create a mail pool */
1074:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (*(queue_def->cb))->pool = osPoolCreate(&pool_def);
1075:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if ((*(queue_def->cb))->pool == NULL) {
1076:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     //TODO: Delete queue. How to do it in FreeRTOS?
1077:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vPortFree(*(queue_def->cb));
 1824              		.loc 1 1077 0
 1825 0038 FFF7FEFF 		bl	vPortFree
 1826              	.LVL160:
 1827              	.L157:
1062:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1828              		.loc 1 1062 0
 1829 003c 2046     		mov	r0, r4
 1830 003e 08E0     		b	.L154
 1831              	.L156:
1074:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if ((*(queue_def->cb))->pool == NULL) {
 1832              		.loc 1 1074 0
 1833 0040 01A8     		add	r0, sp, #4
 1834 0042 FFF7FEFF 		bl	osPoolCreate
 1835              	.LVL161:
1075:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     //TODO: Delete queue. How to do it in FreeRTOS?
 1836              		.loc 1 1075 0
 1837 0046 AB68     		ldr	r3, [r5, #8]
1074:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if ((*(queue_def->cb))->pool == NULL) {
 1838              		.loc 1 1074 0
 1839 0048 B060     		str	r0, [r6, #8]
1075:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     //TODO: Delete queue. How to do it in FreeRTOS?
 1840              		.loc 1 1075 0
 1841 004a 1868     		ldr	r0, [r3]
 1842 004c 8468     		ldr	r4, [r0, #8]
 1843 004e 002C     		cmp	r4, #0
 1844 0050 F2D0     		beq	.L158
 1845              	.L154:
1078:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return NULL;
1079:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1080:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1081:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return *(queue_def->cb);
1082:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1846              		.loc 1 1082 0
 1847 0052 04B0     		add	sp, sp, #16
 1848              	.LCFI39:
 1849              		.cfi_def_cfa_offset 16
 1850              		@ sp needed
 1851 0054 70BD     		pop	{r4, r5, r6, pc}
 1852              		.cfi_endproc
ARM GAS  /tmp/cci2zZmt.s 			page 55


 1853              	.LFE60:
 1855              		.section	.text.osMailAlloc,"ax",%progbits
 1856              		.align	1
 1857              		.global	osMailAlloc
 1858              		.syntax unified
 1859              		.thumb
 1860              		.thumb_func
 1861              		.fpu softvfp
 1863              	osMailAlloc:
 1864              	.LFB61:
1083:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1084:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1085:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Allocate a memory block from a mail
1086:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id      mail queue ID obtained with \ref osMailCreate.
1087:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec      timeout value or 0 in case of no time-out.
1088:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval pointer to memory block that can be filled with mail or NULL in case error.
1089:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMailAlloc shall be consistent in every CMSIS-RTOS.
1090:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1091:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** void *osMailAlloc (osMailQId queue_id, uint32_t millisec)
1092:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1865              		.loc 1 1092 0
 1866              		.cfi_startproc
 1867              		@ args = 0, pretend = 0, frame = 0
 1868              		@ frame_needed = 0, uses_anonymous_args = 0
 1869              		@ link register save eliminated.
 1870              	.LVL162:
1093:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) millisec;
1094:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   void *p;
1095:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1096:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1097:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (queue_id == NULL) {
 1871              		.loc 1 1097 0
 1872 0000 10B1     		cbz	r0, .L160
1098:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return NULL;
1099:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1100:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1101:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   p = osPoolAlloc(queue_id->pool);
 1873              		.loc 1 1101 0
 1874 0002 8068     		ldr	r0, [r0, #8]
 1875              	.LVL163:
 1876 0004 FFF7FEBF 		b	osPoolAlloc
 1877              	.LVL164:
 1878              	.L160:
1102:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1103:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return p;
1104:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1879              		.loc 1 1104 0
 1880 0008 7047     		bx	lr
 1881              		.cfi_endproc
 1882              	.LFE61:
 1884              		.section	.text.osMailCAlloc,"ax",%progbits
 1885              		.align	1
 1886              		.global	osMailCAlloc
 1887              		.syntax unified
 1888              		.thumb
 1889              		.thumb_func
 1890              		.fpu softvfp
ARM GAS  /tmp/cci2zZmt.s 			page 56


 1892              	osMailCAlloc:
 1893              	.LFB62:
1105:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1106:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1107:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Allocate a memory block from a mail and set memory block to zero
1108:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id      mail queue ID obtained with \ref osMailCreate.
1109:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec      timeout value or 0 in case of no time-out.
1110:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval pointer to memory block that can be filled with mail or NULL in case error.
1111:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMailCAlloc shall be consistent in every CMSIS-RTOS.
1112:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1113:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** void *osMailCAlloc (osMailQId queue_id, uint32_t millisec)
1114:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1894              		.loc 1 1114 0
 1895              		.cfi_startproc
 1896              		@ args = 0, pretend = 0, frame = 0
 1897              		@ frame_needed = 0, uses_anonymous_args = 0
 1898              	.LVL165:
 1899 0000 08B5     		push	{r3, lr}
 1900              	.LCFI40:
 1901              		.cfi_def_cfa_offset 8
 1902              		.cfi_offset 3, -8
 1903              		.cfi_offset 14, -4
1115:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   uint32_t i;
1116:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   void *p = osMailAlloc(queue_id, millisec);
 1904              		.loc 1 1116 0
 1905 0002 FFF7FEFF 		bl	osMailAlloc
 1906              	.LVL166:
1117:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1118:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (p) {
 1907              		.loc 1 1118 0
 1908 0006 20B1     		cbz	r0, .L161
 1909              	.LVL167:
1119:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     for (i = 0; i < sizeof(queue_id->queue_def->item_sz); i++) {
1120:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ((uint8_t *)p)[i] = 0;
 1910              		.loc 1 1120 0
 1911 0008 0023     		movs	r3, #0
 1912 000a 0370     		strb	r3, [r0]
 1913              	.LVL168:
 1914 000c 4370     		strb	r3, [r0, #1]
 1915              	.LVL169:
 1916 000e 8370     		strb	r3, [r0, #2]
 1917              	.LVL170:
 1918 0010 C370     		strb	r3, [r0, #3]
 1919              	.LVL171:
 1920              	.L161:
1121:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1122:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1123:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1124:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return p;
1125:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1921              		.loc 1 1125 0
 1922 0012 08BD     		pop	{r3, pc}
 1923              		.cfi_endproc
 1924              	.LFE62:
 1926              		.section	.text.osMailPut,"ax",%progbits
 1927              		.align	1
 1928              		.global	osMailPut
ARM GAS  /tmp/cci2zZmt.s 			page 57


 1929              		.syntax unified
 1930              		.thumb
 1931              		.thumb_func
 1932              		.fpu softvfp
 1934              	osMailPut:
 1935              	.LFB63:
1126:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1127:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1128:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Put a mail to a queue
1129:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id      mail queue ID obtained with \ref osMailCreate.
1130:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  mail          memory block previously allocated with \ref osMailAlloc or \ref osMailCAllo
1131:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function.
1132:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMailPut shall be consistent in every CMSIS-RTOS.
1133:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1134:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osMailPut (osMailQId queue_id, void *mail)
1135:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 1936              		.loc 1 1135 0
 1937              		.cfi_startproc
 1938              		@ args = 0, pretend = 0, frame = 16
 1939              		@ frame_needed = 0, uses_anonymous_args = 0
 1940              	.LVL172:
 1941 0000 1FB5     		push	{r0, r1, r2, r3, r4, lr}
 1942              	.LCFI41:
 1943              		.cfi_def_cfa_offset 24
 1944              		.cfi_offset 4, -8
 1945              		.cfi_offset 14, -4
 1946              		.loc 1 1135 0
 1947 0002 0191     		str	r1, [sp, #4]
1136:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken;
1137:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1138:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1139:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (queue_id == NULL) {
 1948              		.loc 1 1139 0
 1949 0004 F8B1     		cbz	r0, .L170
1140:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
1141:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1142:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1143:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   taskWoken = pdFALSE;
 1950              		.loc 1 1143 0
 1951 0006 0024     		movs	r4, #0
 1952 0008 0394     		str	r4, [sp, #12]
 1953              	.LBB130:
 1954              	.LBB131:
 1955              	.LBB132:
 1956              		.loc 2 109 0
 1957              		.syntax unified
 1958              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1959 000a EFF30583 		MRS r3, ipsr
 1960              	@ 0 "" 2
 1961              		.thumb
 1962              		.syntax unified
 1963              	.LBE132:
 1964              	.LBE131:
 1965              	.LBE130:
1144:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1145:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
 1966              		.loc 1 1145 0
ARM GAS  /tmp/cci2zZmt.s 			page 58


 1967 000e 93B1     		cbz	r3, .L166
1146:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueSendFromISR(queue_id->handle, &mail, &taskWoken) != pdTRUE) {
 1968              		.loc 1 1146 0
 1969 0010 2346     		mov	r3, r4
 1970 0012 03AA     		add	r2, sp, #12
 1971 0014 01A9     		add	r1, sp, #4
 1972              	.LVL173:
 1973 0016 4068     		ldr	r0, [r0, #4]
 1974              	.LVL174:
 1975 0018 FFF7FEFF 		bl	xQueueGenericSendFromISR
 1976              	.LVL175:
 1977 001c 0128     		cmp	r0, #1
 1978 001e 02D0     		beq	.L167
 1979              	.L169:
1147:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 1980              		.loc 1 1147 0
 1981 0020 FF20     		movs	r0, #255
 1982              	.L164:
1148:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1149:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
1150:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1151:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
1152:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueSend(queue_id->handle, &mail, 0) != pdTRUE) { 
1153:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
1154:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1155:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1156:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1157:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1158:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 1983              		.loc 1 1158 0
 1984 0022 04B0     		add	sp, sp, #16
 1985              	.LCFI42:
 1986              		.cfi_remember_state
 1987              		.cfi_def_cfa_offset 8
 1988              		@ sp needed
 1989 0024 10BD     		pop	{r4, pc}
 1990              	.L167:
 1991              	.LCFI43:
 1992              		.cfi_restore_state
1149:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1993              		.loc 1 1149 0
 1994 0026 039B     		ldr	r3, [sp, #12]
 1995 0028 1BB1     		cbz	r3, .L168
1149:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 1996              		.loc 1 1149 0 is_stmt 0 discriminator 1
 1997 002a 4FF08052 		mov	r2, #268435456
 1998 002e 074B     		ldr	r3, .L174
 1999 0030 1A60     		str	r2, [r3]
 2000              	.L168:
1157:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2001              		.loc 1 1157 0 is_stmt 1
 2002 0032 0020     		movs	r0, #0
 2003 0034 F5E7     		b	.L164
 2004              	.LVL176:
 2005              	.L166:
1152:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       return osErrorOS;
 2006              		.loc 1 1152 0
ARM GAS  /tmp/cci2zZmt.s 			page 59


 2007 0036 1A46     		mov	r2, r3
 2008 0038 01A9     		add	r1, sp, #4
 2009              	.LVL177:
 2010 003a 4068     		ldr	r0, [r0, #4]
 2011              	.LVL178:
 2012 003c FFF7FEFF 		bl	xQueueGenericSend
 2013              	.LVL179:
 2014 0040 0128     		cmp	r0, #1
 2015 0042 EDD1     		bne	.L169
 2016 0044 F5E7     		b	.L168
 2017              	.LVL180:
 2018              	.L170:
1140:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2019              		.loc 1 1140 0
 2020 0046 8020     		movs	r0, #128
 2021              	.LVL181:
 2022 0048 EBE7     		b	.L164
 2023              	.L175:
 2024 004a 00BF     		.align	2
 2025              	.L174:
 2026 004c 04ED00E0 		.word	-536810236
 2027              		.cfi_endproc
 2028              	.LFE63:
 2030              		.section	.text.osMailGet,"ax",%progbits
 2031              		.align	1
 2032              		.global	osMailGet
 2033              		.syntax unified
 2034              		.thumb
 2035              		.thumb_func
 2036              		.fpu softvfp
 2038              	osMailGet:
 2039              	.LFB64:
1159:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1160:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1161:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Get a mail from a queue
1162:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id   mail queue ID obtained with \ref osMailCreate.
1163:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param millisec    timeout value or 0 in case of no time-out
1164:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval event that contains mail information or error code.
1165:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMailGet shall be consistent in every CMSIS-RTOS.
1166:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1167:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osEvent osMailGet (osMailQId queue_id, uint32_t millisec)
1168:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2040              		.loc 1 1168 0
 2041              		.cfi_startproc
 2042              		@ args = 0, pretend = 0, frame = 16
 2043              		@ frame_needed = 0, uses_anonymous_args = 0
 2044              	.LVL182:
 2045 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2046              	.LCFI44:
 2047              		.cfi_def_cfa_offset 20
 2048              		.cfi_offset 4, -20
 2049              		.cfi_offset 5, -16
 2050              		.cfi_offset 6, -12
 2051              		.cfi_offset 7, -8
 2052              		.cfi_offset 14, -4
 2053 0002 85B0     		sub	sp, sp, #20
 2054              	.LCFI45:
ARM GAS  /tmp/cci2zZmt.s 			page 60


 2055              		.cfi_def_cfa_offset 40
 2056              		.loc 1 1168 0
 2057 0004 0446     		mov	r4, r0
 2058 0006 1746     		mov	r7, r2
 2059 0008 0846     		mov	r0, r1
 2060              	.LVL183:
1169:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   portBASE_TYPE taskWoken;
1170:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
1171:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osEvent event;
1172:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1173:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   event.def.mail_id = queue_id;
 2061              		.loc 1 1173 0
 2062 000a 0391     		str	r1, [sp, #12]
 2063 000c 01AD     		add	r5, sp, #4
1174:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1175:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (queue_id == NULL) {
 2064              		.loc 1 1175 0
 2065 000e 11B9     		cbnz	r1, .L177
1176:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     event.status = osErrorParameter;
 2066              		.loc 1 1176 0
 2067 0010 8023     		movs	r3, #128
 2068              	.LVL184:
 2069              	.L189:
1177:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return event;
1178:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1179:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1180:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   taskWoken = pdFALSE;
1181:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1182:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
1183:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) {
1184:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
1185:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1186:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) {
1187:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
1188:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) {
1189:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
1190:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1191:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1192:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1193:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (inHandlerMode()) {
1194:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueReceiveFromISR(queue_id->handle, &event.value.p, &taskWoken) == pdTRUE) {
1195:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
1196:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = osEventMail;
1197:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1198:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else {
1199:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = osOK;
1200:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1201:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     portEND_SWITCHING_ISR(taskWoken);
1202:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1203:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else {
1204:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueReceive(queue_id->handle, &event.value.p, ticks) == pdTRUE) {
1205:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
1206:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = osEventMail;
1207:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1208:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     else {
1209:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       event.status = (ticks == 0) ? osOK : osEventTimeout;
 2070              		.loc 1 1209 0
ARM GAS  /tmp/cci2zZmt.s 			page 61


 2071 0012 0193     		str	r3, [sp, #4]
 2072 0014 15E0     		b	.L182
 2073              	.LVL185:
 2074              	.L177:
1180:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
 2075              		.loc 1 1180 0
 2076 0016 0026     		movs	r6, #0
 2077 0018 0096     		str	r6, [sp]
 2078              	.LVL186:
 2079              	.LBB133:
 2080              	.LBB134:
 2081              	.LBB135:
 2082              		.loc 2 109 0
 2083              		.syntax unified
 2084              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 2085 001a EFF30583 		MRS r3, ipsr
 2086              	@ 0 "" 2
 2087              		.thumb
 2088              		.syntax unified
 2089              	.LBE135:
 2090              	.LBE134:
 2091              	.LBE133:
1193:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xQueueReceiveFromISR(queue_id->handle, &event.value.p, &taskWoken) == pdTRUE) {
 2092              		.loc 1 1193 0
 2093 001e BBB1     		cbz	r3, .L179
1194:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
 2094              		.loc 1 1194 0
 2095 0020 6A46     		mov	r2, sp
 2096              	.LVL187:
 2097 0022 02A9     		add	r1, sp, #8
 2098 0024 4068     		ldr	r0, [r0, #4]
 2099              	.LVL188:
 2100 0026 FFF7FEFF 		bl	xQueueReceiveFromISR
 2101              	.LVL189:
 2102 002a 0128     		cmp	r0, #1
1196:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 2103              		.loc 1 1196 0
 2104 002c 04BF     		itt	eq
 2105 002e 2023     		moveq	r3, #32
 2106 0030 0193     		streq	r3, [sp, #4]
1201:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2107              		.loc 1 1201 0
 2108 0032 009B     		ldr	r3, [sp]
1199:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 2109              		.loc 1 1199 0
 2110 0034 18BF     		it	ne
 2111 0036 0196     		strne	r6, [sp, #4]
1201:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2112              		.loc 1 1201 0
 2113 0038 1BB1     		cbz	r3, .L182
1201:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2114              		.loc 1 1201 0 is_stmt 0 discriminator 1
 2115 003a 4FF08052 		mov	r2, #268435456
 2116 003e 0B4B     		ldr	r3, .L190
 2117 0040 1A60     		str	r2, [r3]
 2118              	.LVL190:
 2119              	.L182:
ARM GAS  /tmp/cci2zZmt.s 			page 62


1210:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1211:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1212:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1213:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return event;
 2120              		.loc 1 1213 0 is_stmt 1
 2121 0042 95E80700 		ldm	r5, {r0, r1, r2}
 2122 0046 84E80700 		stm	r4, {r0, r1, r2}
1214:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2123              		.loc 1 1214 0
 2124 004a 2046     		mov	r0, r4
 2125 004c 05B0     		add	sp, sp, #20
 2126              	.LCFI46:
 2127              		.cfi_remember_state
 2128              		.cfi_def_cfa_offset 20
 2129              		@ sp needed
 2130 004e F0BD     		pop	{r4, r5, r6, r7, pc}
 2131              	.LVL191:
 2132              	.L179:
 2133              	.LCFI47:
 2134              		.cfi_restore_state
1204:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       /* We have mail */
 2135              		.loc 1 1204 0
 2136 0050 02A9     		add	r1, sp, #8
 2137 0052 4068     		ldr	r0, [r0, #4]
 2138              	.LVL192:
 2139 0054 FFF7FEFF 		bl	xQueueGenericReceive
 2140              	.LVL193:
 2141 0058 0128     		cmp	r0, #1
 2142 005a 01D1     		bne	.L183
1206:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 2143              		.loc 1 1206 0
 2144 005c 2023     		movs	r3, #32
 2145 005e D8E7     		b	.L189
 2146              	.L183:
1209:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
 2147              		.loc 1 1209 0
 2148 0060 002F     		cmp	r7, #0
 2149 0062 0CBF     		ite	eq
 2150 0064 0023     		moveq	r3, #0
 2151 0066 4023     		movne	r3, #64
 2152 0068 D3E7     		b	.L189
 2153              	.L191:
 2154 006a 00BF     		.align	2
 2155              	.L190:
 2156 006c 04ED00E0 		.word	-536810236
 2157              		.cfi_endproc
 2158              	.LFE64:
 2160              		.section	.text.osMailFree,"ax",%progbits
 2161              		.align	1
 2162              		.global	osMailFree
 2163              		.syntax unified
 2164              		.thumb
 2165              		.thumb_func
 2166              		.fpu softvfp
 2168              	osMailFree:
 2169              	.LFB65:
1215:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
ARM GAS  /tmp/cci2zZmt.s 			page 63


1216:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1217:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Free a memory block from a mail
1218:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id mail queue ID obtained with \ref osMailCreate.
1219:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  mail     pointer to the memory block that was obtained with \ref osMailGet.
1220:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function.
1221:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @note   MUST REMAIN UNCHANGED: \b osMailFree shall be consistent in every CMSIS-RTOS.
1222:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1223:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osMailFree (osMailQId queue_id, void *mail)
1224:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2170              		.loc 1 1224 0
 2171              		.cfi_startproc
 2172              		@ args = 0, pretend = 0, frame = 0
 2173              		@ frame_needed = 0, uses_anonymous_args = 0
 2174              		@ link register save eliminated.
 2175              	.LVL194:
1225:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (queue_id == NULL) {
 2176              		.loc 1 1225 0
 2177 0000 10B1     		cbz	r0, .L193
1226:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
1227:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1228:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1229:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osPoolFree(queue_id->pool, mail);
 2178              		.loc 1 1229 0
 2179 0002 8068     		ldr	r0, [r0, #8]
 2180              	.LVL195:
 2181 0004 FFF7FEBF 		b	osPoolFree
 2182              	.LVL196:
 2183              	.L193:
1230:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2184              		.loc 1 1230 0
 2185 0008 8020     		movs	r0, #128
 2186              	.LVL197:
 2187 000a 7047     		bx	lr
 2188              		.cfi_endproc
 2189              	.LFE65:
 2191              		.section	.text.osSystickHandler,"ax",%progbits
 2192              		.align	1
 2193              		.global	osSystickHandler
 2194              		.syntax unified
 2195              		.thumb
 2196              		.thumb_func
 2197              		.fpu softvfp
 2199              	osSystickHandler:
 2200              	.LFB66:
1231:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif  /* Use Mail Queues */
1232:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1233:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /*************************** Additional specific APIs to Free RTOS ************/
1234:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1235:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Handles the tick increment
1236:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  none.
1237:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval none.
1238:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1239:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** void osSystickHandler(void)
1240:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2201              		.loc 1 1240 0
 2202              		.cfi_startproc
 2203              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cci2zZmt.s 			page 64


 2204              		@ frame_needed = 0, uses_anonymous_args = 0
 2205 0000 08B5     		push	{r3, lr}
 2206              	.LCFI48:
 2207              		.cfi_def_cfa_offset 8
 2208              		.cfi_offset 3, -8
 2209              		.cfi_offset 14, -4
1241:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1242:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_xTaskGetSchedulerState  == 1 )
1243:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xTaskGetSchedulerState() != taskSCHEDULER_NOT_STARTED)
 2210              		.loc 1 1243 0
 2211 0002 FFF7FEFF 		bl	xTaskGetSchedulerState
 2212              	.LVL198:
 2213 0006 0128     		cmp	r0, #1
 2214 0008 03D0     		beq	.L194
1244:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1245:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif  /* INCLUDE_xTaskGetSchedulerState */  
1246:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     xPortSysTickHandler();
1247:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_xTaskGetSchedulerState  == 1 )
1248:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1249:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif  /* INCLUDE_xTaskGetSchedulerState */  
1250:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2215              		.loc 1 1250 0
 2216 000a BDE80840 		pop	{r3, lr}
 2217              	.LCFI49:
 2218              		.cfi_remember_state
 2219              		.cfi_restore 14
 2220              		.cfi_restore 3
 2221              		.cfi_def_cfa_offset 0
1246:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_xTaskGetSchedulerState  == 1 )
 2222              		.loc 1 1246 0
 2223 000e FFF7FEBF 		b	xPortSysTickHandler
 2224              	.LVL199:
 2225              	.L194:
 2226              	.LCFI50:
 2227              		.cfi_restore_state
 2228 0012 08BD     		pop	{r3, pc}
 2229              		.cfi_endproc
 2230              	.LFE66:
 2232              		.section	.text.osThreadSuspend,"ax",%progbits
 2233              		.align	1
 2234              		.global	osThreadSuspend
 2235              		.syntax unified
 2236              		.thumb
 2237              		.thumb_func
 2238              		.fpu softvfp
 2240              	osThreadSuspend:
 2241              	.LFB67:
1251:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1252:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if ( INCLUDE_eTaskGetState == 1 )
1253:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1254:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Obtain the state of any thread.
1255:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id   thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
1256:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  the stae of the thread, states are encoded by the osThreadState enumerated type.
1257:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1258:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osThreadState osThreadGetState(osThreadId thread_id)
1259:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
1260:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   eTaskState ThreadState;
ARM GAS  /tmp/cci2zZmt.s 			page 65


1261:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osThreadState result;
1262:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1263:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ThreadState = eTaskGetState(thread_id);
1264:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1265:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   switch (ThreadState)
1266:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1267:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   case eRunning :
1268:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osThreadRunning;
1269:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     break;
1270:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   case eReady :
1271:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osThreadReady;
1272:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     break;
1273:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   case eBlocked :
1274:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osThreadBlocked;
1275:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     break;
1276:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   case eSuspended :
1277:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osThreadSuspended;
1278:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     break;
1279:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   case eDeleted :
1280:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osThreadDeleted;
1281:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     break;
1282:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   default:
1283:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osThreadError;
1284:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   } 
1285:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1286:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
1287:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
1288:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif /* INCLUDE_eTaskGetState */
1289:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1290:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_eTaskGetState == 1)
1291:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1292:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief Check if a thread is already suspended or not.
1293:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param thread_id thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
1294:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval status code that indicates the execution status of the function.
1295:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1296:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadIsSuspended(osThreadId thread_id)
1297:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
1298:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (eTaskGetState(thread_id) == eSuspended)
1299:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osOK;
1300:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else
1301:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
1302:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
1303:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif /* INCLUDE_eTaskGetState */
1304:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1305:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Suspend execution of a thread.
1306:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id   thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
1307:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1308:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1309:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadSuspend (osThreadId thread_id)
1310:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2242              		.loc 1 1310 0
 2243              		.cfi_startproc
 2244              		@ args = 0, pretend = 0, frame = 0
 2245              		@ frame_needed = 0, uses_anonymous_args = 0
 2246              	.LVL200:
 2247 0000 08B5     		push	{r3, lr}
 2248              	.LCFI51:
ARM GAS  /tmp/cci2zZmt.s 			page 66


 2249              		.cfi_def_cfa_offset 8
 2250              		.cfi_offset 3, -8
 2251              		.cfi_offset 14, -4
1311:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_vTaskSuspend == 1)
1312:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vTaskSuspend(thread_id);
 2252              		.loc 1 1312 0
 2253 0002 FFF7FEFF 		bl	vTaskSuspend
 2254              	.LVL201:
1313:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1314:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1315:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
1316:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorResource;
1317:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
1318:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2255              		.loc 1 1318 0
 2256 0006 0020     		movs	r0, #0
 2257 0008 08BD     		pop	{r3, pc}
 2258              		.cfi_endproc
 2259              	.LFE67:
 2261              		.section	.text.osThreadResume,"ax",%progbits
 2262              		.align	1
 2263              		.global	osThreadResume
 2264              		.syntax unified
 2265              		.thumb
 2266              		.thumb_func
 2267              		.fpu softvfp
 2269              	osThreadResume:
 2270              	.LFB68:
1319:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1320:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1321:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Resume execution of a suspended thread.
1322:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   thread_id   thread ID obtained by \ref osThreadCreate or \ref osThreadGetId.
1323:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1324:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1325:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadResume (osThreadId thread_id)
1326:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2271              		.loc 1 1326 0
 2272              		.cfi_startproc
 2273              		@ args = 0, pretend = 0, frame = 0
 2274              		@ frame_needed = 0, uses_anonymous_args = 0
 2275              	.LVL202:
 2276 0000 08B5     		push	{r3, lr}
 2277              	.LCFI52:
 2278              		.cfi_def_cfa_offset 8
 2279              		.cfi_offset 3, -8
 2280              		.cfi_offset 14, -4
 2281              	.LBB136:
 2282              	.LBB137:
 2283              	.LBB138:
 2284              		.loc 2 109 0
 2285              		.syntax unified
 2286              	@ 109 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 2287 0002 EFF30583 		MRS r3, ipsr
 2288              	@ 0 "" 2
 2289              		.thumb
 2290              		.syntax unified
 2291              	.LBE138:
ARM GAS  /tmp/cci2zZmt.s 			page 67


 2292              	.LBE137:
 2293              	.LBE136:
1327:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (INCLUDE_vTaskSuspend == 1)  
1328:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if(inHandlerMode())
 2294              		.loc 1 1328 0
 2295 0006 4BB1     		cbz	r3, .L198
1329:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1330:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (xTaskResumeFromISR(thread_id) == pdTRUE)
 2296              		.loc 1 1330 0
 2297 0008 FFF7FEFF 		bl	xTaskResumeFromISR
 2298              	.LVL203:
 2299 000c 0128     		cmp	r0, #1
 2300 000e 03D1     		bne	.L199
1331:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
1332:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       portYIELD_FROM_ISR(pdTRUE);
 2301              		.loc 1 1332 0 discriminator 1
 2302 0010 4FF08052 		mov	r2, #268435456
 2303 0014 034B     		ldr	r3, .L200
 2304 0016 1A60     		str	r2, [r3]
 2305              	.L199:
1333:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1334:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1335:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else
1336:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1337:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     vTaskResume(thread_id);
1338:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1339:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1340:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
1341:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorResource;
1342:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
1343:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2306              		.loc 1 1343 0
 2307 0018 0020     		movs	r0, #0
 2308 001a 08BD     		pop	{r3, pc}
 2309              	.LVL204:
 2310              	.L198:
1337:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2311              		.loc 1 1337 0
 2312 001c FFF7FEFF 		bl	vTaskResume
 2313              	.LVL205:
 2314 0020 FAE7     		b	.L199
 2315              	.L201:
 2316 0022 00BF     		.align	2
 2317              	.L200:
 2318 0024 04ED00E0 		.word	-536810236
 2319              		.cfi_endproc
 2320              	.LFE68:
 2322              		.section	.text.osThreadSuspendAll,"ax",%progbits
 2323              		.align	1
 2324              		.global	osThreadSuspendAll
 2325              		.syntax unified
 2326              		.thumb
 2327              		.thumb_func
 2328              		.fpu softvfp
 2330              	osThreadSuspendAll:
 2331              	.LFB69:
1344:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
ARM GAS  /tmp/cci2zZmt.s 			page 68


1345:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1346:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Suspend execution of a all active threads.
1347:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1348:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1349:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadSuspendAll (void)
1350:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2332              		.loc 1 1350 0
 2333              		.cfi_startproc
 2334              		@ args = 0, pretend = 0, frame = 0
 2335              		@ frame_needed = 0, uses_anonymous_args = 0
 2336 0000 08B5     		push	{r3, lr}
 2337              	.LCFI53:
 2338              		.cfi_def_cfa_offset 8
 2339              		.cfi_offset 3, -8
 2340              		.cfi_offset 14, -4
1351:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskSuspendAll();
 2341              		.loc 1 1351 0
 2342 0002 FFF7FEFF 		bl	vTaskSuspendAll
 2343              	.LVL206:
1352:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1353:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1354:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2344              		.loc 1 1354 0
 2345 0006 0020     		movs	r0, #0
 2346 0008 08BD     		pop	{r3, pc}
 2347              		.cfi_endproc
 2348              	.LFE69:
 2350              		.section	.text.osThreadResumeAll,"ax",%progbits
 2351              		.align	1
 2352              		.global	osThreadResumeAll
 2353              		.syntax unified
 2354              		.thumb
 2355              		.thumb_func
 2356              		.fpu softvfp
 2358              	osThreadResumeAll:
 2359              	.LFB70:
1355:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1356:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1357:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Resume execution of a all suspended threads.
1358:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1359:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1360:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadResumeAll (void)
1361:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2360              		.loc 1 1361 0
 2361              		.cfi_startproc
 2362              		@ args = 0, pretend = 0, frame = 0
 2363              		@ frame_needed = 0, uses_anonymous_args = 0
 2364 0000 08B5     		push	{r3, lr}
 2365              	.LCFI54:
 2366              		.cfi_def_cfa_offset 8
 2367              		.cfi_offset 3, -8
 2368              		.cfi_offset 14, -4
1362:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xTaskResumeAll() == pdTRUE)
 2369              		.loc 1 1362 0
 2370 0002 FFF7FEFF 		bl	xTaskResumeAll
 2371              	.LVL207:
 2372 0006 0128     		cmp	r0, #1
ARM GAS  /tmp/cci2zZmt.s 			page 69


1363:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osOK;
1364:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else
1365:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
1366:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1367:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2373              		.loc 1 1367 0
 2374 0008 14BF     		ite	ne
 2375 000a FF20     		movne	r0, #255
 2376 000c 0020     		moveq	r0, #0
 2377 000e 08BD     		pop	{r3, pc}
 2378              		.cfi_endproc
 2379              	.LFE70:
 2381              		.section	.text.osDelayUntil,"ax",%progbits
 2382              		.align	1
 2383              		.global	osDelayUntil
 2384              		.syntax unified
 2385              		.thumb
 2386              		.thumb_func
 2387              		.fpu softvfp
 2389              	osDelayUntil:
 2390              	.LFB81:
 2391              		.cfi_startproc
 2392              		@ args = 0, pretend = 0, frame = 0
 2393              		@ frame_needed = 0, uses_anonymous_args = 0
 2394              		@ link register save eliminated.
 2395 0000 8120     		movs	r0, #129
 2396 0002 7047     		bx	lr
 2397              		.cfi_endproc
 2398              	.LFE81:
 2400              		.section	.text.osThreadList,"ax",%progbits
 2401              		.align	1
 2402              		.global	osThreadList
 2403              		.syntax unified
 2404              		.thumb
 2405              		.thumb_func
 2406              		.fpu softvfp
 2408              	osThreadList:
 2409              	.LFB72:
1368:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1369:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1370:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Delay a task until a specified time
1371:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   PreviousWakeTime   Pointer to a variable that holds the time at which the 
1372:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** *          task was last unblocked. PreviousWakeTime must be initialised with the current time
1373:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** *          prior to its first use (PreviousWakeTime = osKernelSysTick() )
1374:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   millisec    time delay value
1375:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1376:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1377:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osDelayUntil (uint32_t *PreviousWakeTime, uint32_t millisec)
1378:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
1379:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if INCLUDE_vTaskDelayUntil
1380:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks = (millisec / portTICK_PERIOD_MS);
1381:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskDelayUntil((TickType_t *) PreviousWakeTime, ticks ? ticks : 1);
1382:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1383:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1384:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
1385:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) millisec;
1386:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) PreviousWakeTime;
ARM GAS  /tmp/cci2zZmt.s 			page 70


1387:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1388:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osErrorResource;
1389:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
1390:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
1391:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1392:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1393:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief   Lists all the current threads, along with their current state 
1394:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** *          and stack usage high water mark.
1395:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   buffer   A buffer into which the above mentioned details
1396:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** *          will be written
1397:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1398:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1399:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osThreadList (uint8_t *buffer)
1400:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2410              		.loc 1 1400 0
 2411              		.cfi_startproc
 2412              		@ args = 0, pretend = 0, frame = 0
 2413              		@ frame_needed = 0, uses_anonymous_args = 0
 2414              		@ link register save eliminated.
 2415              	.LVL208:
1401:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if ( ( configUSE_TRACE_FACILITY == 1 ) && ( configUSE_STATS_FORMATTING_FUNCTIONS == 1 ) )
1402:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   vTaskList((char *)buffer);
1403:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
1404:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1405:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2416              		.loc 1 1405 0
 2417 0000 0020     		movs	r0, #0
 2418              	.LVL209:
 2419 0002 7047     		bx	lr
 2420              		.cfi_endproc
 2421              	.LFE72:
 2423              		.section	.text.osMessagePeek,"ax",%progbits
 2424              		.align	1
 2425              		.global	osMessagePeek
 2426              		.syntax unified
 2427              		.thumb
 2428              		.thumb_func
 2429              		.fpu softvfp
 2431              	osMessagePeek:
 2432              	.LFB73:
1406:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1407:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1408:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Receive an item from a queue without removing the item from the queue.
1409:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  queue_id  message queue ID obtained with \ref osMessageCreate.
1410:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  millisec  timeout value or 0 in case of no time-out.
1411:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval event information that includes status code.
1412:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1413:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osEvent osMessagePeek (osMessageQId queue_id, uint32_t millisec)
1414:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2433              		.loc 1 1414 0
 2434              		.cfi_startproc
 2435              		@ args = 0, pretend = 0, frame = 16
 2436              		@ frame_needed = 0, uses_anonymous_args = 0
 2437              	.LVL210:
 2438 0000 7FB5     		push	{r0, r1, r2, r3, r4, r5, r6, lr}
 2439              	.LCFI55:
 2440              		.cfi_def_cfa_offset 32
ARM GAS  /tmp/cci2zZmt.s 			page 71


 2441              		.cfi_offset 4, -16
 2442              		.cfi_offset 5, -12
 2443              		.cfi_offset 6, -8
 2444              		.cfi_offset 14, -4
 2445              		.loc 1 1414 0
 2446 0002 0446     		mov	r4, r0
 2447 0004 1646     		mov	r6, r2
 2448 0006 0846     		mov	r0, r1
 2449              	.LVL211:
1415:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
1416:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osEvent event;
1417:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1418:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   event.def.message_id = queue_id;
 2450              		.loc 1 1418 0
 2451 0008 0391     		str	r1, [sp, #12]
 2452 000a 01AD     		add	r5, sp, #4
1419:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1420:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (queue_id == NULL) {
 2453              		.loc 1 1420 0
 2454 000c 41B9     		cbnz	r1, .L209
1421:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     event.status = osErrorParameter;
 2455              		.loc 1 1421 0
 2456 000e 8023     		movs	r3, #128
 2457              	.LVL212:
 2458              	.L215:
1422:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return event;
1423:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1424:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1425:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
1426:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) {
1427:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
1428:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1429:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) {
1430:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
1431:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) {
1432:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
1433:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1434:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1435:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1436:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xQueuePeek(queue_id, &event.value.v, ticks) == pdTRUE) 
1437:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1438:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     /* We have mail */
1439:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     event.status = osEventMessage;
1440:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1441:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else 
1442:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1443:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     event.status = (ticks == 0) ? osOK : osEventTimeout;
 2459              		.loc 1 1443 0
 2460 0010 0193     		str	r3, [sp, #4]
1444:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1445:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1446:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return event;
 2461              		.loc 1 1446 0
 2462 0012 95E80700 		ldm	r5, {r0, r1, r2}
 2463 0016 84E80700 		stm	r4, {r0, r1, r2}
1447:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2464              		.loc 1 1447 0
ARM GAS  /tmp/cci2zZmt.s 			page 72


 2465 001a 2046     		mov	r0, r4
 2466 001c 04B0     		add	sp, sp, #16
 2467              	.LCFI56:
 2468              		.cfi_remember_state
 2469              		.cfi_def_cfa_offset 16
 2470              		@ sp needed
 2471 001e 70BD     		pop	{r4, r5, r6, pc}
 2472              	.LVL213:
 2473              	.L209:
 2474              	.LCFI57:
 2475              		.cfi_restore_state
1436:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
 2476              		.loc 1 1436 0
 2477 0020 0123     		movs	r3, #1
 2478 0022 02A9     		add	r1, sp, #8
 2479 0024 FFF7FEFF 		bl	xQueueGenericReceive
 2480              	.LVL214:
 2481 0028 0128     		cmp	r0, #1
 2482 002a 01D1     		bne	.L211
1439:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2483              		.loc 1 1439 0
 2484 002c 1023     		movs	r3, #16
 2485 002e EFE7     		b	.L215
 2486              	.L211:
1443:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
 2487              		.loc 1 1443 0
 2488 0030 002E     		cmp	r6, #0
 2489 0032 0CBF     		ite	eq
 2490 0034 0023     		moveq	r3, #0
 2491 0036 4023     		movne	r3, #64
 2492 0038 EAE7     		b	.L215
 2493              		.cfi_endproc
 2494              	.LFE73:
 2496              		.section	.text.osRecursiveMutexCreate,"ax",%progbits
 2497              		.align	1
 2498              		.global	osRecursiveMutexCreate
 2499              		.syntax unified
 2500              		.thumb
 2501              		.thumb_func
 2502              		.fpu softvfp
 2504              	osRecursiveMutexCreate:
 2505              	.LFB74:
1448:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1449:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1450:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Create and Initialize a Recursive Mutex
1451:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param  mutex_def     mutex definition referenced with \ref osMutex.
1452:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  mutex ID for reference by other functions or NULL in case of error..
1453:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1454:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osMutexId osRecursiveMutexCreate (const osMutexDef_t *mutex_def)
1455:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2506              		.loc 1 1455 0
 2507              		.cfi_startproc
 2508              		@ args = 0, pretend = 0, frame = 0
 2509              		@ frame_needed = 0, uses_anonymous_args = 0
 2510              		@ link register save eliminated.
 2511              	.LVL215:
1456:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   (void) mutex_def;
ARM GAS  /tmp/cci2zZmt.s 			page 73


1457:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_RECURSIVE_MUTEXES == 1)
1458:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return xSemaphoreCreateRecursiveMutex();
1459:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
1460:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return NULL;
1461:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif	
1462:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2512              		.loc 1 1462 0
 2513 0000 0020     		movs	r0, #0
 2514              	.LVL216:
 2515 0002 7047     		bx	lr
 2516              		.cfi_endproc
 2517              	.LFE74:
 2519              		.section	.text.osRecursiveMutexRelease,"ax",%progbits
 2520              		.align	1
 2521              		.global	osRecursiveMutexRelease
 2522              		.syntax unified
 2523              		.thumb
 2524              		.thumb_func
 2525              		.fpu softvfp
 2527              	osRecursiveMutexRelease:
 2528              	.LFB75:
1463:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1464:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1465:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Release a Recursive Mutex
1466:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   mutex_id      mutex ID obtained by \ref osRecursiveMutexCreate.
1467:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1468:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1469:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osRecursiveMutexRelease (osMutexId mutex_id)
1470:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2529              		.loc 1 1470 0
 2530              		.cfi_startproc
 2531              		@ args = 0, pretend = 0, frame = 0
 2532              		@ frame_needed = 0, uses_anonymous_args = 0
 2533              		@ link register save eliminated.
 2534              	.LVL217:
1471:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_RECURSIVE_MUTEXES == 1)
1472:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   osStatus result = osOK;
1473:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****  
1474:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xSemaphoreGiveRecursive(mutex_id) != pdTRUE) 
1475:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1476:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     result = osErrorOS;
1477:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1478:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return result;
1479:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
1480:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	return osErrorResource;
1481:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
1482:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2535              		.loc 1 1482 0
 2536 0000 8120     		movs	r0, #129
 2537              	.LVL218:
 2538 0002 7047     		bx	lr
 2539              		.cfi_endproc
 2540              	.LFE75:
 2542              		.section	.text.osRecursiveMutexWait,"ax",%progbits
 2543              		.align	1
 2544              		.global	osRecursiveMutexWait
 2545              		.syntax unified
ARM GAS  /tmp/cci2zZmt.s 			page 74


 2546              		.thumb
 2547              		.thumb_func
 2548              		.fpu softvfp
 2550              	osRecursiveMutexWait:
 2551              	.LFB76:
1483:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 
1484:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** /**
1485:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @brief  Release a Recursive Mutex
1486:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param   mutex_id    mutex ID obtained by \ref osRecursiveMutexCreate.
1487:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @param millisec      timeout value or 0 in case of no time-out.
1488:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** * @retval  status code that indicates the execution status of the function.
1489:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** */
1490:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** osStatus osRecursiveMutexWait (osMutexId mutex_id, uint32_t millisec)
1491:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** {
 2552              		.loc 1 1491 0
 2553              		.cfi_startproc
 2554              		@ args = 0, pretend = 0, frame = 0
 2555              		@ frame_needed = 0, uses_anonymous_args = 0
 2556              		@ link register save eliminated.
 2557              	.LVL219:
1492:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #if (configUSE_RECURSIVE_MUTEXES == 1)
1493:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   TickType_t ticks;
1494:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1495:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (mutex_id == NULL)
1496:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1497:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorParameter;
1498:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1499:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1500:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   ticks = 0;
1501:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (millisec == osWaitForever) 
1502:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1503:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = portMAX_DELAY;
1504:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1505:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   else if (millisec != 0) 
1506:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1507:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     ticks = millisec / portTICK_PERIOD_MS;
1508:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     if (ticks == 0) 
1509:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     {
1510:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****       ticks = 1;
1511:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     }
1512:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1513:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   
1514:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   if (xSemaphoreTakeRecursive(mutex_id, ticks) != pdTRUE) 
1515:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   {
1516:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****     return osErrorOS;
1517:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   }
1518:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c ****   return osOK;
1519:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #else
1520:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** 	return osErrorResource;
1521:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** #endif
1522:Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.c **** }
 2558              		.loc 1 1522 0
 2559 0000 8120     		movs	r0, #129
 2560              	.LVL220:
 2561 0002 7047     		bx	lr
 2562              		.cfi_endproc
 2563              	.LFE76:
ARM GAS  /tmp/cci2zZmt.s 			page 75


 2565              		.text
 2566              	.Letext0:
 2567              		.file 3 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/machine/_default_types.h"
 2568              		.file 4 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/lock.h"
 2569              		.file 5 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/_types.h"
 2570              		.file 6 "/opt/gcc-arm-none-eabi-6-2017-q1-update/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 2571              		.file 7 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/reent.h"
 2572              		.file 8 "/opt/gcc-arm-none-eabi-6-2017-q1-update/arm-none-eabi/include/sys/_stdint.h"
 2573              		.file 9 "Inc/FreeRTOSConfig.h"
 2574              		.file 10 "Middlewares/Third_Party/FreeRTOS/Source/include/projdefs.h"
 2575              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM3/portmacro.h"
 2576              		.file 12 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 2577              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/include/timers.h"
 2578              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 2579              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 2580              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 2581              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/include/portable.h"
ARM GAS  /tmp/cci2zZmt.s 			page 76


DEFINED SYMBOLS
                            *ABS*:0000000000000000 cmsis_os.c
     /tmp/cci2zZmt.s:16     .text.osKernelStart:0000000000000000 $t
     /tmp/cci2zZmt.s:23     .text.osKernelStart:0000000000000000 osKernelStart
     /tmp/cci2zZmt.s:45     .text.osKernelRunning:0000000000000000 $t
     /tmp/cci2zZmt.s:52     .text.osKernelRunning:0000000000000000 osKernelRunning
     /tmp/cci2zZmt.s:75     .text.osKernelSysTick:0000000000000000 $t
     /tmp/cci2zZmt.s:82     .text.osKernelSysTick:0000000000000000 osKernelSysTick
     /tmp/cci2zZmt.s:116    .text.osThreadCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:123    .text.osThreadCreate:0000000000000000 osThreadCreate
     /tmp/cci2zZmt.s:195    .text.osThreadGetId:0000000000000000 $t
     /tmp/cci2zZmt.s:202    .text.osThreadGetId:0000000000000000 osThreadGetId
     /tmp/cci2zZmt.s:216    .text.osThreadTerminate:0000000000000000 $t
     /tmp/cci2zZmt.s:223    .text.osThreadTerminate:0000000000000000 osThreadTerminate
     /tmp/cci2zZmt.s:245    .text.osThreadYield:0000000000000000 $t
     /tmp/cci2zZmt.s:252    .text.osThreadYield:0000000000000000 osThreadYield
     /tmp/cci2zZmt.s:273    .text.osThreadSetPriority:0000000000000000 $t
     /tmp/cci2zZmt.s:280    .text.osThreadSetPriority:0000000000000000 osThreadSetPriority
     /tmp/cci2zZmt.s:315    .text.osThreadGetPriority:0000000000000000 $t
     /tmp/cci2zZmt.s:322    .text.osThreadGetPriority:0000000000000000 osThreadGetPriority
     /tmp/cci2zZmt.s:387    .text.osDelay:0000000000000000 $t
     /tmp/cci2zZmt.s:394    .text.osDelay:0000000000000000 osDelay
     /tmp/cci2zZmt.s:420    .text.osTimerCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:427    .text.osTimerCreate:0000000000000000 osTimerCreate
     /tmp/cci2zZmt.s:443    .text.osTimerStart:0000000000000000 $t
     /tmp/cci2zZmt.s:450    .text.osTimerStart:0000000000000000 osTimerStart
     /tmp/cci2zZmt.s:466    .text.osTimerStop:0000000000000000 $t
     /tmp/cci2zZmt.s:473    .text.osTimerStop:0000000000000000 osTimerStop
     /tmp/cci2zZmt.s:485    .text.osTimerDelete:0000000000000000 $t
     /tmp/cci2zZmt.s:492    .text.osTimerDelete:0000000000000000 osTimerDelete
     /tmp/cci2zZmt.s:508    .text.osSignalSet:0000000000000000 $t
     /tmp/cci2zZmt.s:515    .text.osSignalSet:0000000000000000 osSignalSet
     /tmp/cci2zZmt.s:591    .text.osSignalSet:0000000000000040 $d
     /tmp/cci2zZmt.s:596    .text.osSignalWait:0000000000000000 $t
     /tmp/cci2zZmt.s:603    .text.osSignalWait:0000000000000000 osSignalWait
     /tmp/cci2zZmt.s:699    .text.osMutexCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:706    .text.osMutexCreate:0000000000000000 osMutexCreate
     /tmp/cci2zZmt.s:723    .text.osMutexWait:0000000000000000 $t
     /tmp/cci2zZmt.s:730    .text.osMutexWait:0000000000000000 osMutexWait
     /tmp/cci2zZmt.s:820    .text.osMutexWait:0000000000000044 $d
     /tmp/cci2zZmt.s:825    .text.osSemaphoreCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:832    .text.osSemaphoreCreate:0000000000000000 osSemaphoreCreate
     /tmp/cci2zZmt.s:879    .text.osSemaphoreWait:0000000000000000 $t
     /tmp/cci2zZmt.s:886    .text.osSemaphoreWait:0000000000000000 osSemaphoreWait
     /tmp/cci2zZmt.s:976    .text.osSemaphoreWait:0000000000000044 $d
     /tmp/cci2zZmt.s:981    .text.osSemaphoreRelease:0000000000000000 $t
     /tmp/cci2zZmt.s:988    .text.osSemaphoreRelease:0000000000000000 osSemaphoreRelease
     /tmp/cci2zZmt.s:1065   .text.osSemaphoreRelease:000000000000003c $d
     /tmp/cci2zZmt.s:1070   .text.osMutexRelease:0000000000000000 $t
     /tmp/cci2zZmt.s:1077   .text.osMutexRelease:0000000000000000 osMutexRelease
     /tmp/cci2zZmt.s:1088   .text.osSemaphoreDelete:0000000000000000 $t
     /tmp/cci2zZmt.s:1095   .text.osSemaphoreDelete:0000000000000000 osSemaphoreDelete
     /tmp/cci2zZmt.s:1140   .text.osMutexDelete:0000000000000000 $t
     /tmp/cci2zZmt.s:1147   .text.osMutexDelete:0000000000000000 osMutexDelete
     /tmp/cci2zZmt.s:1158   .text.osPoolCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:1165   .text.osPoolCreate:0000000000000000 osPoolCreate
     /tmp/cci2zZmt.s:1277   .text.osPoolAlloc:0000000000000000 $t
ARM GAS  /tmp/cci2zZmt.s 			page 77


     /tmp/cci2zZmt.s:1284   .text.osPoolAlloc:0000000000000000 osPoolAlloc
     /tmp/cci2zZmt.s:1408   .text.osPoolCAlloc:0000000000000000 $t
     /tmp/cci2zZmt.s:1415   .text.osPoolCAlloc:0000000000000000 osPoolCAlloc
     /tmp/cci2zZmt.s:1442   .text.osPoolFree:0000000000000000 $t
     /tmp/cci2zZmt.s:1449   .text.osPoolFree:0000000000000000 osPoolFree
     /tmp/cci2zZmt.s:1503   .text.osMessageCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:1510   .text.osMessageCreate:0000000000000000 osMessageCreate
     /tmp/cci2zZmt.s:1528   .text.osMessagePut:0000000000000000 $t
     /tmp/cci2zZmt.s:1535   .text.osMessagePut:0000000000000000 osMessagePut
     /tmp/cci2zZmt.s:1623   .text.osMessagePut:0000000000000044 $d
     /tmp/cci2zZmt.s:1628   .text.osMessageGet:0000000000000000 $t
     /tmp/cci2zZmt.s:1635   .text.osMessageGet:0000000000000000 osMessageGet
     /tmp/cci2zZmt.s:1753   .text.osMessageGet:0000000000000068 $d
     /tmp/cci2zZmt.s:1758   .text.osMailCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:1765   .text.osMailCreate:0000000000000000 osMailCreate
     /tmp/cci2zZmt.s:1856   .text.osMailAlloc:0000000000000000 $t
     /tmp/cci2zZmt.s:1863   .text.osMailAlloc:0000000000000000 osMailAlloc
     /tmp/cci2zZmt.s:1885   .text.osMailCAlloc:0000000000000000 $t
     /tmp/cci2zZmt.s:1892   .text.osMailCAlloc:0000000000000000 osMailCAlloc
     /tmp/cci2zZmt.s:1927   .text.osMailPut:0000000000000000 $t
     /tmp/cci2zZmt.s:1934   .text.osMailPut:0000000000000000 osMailPut
     /tmp/cci2zZmt.s:2026   .text.osMailPut:000000000000004c $d
     /tmp/cci2zZmt.s:2031   .text.osMailGet:0000000000000000 $t
     /tmp/cci2zZmt.s:2038   .text.osMailGet:0000000000000000 osMailGet
     /tmp/cci2zZmt.s:2156   .text.osMailGet:000000000000006c $d
     /tmp/cci2zZmt.s:2161   .text.osMailFree:0000000000000000 $t
     /tmp/cci2zZmt.s:2168   .text.osMailFree:0000000000000000 osMailFree
     /tmp/cci2zZmt.s:2192   .text.osSystickHandler:0000000000000000 $t
     /tmp/cci2zZmt.s:2199   .text.osSystickHandler:0000000000000000 osSystickHandler
     /tmp/cci2zZmt.s:2233   .text.osThreadSuspend:0000000000000000 $t
     /tmp/cci2zZmt.s:2240   .text.osThreadSuspend:0000000000000000 osThreadSuspend
     /tmp/cci2zZmt.s:2262   .text.osThreadResume:0000000000000000 $t
     /tmp/cci2zZmt.s:2269   .text.osThreadResume:0000000000000000 osThreadResume
     /tmp/cci2zZmt.s:2318   .text.osThreadResume:0000000000000024 $d
     /tmp/cci2zZmt.s:2323   .text.osThreadSuspendAll:0000000000000000 $t
     /tmp/cci2zZmt.s:2330   .text.osThreadSuspendAll:0000000000000000 osThreadSuspendAll
     /tmp/cci2zZmt.s:2351   .text.osThreadResumeAll:0000000000000000 $t
     /tmp/cci2zZmt.s:2358   .text.osThreadResumeAll:0000000000000000 osThreadResumeAll
     /tmp/cci2zZmt.s:2382   .text.osDelayUntil:0000000000000000 $t
     /tmp/cci2zZmt.s:2389   .text.osDelayUntil:0000000000000000 osDelayUntil
     /tmp/cci2zZmt.s:2401   .text.osThreadList:0000000000000000 $t
     /tmp/cci2zZmt.s:2408   .text.osThreadList:0000000000000000 osThreadList
     /tmp/cci2zZmt.s:2424   .text.osMessagePeek:0000000000000000 $t
     /tmp/cci2zZmt.s:2431   .text.osMessagePeek:0000000000000000 osMessagePeek
     /tmp/cci2zZmt.s:2497   .text.osRecursiveMutexCreate:0000000000000000 $t
     /tmp/cci2zZmt.s:2504   .text.osRecursiveMutexCreate:0000000000000000 osRecursiveMutexCreate
     /tmp/cci2zZmt.s:2520   .text.osRecursiveMutexRelease:0000000000000000 $t
     /tmp/cci2zZmt.s:2527   .text.osRecursiveMutexRelease:0000000000000000 osRecursiveMutexRelease
     /tmp/cci2zZmt.s:2543   .text.osRecursiveMutexWait:0000000000000000 $t
     /tmp/cci2zZmt.s:2550   .text.osRecursiveMutexWait:0000000000000000 osRecursiveMutexWait
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
vTaskStartScheduler
xTaskGetSchedulerState
xTaskGetTickCountFromISR
xTaskGetTickCount
ARM GAS  /tmp/cci2zZmt.s 			page 78


xTaskGenericCreate
xTaskGetCurrentTaskHandle
vTaskDelete
vPortYield
vTaskPrioritySet
uxTaskPriorityGetFromISR
uxTaskPriorityGet
vTaskDelay
xTaskGenericNotifyFromISR
xTaskGenericNotify
xTaskNotifyWait
xQueueCreateMutex
xQueueReceiveFromISR
xQueueGenericReceive
xQueueGenericCreate
xQueueGenericSend
xQueueGiveFromISR
vQueueDelete
pvPortMalloc
vPortFree
ulPortSetInterruptMask
vPortEnterCritical
vPortClearInterruptMask
vPortExitCritical
xQueueGenericSendFromISR
xPortSysTickHandler
vTaskSuspend
xTaskResumeFromISR
vTaskResume
vTaskSuspendAll
xTaskResumeAll
